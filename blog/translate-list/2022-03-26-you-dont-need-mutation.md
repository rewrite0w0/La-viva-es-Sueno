---
slug: you-dont-need-mutation
title: You don't need mutation
authors: rewrite0w0
tags: [you don't, javascript, ë²ˆì—­]
---

# [You don't need mutation](https://dev.to/vangware/you-don-t-need-variables-2gk3)

> ì‹¤ì œì œëª©...
>
> ì‹¤ì œë¡œëŠ” "You don't need variable"ìž…ë‹ˆë‹¤ë§Œ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ë³´ì¡´í•˜ëŠ” ë°©ë²•ì´ í•„ìš”ì—†ë‹¤ëŠ” ì†Œë¦¬ê°€ ì•„ë‹™ë‹ˆë‹¤. í•„ìš”í•˜ë‹ˆê¹Œìš”. í•˜ì§€ë§Œ í•œ ë²ˆ ì €ìž¥í•˜ë©´ ê°’ì„ ì ˆëŒ€ ë°”ê¾¸ì§€ ë§ìžëŠ” ì£¼ìž¥ì„ í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ë§žì•„ìš” ì´ ê¸€ì€ ë¶ˆë³€ì„±ì˜ ë©‹ì§ì„ ë§í•˜ëŠ”ê²ë‹ˆë‹¤.

## ì™œ ë¶ˆë³€ì€ ì•…ëž„í•œê°€?

ë³€ì´ëŠ” ì œ ì»¤ë¦¬ì–´ì—ì„œ ì²˜ë¦¬í–ˆë˜ ëŒ€ë¶€ë¶„ì˜ ë²„ê·¸ì˜ í•µì‹¬ì´ì—ˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ë„ ë˜‘ê°™ì„ ê²ƒì´ë¼ ìƒê°í•©ë‹ˆë‹¤.
ë³€ì´ëŠ” ê°’ì´ ë³€í•˜ëŠ” ê²ƒìž…ë‹ˆë‹¤. í˜‘ì—…ì€ ë°”ê¾¸ë©´ ì•ˆë  ê²ƒì„ ë°”ê¾¸ê¸° ì „ê¹Œì§€ëŠ” ì¢‹ì€ ì¼ìž…ë‹ˆë‹¤.
JavaScriptë‚˜ ë¹„ìŠ·í•œ ì–¸ì–´ì—ëŠ” ì´ëŸ° ì‚¬ê³ ê°€ ì¢…ì¢… ì¼ì–´ë‚©ë‹ˆë‹¤. ì™œëƒë©´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ì— ê°ì²´ë¥¼ ë„˜ê¸°ë©´ `ë³µì‚¬`ê°€ ì•„ë‹ˆë¼ `ì°¸ì¡°`ë¥¼ ì „ë‹¬í•˜ê¸° ë•Œë¬¸ì´ì£ . ì˜ˆì‹œë¥¼ ë´…ì‹œë‹¤.

```js
/**
 * name, age í”„ë¡œí¼í‹°ë¥¼ ê°€ì§„ ê°ì²´ìž…ë‹ˆë‹¤.
 */
const user = {
  name: 'Luke',
  age: 31,
};

/**
 * í•¨ìˆ˜ë¡œ userì˜ ë‚˜ì´ë¥¼ ì˜¬ë ¤ë³´ì£  (+1)
 */
const userNextYear = (user) => {
  user.age += 1;
  return user;
};

const nextYear = userNextYear(user);

// Luke's will be 32
console.log(`${nextYear.name}'s will be ${nextYear.age}`);

// Luke's age is 32
// oh no!
console.log(`${user.name}'s age is ${user.age}`);
```

ì´ëŸ° ë¬¸ì œëŠ” ëª¨ë“  ì½”ë“œê°€ ê°™ì€ ê³³ì— ìžˆë‹¤ëŠ” ëœ»ì´ë‹ˆ ë§Œì•½ í•¨ìˆ˜ë¥¼ ë‹¤ë¥¸ ìž¥ì†Œì—ì„œ importingí•˜ë©´ ì–´ì©Œì£ ? ë³´í†µ ì´ëŸ°ì¼ì´ ì¼ì–´ë‚©ë‹ˆë‹¤.

```js
import { someUtil } from 'somewhere';

const object = { foo: 'bar' };

someUtil(object);

// ê°ì²´ê°€ ì € ë„˜ì–´ë¡œ ê°”ì–´!
// ê°’ì„ ì˜ˆì¸¡í•  ìˆ˜ê°€ ì—†ì–´ìš” @_@
```

## ì–´ë–»ê²Œ ë¬¸ì œë¥¼ í’€ì£ ?

ë³€ì´ê°€ ê°–ëŠ” ë¬¸ì œë¥¼ í•´ê²°ì—ëŠ” ì—¬ëŸ¬ ì ‘ê·¼ë²•ì´ ìžˆìŠµë‹ˆë‹¤. ê·¸ ì¤‘ì—ì„œë„ ë” ì¢‹ì€ ë°©ë²•ì´ ìžˆìŠµë‹ˆë‹¤. ìµœì•…ì˜ ë°©ë²•(ê·¸ë¦¬ê³  ì¼ë°˜ì  ë°©ë²•ì¤‘ í•˜ë‚˜)ì€ í•¨ìˆ˜ì— ì „ë‹¬í•˜ê¸° ì „ì— ê°ì²´ ë³µì‚¬ìž…ë‹ˆë‹¤.

```js
import { someDeepCopyUtil } from 'someLibrary';
import { someUtil } from 'somewhere';

const object = { foo: 'bar' };
const copy = someDeepCopyUtil(object);

someUtil(copy);

// ê°ì²´ëŠ” ë¬´ì‚¬í•´, ì•¼í˜¸!
```

ì´ ë°©ë²•ì˜ ë¬¸ì œëŠ” ë³€ì´ë¥¼ ì™„ì „ížˆ íšŒí”¼í•˜ëŠ” ëŒ€ì‹  ì˜¨ê°– ê³³ì— ì“¸ë°ì—†ëŠ” ìž‘ì—…ì„ í•œë‹¤ëŠ” ì ìž…ë‹ˆë‹¤.

ë˜ ë‹¤ë¥¸ í•´ê²°ì±…ì€ ë³€ì´ë¥¼ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ” í•¨ìˆ˜ë¥¼ ì“°ê³ , ê°’ì— ë³€ê²½ì„ ë”í•´ ë³µì‚¬ë³¸ì„ ë°˜í™˜í•˜ëŠ” ë°©ë²•ìž…ë‹ˆë‹¤.

ì´ëŸ° í•¨ìˆ˜ë¥¼ [ìˆœìˆ˜í•¨ìˆ˜](https://en.wikipedia.org/wiki/Pure_function)ë¼ í•˜ê³ , ë³€ì´ë¥¼ í”¼í•  ìˆ˜ ìžˆëŠ” [ë¶ˆë³€ì„±](https://en.wikipedia.org/wiki/Immutable_object)ì„ ê°€ì§€ê³  ìžˆìŠµë‹ˆë‹¤. ì²˜ìŒ ì˜ˆì‹œë¥¼ ë‹¤ì‹œ ë³´ì£ .

```js
const userNextYear = (user) => ({
  ...user,
  age: user.age + 1,
});

// ìœ ì €ë¥¼ ë³µì‚¬í•´ì„œ ë°˜í™˜
userNextYear(user);

// ì—¬ì „ížˆ ì›ë³¸ ê°’ì€ ê·¸ëŒ€ë¡œ
user.age;
```

ì´ëŸ° ë°©ë²•ì€ ìž‘ì€ ê°ì²´ì— ì¡°ê¸ˆ ë³€ê²½ì„ ë”í•˜ëŠ” ìž‘ì€ í•¨ìˆ˜ì— ì ì ˆí•˜ì§€ë§Œ, ê°ì²´ê°€ ë„¤ìŠ¤íŠ¸í•œ ê°’ì„ ê°–ê³  ìžˆëŠ” ê²½ìš°ì— êµ‰ìž¥ížˆ ë³µìž¡í•´ì§‘ë‹ˆë‹¤.

```js
const object = {
  foo: {
    bar: [0, 1, 2, 3],
    other: {
      value: 'string',
    },
  },
};

const updateOtherValue = (value) => (object) => ({
  ...object,
  foo: {
    ...object.foo,
    other: {
      ...object.foo.other,
      value,
    },
  },
});
```

ë³€ì´ë³´ë‹¤ ë” ë³µìž¡í•©ë‹ˆë‹¤.

```js
const updateOtherValue = (value) => (object) => {
  object.foo.other.value = value;
  return object;
};
```

ìš°ë¦¬ëŠ” ìš´ì´ ì¢‹ê²Œë„ ë¶ˆë³€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ [immer](https://immerjs.github.io/immer/)ê°€ ìžˆìŠµë‹ˆë‹¤.
ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ `updateOtherValue` í•¨ìˆ˜ë¥¼ ì´ë ‡ê²Œ ì“¸ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```js
import { produce } from 'immer';

const updateOtherValue = (value) => (object) =>
  produce(object, (draft) => {
    draft.foo.other.value = value;
  });
```

ìš°ë¦¬ëŠ” ì–‘ìª½ì˜ ìž¥ì ì„ ì–»ê²Œ ë©ë‹ˆë‹¤.
ë³€ì´ì²˜ëŸ¼ ê°„ë‹¨í•˜ì§€ë§Œ ë¶ˆë³€í•œ ì½”ë“œì£ . ì´ì œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì—†ëŠ” JavaScriptë¡œ ëŒì•„ê°€ì£ .

## ë°”ë‹ë¼ë¡œ íšŒí”¼í•˜ê¸°

JavaScriptê°€ ì œê³µí•˜ëŠ” ë©”ì„œë“œì˜ ëª‡ì€ ìˆœìˆ˜í•˜ì§€ ì•Šê¸°ì— ë³¸ ê°ì²´ì— ë³€ì´ë¥¼ ê°€í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ `Array`ì˜ `push`, `pop` ê°™ì€ ë…€ì„ì€ ë³€ì´ê°€ ë°œìƒí•©ë‹ˆë‹¤.

```js
const array = ['foo', 'bar'];
const addValue = (value) => (array) => array.push(value);

const addFooBar = addValue('foobar');

// ì›ë³¸ì´ ë³€í–ˆë‹¤
addFooBar(array); // ["foo", "bar", "foobar"]
```

ìˆœìˆ˜ ë©”ì„œë“œ, í•¨ìˆ˜ê°€ ì•„ë‹ˆë¼ë©´ í”¼í•©ì‹œë‹¤. ì´ëŸ°ì‹ìœ¼ë¡œ

```js
const array = ['foo', 'bar'];
const addValue = (value) => (array) => array.concat(value);

const addFooBar = addValue('foobar');

// array ë³µì‚¬ë³¸ ë°˜í™˜
addFooBar(array); // ["foo", "bar", "foobar"]
// ì›ë³¸ì€ ì•ˆì „í•©ë‹ˆë‹¤ :D
```

í˜¹ì€ `immer`ë¥¼ ì“°ë©´ ì´ë ‡ê²Œë„ ê°€ëŠ¥í•˜ì£ .

```js
import { produce } from 'immer';

const array = ['foo', 'bar'];
const addValue = (value) => (array) =>
  produce(array, (draft) => draft.push(value));

const addFooBar = addValue('foobar');

// ìˆœìˆ˜í•˜ê²Œ ê°™ì€ íš¨ê³¼ë¥¼ ëƒ…ë‹ˆë‹¤ ðŸŽ‰
addValue(array);
```

ëª‡ ëª‡ ì‚¬ì´íŠ¸ì—ì„œ ë³€ì´ í•¨ìˆ˜ë¥¼ ë‹¤ë£¨ê³  ìžˆìŠµë‹ˆë‹¤. ê·¸ì¤‘ì—ì„œ ë°°ì—´ì„ ë‹¤ë£¨ëŠ” ê³³ìœ¼ë¡œ [https://doesitmutate.xyz/](https://doesitmutate.xyz/)ë¥¼ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.
ëª¨ë“  ë°°ì—´ ë©”ì„œë“œë¥¼ ë³€ì´ë¥¼ ë°œìƒì‹œí‚¤ê¸° ìœ„í•œ flagë¥¼ ê°–ê³  ìžˆìŠµë‹ˆë‹¤.(ê·¸ëž˜ì„œ ì´ëŸ° ë°©ì‹ì„ í”¼í•´ì•¼í•˜ì£ .)

DOM APIëŠ” ë³€ì´ë©ì–´ë¦¬ì¸ë°, Web ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë™ì ìœ¼ë¡œ ë¬´ì—‡ì¸ê°€ ë³€ê²½ì´ í•„ìš”í•˜ë‹¤ë©´ ì–´ì©” ìˆ˜ ì—†ì´ ë³€ì´ë¥¼ í•´ì•¼í•©ë‹ˆë‹¤. ë‹¤í–‰ížˆ React, Preact, Vue ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” DOM ìœ„ì— ì¶”ìƒí™” ë ˆì´ì–´ë¥¼ ì”Œìš°ëŠ” VDOMì´ ìžˆìŠµë‹ˆë‹¤. ì´ê±¸ë¡œ DOM ìƒíƒœì— ì§ì ‘ ë³€ì´ë¥¼ ì¼ìœ¼í‚¬ í•„ìš”ì—†ì´ DOM ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìžˆì–´ ì¼ê´€ì ìœ¼ë¡œ ì•ˆì „í•˜ê³  ìˆœìˆ˜í•˜ê²Œ ë™ìž‘í•©ë‹ˆë‹¤.

## í´ëž˜ìŠ¤ì™€ ë³€ì´

ì´ ê¸€ì€ [You don't need classes](./you-don't-need-classes.md) ì‹œë¦¬ì¦ˆë¡œ ê½¤ ë‹®ì€ ë‚´ìš©ìž…ë‹ˆë‹¤. í´ëž˜ìŠ¤ëŠ” ë³´í†µ í´ëž˜ìŠ¤ ë‚´ë¶€ ê°’ì„ ë³´ì¡´í•˜ê³  ë³€ê²½í•˜ëŠ” ë°©ë²•ì´ ì¶”ì²œë©ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ì´ëŠ” í´ëž˜ìŠ¤ë¥¼ í”¼í•˜ê³  ëŒ€ì‹  ìˆœìˆ˜í•œ í•¨ìˆ˜ì™€ ê°’ì„ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ì´ìœ ìž…ë‹ˆë‹¤.
ë§Œì•½ í´ëž˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ ìƒˆ ê°’ì„ í¬í•¨í•œ ìƒˆ í´ëž˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•¨ìœ¼ë¡œ ë³€ì´ë¥¼ í”¼í•  ìˆ˜ ìžˆë„ë¡ í•©ì‹œë‹¤.

## í¼í¬ë¨¼ìŠ¤ëŠ”?

JavaScript ê°™ì€ ì–¸ì–´ëŠ” ìš°ìˆ˜í•œ ê°€ë¹„ì§€ ì»¬ëž™í„°ê°€ ìžˆìŠµë‹ˆë‹¤. ê±°ì˜ ëŒ€ë¶€ë¶„ ë¬´ì—‡ì¸ê°€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ê³  ê·¸ê²ƒì„ ë¬´ì—‡ì¸ê°€ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì›ë³¸ì€ ë©”ëª¨ë¦¬ì—ì„œ ì‚­ì œë©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ë³€ì´ë¥¼ ì¼ìœ¼í‚¤ì§€ ì•Šì€ ì´ì ì— ë‚´ëŠ” ë¹„ìš©ì€ ë¯¸ë¯¸í•©ë‹ˆë‹¤.

## ë³€ì´ê°€ í•„ìš”í•´ìš”?

ê¸€ì„ ì „íŽ¸ê³¼ ê°™ì´ ì—¬ëŸ¬ë¶„ì´ ì§„ì§€í•˜ê²Œ ìƒê°í•˜ê¸° ë°”ë¼ê¸°ì— ì§ˆë¬¸ìœ¼ë¡œ ë§ˆì¹©ë‹ˆë‹¤.
ê·¸ ê°’ì˜ ë³€ì´ê°€ í•„ìš”í•œê°€ìš”?
ë³€ì´ê°€ ì—†ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìžˆëŠ” ë°©ë²•ì´ ì—†ëŠ”ê±´ê°€ìš”?
ì´ê²ƒì´ ëŠ˜ í•´ê²°ì±…ì´ ëœë‹¤ ë‹¨ì–¸í•  ìˆ˜ ì—†ì§€ë§Œ ê¸°ë³¸ì  ìžì„¸ì—¬ì•¼ í•©ë‹ˆë‹¤.

ì§€ê¸ˆê¹Œì§€ ì´ê±¸ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. í˜¹ì‹œ ê¸€ì— ë™ì˜í•  ìˆ˜ ì—†ë‹¤ë©´ ëŒ“ê¸€ ë¶€íƒë“œë¦½ë‹ˆë‹¤.

ê·¸ëŸ¼ ë‹¤ìŒ ê¸€ì—ì„œ ë§Œë‚©ì‹œë‹¤.

> ë©´ì±…
>
> "You don't **need** ..." ë¡œ ë¶ˆë¦¬ëŠ” ì‹œë¦¬ì¦ˆìž…ë‹ˆë‹¤.
>
> ì´ ì‹œë¦¬ì¦ˆëŠ” ëŒ€ì•ˆì„ ëª¨ìƒ‰í•˜ëŠ” ê²ƒì´ì§€ ê°•ìš”ê°€ ì•„ë‹™ë‹ˆë‹¤.
>
> ê·¸ëŸ¬ë¯€ë¡œ ê¸€ì„ ì½ê³ , ëŒ“ê¸€ì„ ì“°ê¸° ì „ì— ìƒê°í•´ì£¼ì„¸ìš”.
>
> **ì„œë¡œë¥¼ ì¡´ì¤‘í•©ì‹œë‹¤.**
