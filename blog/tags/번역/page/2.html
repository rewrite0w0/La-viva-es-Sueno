<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/La-viva-es-Sueno/blog/rss.xml" title="rewrite0w0&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/La-viva-es-Sueno/blog/atom.xml" title="rewrite0w0&#39;s blog Atom Feed"><title data-rh="true">44 posts tagged with &quot;번역&quot; | rewrite0w0&#x27;s blog</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rewrite0w0.github.io/La-viva-es-Sueno/blog/tags/번역/page/2"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="44 posts tagged with &quot;번역&quot; | rewrite0w0&#x27;s blog"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/La-viva-es-Sueno/img/rw.ico"><link data-rh="true" rel="canonical" href="https://rewrite0w0.github.io/La-viva-es-Sueno/blog/tags/번역/page/2"><link data-rh="true" rel="alternate" href="https://rewrite0w0.github.io/La-viva-es-Sueno/blog/tags/번역/page/2" hreflang="en"><link data-rh="true" rel="alternate" href="https://rewrite0w0.github.io/La-viva-es-Sueno/blog/tags/번역/page/2" hreflang="x-default"><link rel="stylesheet" href="/La-viva-es-Sueno/assets/css/styles.b9a6e727.css">
<link rel="preload" href="/La-viva-es-Sueno/assets/js/runtime~main.b5eb68f0.js" as="script">
<link rel="preload" href="/La-viva-es-Sueno/assets/js/main.e651af60.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/La-viva-es-Sueno/"><div class="navbar__logo"><img src="/La-viva-es-Sueno/img/rw.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/La-viva-es-Sueno/img/rw.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/La-viva-es-Sueno/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/rewrite0w0/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-05-05-anata-no-web-service-no-zeijakusei-wo-hakkensha-kara-oshiete-morau-houhou-rfc9116">당신의 web 서비스 취약성을 발견자에게 듣기위한 방법 - RFC9116</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-05-04-github-disabled-git-protocol">GitHub가 git://를 무효화한 것에 대해</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-05-03-shinjin-no-uchi-koredaka-wa-naoshite-hoshii-koto">신입 때 바로 잡았으면 하는 것</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-05-01-flux-and-react">flux와 가상 DOM에 대해서</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-04-30-How-your-familiar-JavaScript-coding-techniques-will-change-in-the-near-future">JavaScript 진화에 변화할 코딩 습관</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-04-28-about-first-class-and-high-order-function">일급 객체와 고차 함수</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-04-28-supplementary-lessons-about-map">.map() 남용을 멈추자 보충</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-04-27-dependabot-no-settei-wo-minaoshitemita">Dependabot 설정을 둘러보았다.</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-04-24-blog-on-github-action">블로그에 github action 넣기</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-04-24-source-ga-kara-no-nazo-no-site">소스가 비어있는 의문의 사이트 therickroll.com</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-04-23-record-of-eslint-prettier">eslint와 prettier 사용기</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2022-04-23-record-of-github-action">github actions 사용기</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/playwright-tutorial">Playwright 사용기</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/commands-cheatsheet">자주 쓰는 명령어 목록</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/record-of-fzo">fzo 제작기</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/confused-modules">모듈이 혼란스럽다.</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/difference-architecture-and-design">아키텍처와 디자인</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/understand-sakura-api">SAKURA API 이해하기</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/first-js-lib">라이브러리 만드는 과정 기록</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/stop-abusing-map">.map() 남용을 멈추자.</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/beginner-programmer-to-know-about-resource-50">모든 초보 프론트엔드 엔지니어가 읽었으면 하는 자료 50</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/mandara-and-programming">만다라로 프로그래밍</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/rakus-ddd">DDD 도입을 위해 한 것</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/rakus-frontend-build-tool-2021">프론트엔드 빌드 도구를 조사했다.</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/try-understand-csr-ssr-ssg-isr">(Next.js) CSR, SSR, SG(SSG), ISR가 모호한 당신을 위해 찬찬히 해설</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/2021-try-fullstack-nextjs">2021년은 fullstack next.js 원년이므로, 유망한 next.js 계열 프레임워크를 전부 체험했다.</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/image-csr-ssr-ssg-isr">도해 CSR, SSR, SG(SSG), ISR</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/think-about-personal-developement-architecture">개인개발 / 스타트업이 선택하면 좋을 최강의 아키텍처에 대한 생각</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/change-array-by-copy-stage3">Change Array by Copy Status Stage3</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/keep-truth-acting">프로그래밍 미경험자가 3개월만에 외자 IT 엔지니어가 되서 연봉 2억에 달하는 로드맵</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/array-sum-array-is-weird">JS에서 [1, 2, 3]+[4, 5, 6]은 왜 &quot;1,2,34,5,6&quot;인가?</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/imasara-react-v18">이제와서 알아보는 React v18</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/safe-react-hooks-policy">보수하기 쉬운 React Hooks 코드 방침</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/unit-test-no-susume">유닛테스트를 권함</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/you-can-define-and-design-project">요건정의 ~ 시스템 설계까지 할 수 있는 인재가 되는 글</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/ES2022-march">ES2022 3월 후보판을 보자</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/React-no-unit-test-2021">React 유닛테스트 2021</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/jibun-no-javascript-unit-test-kaki-kata">(자신만의) JavaScript 유닛테스트 작성 방법</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/react-v18.0">React v18.0(미완)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/you-dont-need-classes">You don&#x27;t need classes</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/you-dont-need-if">You don&#x27;t need if</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/you-dont-need-mutation">You don&#x27;t need mutation</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/you-dont-need-null">You don&#x27;t need null</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/md-in-github">markdown 메모</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/setting-vsc-and-git">vsc 설치후 바로하는 세팅</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/evilcodeinpeacenotwar-and-node-ipc">peacenotwar, node-ipc에 악의적 코드를 메인테이너가 넣었다</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/MS-for-Startups-Founders-Hub">Microsoft for Startups Founders Hub</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/imasararecoil">(TS) 이제와서 묻기 애매한 recoil</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/try-make-myLint">나만의 ESLint 규칙을 만들어보았다.</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/perhaps-TypeScript-in-Browser">TypeScript가 브라우저로 들어올지도 모릅니다.</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/10times-read-react-document">reactHook을 10번 읽고서</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/somo-somo-npmkara-Wakaranai">애초에 npm부터 뭔지 모르겠다.</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/yappari-webpack-ga-wakaranai-episode2">역시 webpack이 뭔지 모르겠다. (에피소드2)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/follow-webpack-guides">webpack 메모 (guides)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/translate-list-without-blog">블로그에 없는 글</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/follow-webpack-concepts">webpack 메모 (concepts)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/yappari-webpack-ga-wakaranai-episode1">역시 webpack이 뭔지 모르겠다. (에피소드1)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/think-about-you-dont-need-loop">You Don&#x27;t Need Loops 번역 후, 감상</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/javascript-secrets">JS문서를 읽으며 느낀 비기</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/functional-programming-is-style">함수형은 프로그래밍 스타일</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/react18-5min">React 18 대비하려면 어떻게 해야할까? 5분만에 이해하기</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/the-mistakes-i-made-as-a-beginner-programmer">초보 프로그래머가 범하는 실수들(The Mistakes I Made As a Beginner Programmer)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/kenkyuu-wo-hajimaru-mae-ni-sittte-oite-hoshii-nanatsu-no-koto">연구하기 전에 알아두면 좋은 7가지</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/tracing-closure">클로저가 알고 싶어</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/engineer-no-rettoukan-tono-tsukiai-kata">엔지니어가 열등감과 마주하는 방법</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/34-JavaScript-Optimization-Techniques-to-Know-in-2021">34 JavaScript Optimization Techniques to Know in 2021</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/block-FLoC">Google Chrome이 권장하는 광고기술 FLoC 정리</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/La-viva-es-Sueno/blog/naze-haskell-wo-manabu-to-yoika">왜 Haskell을 배우는 것이 좋은가</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>44 posts tagged with &quot;번역&quot;</h1><a href="/La-viva-es-Sueno/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/La-viva-es-Sueno/blog/try-understand-csr-ssr-ssg-isr">(Next.js) CSR, SSR, SG(SSG), ISR가 모호한 당신을 위해 찬찬히 해설</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-04-09T00:00:00.000Z" itemprop="datePublished">April 9, 2022</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rewrite0w0" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">rewrite0w0</span></a></div><small class="avatar__subtitle" itemprop="description">JavaScript 개발자</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p><a href="https://zenn.dev/akino/articles/78479998efef55" target="_blank" rel="noopener noreferrer">글</a></p></blockquote><p>안녕하세요, <a href="https://twitter.com/akino_1027" target="_blank" rel="noopener noreferrer">아키노</a>입니다. Web 엔지니어일을 하고 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="들어가며">들어가며<a class="hash-link" href="#들어가며" title="Direct link to heading">​</a></h2><p>일로 <code>Next.js</code>를 사용하고 있지만 <code>SSG</code> <code>SSR</code> <code>ISR</code> 이런 지식이 모호했기에 각잡고 해설했습니다. 틀린점을 알려주신다면 감사합니다.🙇‍♂️</p><p>이하, 본문입니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="각-컨셉의-기본-해설">각 컨셉의 기본 해설<a class="hash-link" href="#각-컨셉의-기본-해설" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="csr">CSR<a class="hash-link" href="#csr" title="Direct link to heading">​</a></h3><blockquote><p><a href="https://developers.google.com/web/updates/2019/02/rendering-on-the-web?hl=ko" target="_blank" rel="noopener noreferrer">Client-Side Rendering (클라이언트 측 렌더링) - 브라우저에서 애플리케이션을 렌더링합니다. 일반적으로 DOM을 사용합니다.</a></p></blockquote><p>한 마디로 서버가 아니라, (JS로 인해) 브라우저 측에서 렌더링하는 방법입니다. <strong>하지만</strong> <code>CSR</code>은 규모가 큰 애플리케이션이라면 클라이언트에서 처리하는 JS 양이 많아집니다. <strong>이에 따라 유저에게 느리게 페이지를 보여줍니다. (유저의 기기 스펙에 의존)</strong></p><p>이 문제를 해결하기 위해 <strong><code>SSR</code>가 등장합니다.</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ssr">SSR<a class="hash-link" href="#ssr" title="Direct link to heading">​</a></h3><p><code>CSR</code> 같은 로직, 데이터 페치를 브라우저에서 일으키면, <strong>서버에서 처리(데이터 페치 등을)하고, HTML을 구축해 클라이언트에 반환하는 방식입니다.</strong></p><p><code>CSR</code>와 달리 클라이언트의 스펙 의존없이 <strong>하이스펙한 서버에서 HTML를 구축할 수 있습니다.</strong></p><p>그렇지만 리퀘스트 마다 서버가 처리하고, HTML 구축되므로, 유저를 기다리는 시간이 여전합니다. 여기서 <strong><code>SSG</code> 등장합니다.</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ssg">SSG<a class="hash-link" href="#ssg" title="Direct link to heading">​</a></h3><p><code>SSR</code>의 문제(<code>CSR</code>도)로 <strong>유저 리퀘스트를 받고나서 HTML를 구축하므로, 시간이 걸린다.</strong> 문제가 있었습니다. 이를 해결하기 위해 <code>SSG</code>가 등장합니다.</p><p><strong><code>SSG</code>은 빌드 할 때 html를 구축합니다. 이 때 외부 API에서 데이터 페치도 합니다. 그리고 유저가 리퀘스트할 때 사전에 구축되어 있는 HTML를 보여줍니다. 또, 애플리케이션 서버에서 HTML를 반환하는게 아니라 CDN에 캐시해 두면 유저는 고속으로 페이지를 볼 수 있습니다. 이렇게 함으로 <code>SSR</code>보다 유저는 빠르게 페이지를 볼 수 있습니다.</strong></p><p>다만 여기에는 문제가 있습니다. 그것도 <strong>2개</strong>나.</p><ol><li>빌드할 때 대량의 데이터 취급하는건 현실적이지 않습니다. 예를 들어 아마존 같은 거대 EC 사이트라면 빌드할 때 모든 데이터를 받아 HTML를 구축하는 것이 어렵습니다.</li></ol><blockquote><p>이 문제는 <strong>폴백이 해결해줍니다.</strong></p></blockquote><ol start="2"><li>리소스 갱신이 빈번하다면 어떻게 될까요? 예를 들어 트위터 같이 많은 사람이 컨텐츠를 갱신하는 경우(갱신이 격렬한 경우)는 <code>SSG</code> 로 정보를 보여줄 수 없습니다. 왜냐면 빌드할 때 데이터 페치하니깐요</li></ol><blockquote><p>이 문제를 해결 위한 방법이 <strong><code>ISR</code>입니다.</strong></p></blockquote><h4 class="anchor anchorWithStickyNavbar_mojV" id="폴백">폴백<a class="hash-link" href="#폴백" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getStaticPaths</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">paths</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 생략</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 여기에！！</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">fallback</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>getStaticPaths()</code> 함수 안에 <code>fallback</code>를 보세요. 이 값이 <code>false</code>라면 존재하지 않은 페이지 접속하면 404으로 보냅니다. <code>true</code>라면 데이터 페치 하지 않은 상태의 HTML를 반환해, 나중에 브라우저가 데이터 페치를 하고 HTML를 재구축합니다.</p><p>동시에 서버 측에서도 똑같이 데이터 페치가 일어나고, HTML를 행합니다. 이후 리퀘스트에서는 서버측에서 완전한 HTML(데이터도 포함된)이 반환됩니다.</p><p>그렇지만 비완전한 상태의 HTML(데이터가 포함되어 있지 않음)이 클라이언트로 보내지므로 이 부분이 결점입니다. 이것도 해결할 수 있습니다.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="blocking">blocking<a class="hash-link" href="#blocking" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getStaticPaths</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">paths</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 생략</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 여기에！！</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">fallback</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;blocking&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>fallback</code> 값이 <code>blocking</code>이라면 데이터를 얻지 않은 페이지 접속할 때 서버에서 불완전한 상태로 HTML를 보내는 것이 아니라 <strong>데이터 페치가 일어나고 나서 HTML가 구축되고, 클리어언트측으로 HTML가 보내집니다.</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="isrincremental-static-regeneration">ISR(Incremental Static Regeneration)<a class="hash-link" href="#isrincremental-static-regeneration" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getStaticProps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">hoge</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> hoge </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">revalidate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 여기에 추가</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>getStaticProps()</code>함수 return 안에 <code>revalidate</code> 값으로 임의의 숫자를 넣어보세요. <strong>이 수 초 이후에 리퀘스트가 올 떄, 서버 측에서 데이터 페치를 다시 행하고, HTML를 재구축 합니다.</strong> 여기서 중요한 점은 리퀘스트한 유저에게는 캐시한 HTML를 반환한다는 점입니다.</p><p>일정 시기마다 서버사이드 렌더링을 일어남으로, 빠르게 페이지 렌더링을 실현할 수 있습니다. 이렇게 하면 게시된 데이터의 갱신 빈도가 높아지고 새로운 데이터를 볼 수 있습니다.</p><p>그렇지만 <code>ISR</code>은 최신 정보가 유저에게 전달되는 것이 아닙니다. (최초 리퀘스트할 때는 캐시된 HTML가 반환되므로)</p><p>사용을 구분해서 이런 느낌을 가지면 좋을 듯 합니다.</p><ul><li>리퀘스트할 때 새 정보가 없어도 좋다: <code>ISR</code></li><li>리퀘스트할 때 새 정보가 있어야 한다: <code>SSR</code>이나 (<code>SWR</code>를 사용한) CSR</li></ul><p>이상입니다. 🙇‍♂️</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="참조글">참조글<a class="hash-link" href="#참조글" title="Direct link to heading">​</a></h3><p><a href="https://qiita.com/thesugar/items/47ec3d243d00ddd0b4ed" target="_blank" rel="noopener noreferrer">Next.js에 의한 SSG과 ISR에 대해 (자신의) 한계까지 세세히 설명</a>
<a href="https://zenn.dev/ria/articles/b709ae94e919c76f814a" target="_blank" rel="noopener noreferrer">Next.js ISR 이해</a></p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/javasciprt">javasciprt</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/next-js">Next.js</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/react">React</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/typescript">typescript</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/번역">번역</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about (Next.js) CSR, SSR, SG(SSG), ISR가 모호한 당신을 위해 찬찬히 해설" href="/La-viva-es-Sueno/blog/try-understand-csr-ssr-ssg-isr"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/La-viva-es-Sueno/blog/2021-try-fullstack-nextjs">2021년은 fullstack next.js 원년이므로, 유망한 next.js 계열 프레임워크를 전부 체험했다.</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-04-08T00:00:00.000Z" itemprop="datePublished">April 8, 2022</time> · <!-- -->31 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rewrite0w0" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">rewrite0w0</span></a></div><small class="avatar__subtitle" itemprop="description">JavaScript 개발자</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p><a href="https://zenn.dev/mizchi/articles/b53f539ade1f42" target="_blank" rel="noopener noreferrer">글</a></p></blockquote><p>이글은 <a href="https://qiita.com/advent-calendar/2020/nextjs" target="_blank" rel="noopener noreferrer">Next.js Advent Calendar 2020</a> 6일째를 위한 글입니다.</p><p>갑작스럽지만 2021년은 Fullstack Next.js의 원년이 됩니다.</p><p>저는 이하의 이유로 그렇게 생각합니다.</p><ul><li>모범방안으로 TypeScript의 De facto화</li><li>Next.js 의 Dynamic Routes에 의한 동적 패스, getStaticProps/getServerSideProps에 의한 사용 유연성 상승</li><li>Vercel에 의한 ISR 발명</li><li>prisma 성숙</li><li>Vercel / Serverless / Cloudflare Workers / Cloudrun 등에 의한 Node.js 서버운용 비용 감소</li></ul><p>참조:</p><ul><li><a href="https://zenn.dev/mizchi/articles/c638f1b3b0cd239d3eea" target="_blank" rel="noopener noreferrer">Frontend Study #1: 기조연설 - Frontend 영역을 재정의하다</a></li><li><a href="https://nextjs.org/blog/next-9-3" target="_blank" rel="noopener noreferrer">Blog - Next.js 9.3 | Next.js</a></li><li><a href="https://nextjs.org/docs/routing/dynamic-routes" target="_blank" rel="noopener noreferrer">Routing: Dynamic Routes | Next.js</a></li><li><a href="https://nextjs.org/docs/api-routes/introduction" target="_blank" rel="noopener noreferrer">API Routes: Introduction | Next.js</a></li><li><a href="https://www.prisma.io/" target="_blank" rel="noopener noreferrer">Prisma - Next-generation ORM for Node.js and TypeScript</a></li></ul><p>vue의 nuxt 뿐이 아니라, rollup의 sapper, deno의 aleph 등 next.js follwer, 그리고 blitz나 frourio 같이 next 랩퍼 라이브러리도 출현했습니다.</p><p>2020년은 이들에게 시행착오의 해였다 생각하며, 내년 이후로는 이들이 실제 제품화 된다 생각합니다.</p><p>그렇지만 Node, webpack의 모범사례에 구속되어있지만, 풀스택 프레임워크로 모범사례가 정해진 것은 아닙니다.
이번 글에는 현시점에서 유망한 프레임워크를 닥치는대로 수동으로 다루며, 코드를 비교하려 합니다.</p><ul><li>next: 본가</li><li>nuxt: vue 판 next</li><li>blitz: next + prisma 으로 rails like fullstack</li><li>frourio: aspida + fastify + 임의의 UI 프레임워크</li><li>bison: 라이브러리를 드러내는 blitz</li><li>redwood: 독립된 router 프레임워크</li><li>aleph: deno 판 next</li><li>sapper: svelte 판 next</li><li>sveltekit: 차기 버전 svelte 본체에 포함될 sapper의 후계</li><li>flareact: Cloudflare Workers에 특화된 Edge Side next</li><li>layr: RPC구현</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="nextjs-발명이란">Next.js 발명이란<a class="hash-link" href="#nextjs-발명이란" title="Direct link to heading">​</a></h3><ul><li>File Based (Dynamic) Routing: 파일을 둔 곳이 자동적으로 루팅이 결정된다. 또 파일명이 동적 파라메터된다.</li><li>Component Based SSR / Hydration: 루팅에 대응해서 Component가 자동적으로 SSR되고, Hydration 된다. 또 화면 trainsistion 할 때 차이 부분만 갱신하므로 CSR 최적화</li><li>Server / SSG Hybrid: 정적 사이트, 동적사이트를 필요에 의해 쓸 수 있다.</li></ul><p>규약이 있어서 생산성, 퍼포먼스를 최적화한다는 방향성이 Next 계의 본질이라 개인적으로 생각합니다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="프레임워크-체험-방향성">프레임워크 체험 방향성<a class="hash-link" href="#프레임워크-체험-방향성" title="Direct link to heading">​</a></h3><ul><li>index 페이지 만든다</li><li>API Routes 기능이 있으면 사용한다</li><li>프레임워크 특유의 기능을 체험</li><li>typescript화 한다</li></ul><p>자, 시작합시다.</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="nextjs"><a href="https://nextjs.org/" target="_blank" rel="noopener noreferrer">next.js</a><a class="hash-link" href="#nextjs" title="Direct link to heading">​</a></h3><p>우선 next.js 기본적 기능을 소개합니다.</p><ul><li>src/pages/<!-- -->*<!-- -->*<!-- -->.tsx에 export default 한 컴포넌트를 SSR한다.</li><li>src/pages/api/<!-- -->*<!-- -->*<!-- -->.ts에 export default 한 함수를 Lambda Function 으로 호출</li></ul><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> next-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> next-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> react react-dom next</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> @types/react-dom @types/node typescript -D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># / 에 대응하는 컴포넌트 작성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ code src/pages/index.tsx</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Index</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Hello Next</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># /api/hello 에 대응하는 API Endpoint</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ code src/pages/api/hello.ts</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_req</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ok&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>개발용 서버 기동</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> next </span><span class="token comment" style="color:#999988;font-style:italic"># 기동</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 브라우저 열기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">open</span><span class="token plain"> http://localhost:3000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># API</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://localhost:3000/api/hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ok</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>제품 빌드</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> next build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>이게 Next계 애플리케이션의 기본구성</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="nuxt">Nuxt<a class="hash-link" href="#nuxt" title="Direct link to heading">​</a></h3><p>vue 판 next.js</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> nuxt-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> nuxt-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> init -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> nuxt @nuxt/typescript-runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> @nuxt/types @nuxt/typescript-build -D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ code tsconfig.json</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>tsconfig 추가</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;target&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ES2019&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;module&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ESNext&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;moduleResolution&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Node&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;lib&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ESNext&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ESNext.AsyncIterable&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DOM&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;esModuleInterop&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;allowJs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;sourceMap&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;strict&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;noEmit&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;baseUrl&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;paths&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;~/*&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;./*&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;@/*&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;./*&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;types&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;@types/node&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@nuxt/types&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;exclude&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;node_modules&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>엔트리 포인트를 추가</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ code pages/index.vue</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-vue theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-vue codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;h1&gt;Hello Nuxt&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>서버 API 추가</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ code nuxt.config.js</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">buildModules</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;@nuxt/typescript-build&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">serverMiddleware</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/api&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">handler</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;~/api/index.ts&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ code api/index.ts</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">express</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;express&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">express</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;/hello&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">_req</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> express</span><span class="token parameter punctuation" style="color:#393A34">.</span><span class="token parameter property-access maybe-class-name">Request</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">res</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> express</span><span class="token parameter punctuation" style="color:#393A34">.</span><span class="token parameter property-access maybe-class-name">Response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ok&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>지금 상황</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ tree </span><span class="token builtin class-name">.</span><span class="token plain"> -I node_modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nuxt.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── index.vue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── tsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── types</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── nuxt.d.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── yarn.lock</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>서버 기동</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> nuxt-ts</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>next와 같이 <code>http://localhost:3000/</code>에 페이지 게시, <code>http://localhost:3000/api/hello</code>로 ok 반환 받음</p><p>빌드</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> nuxt-ts build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>.nuxt</code> 이하로 출력된다.</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="blitz"><a href="https://blitzjs.com/" target="_blank" rel="noopener noreferrer">Blitz</a><a class="hash-link" href="#blitz" title="Direct link to heading">​</a></h3><p>next + prisma 으로 rails like한 규약 기반 개발 흐름을 지향하는 프레임워크</p><p>상세는 <a href="https://zenn.dev/mizchi/articles/cbe81299e145491676tf8" target="_blank" rel="noopener noreferrer">여길</a> 참조.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ npx blitz new blitz-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> blitz-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ blitz db migrate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ blitz generate all project name:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> blitz db migrate --init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ blitz db migrate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># browser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">open</span><span class="token plain"> http://localhost:3000/projects</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>next.js 애플리케이션과는 다르게 user, projects 밑에 하나의 애플리케이션으로 되어있지만, 빌드할 때 하나의 next.js 애플리케이션으로 머시된다. 상세는 .blitz 밑을 보면 알 수 있다.</p><ul><li><a href="https://github.com/colinhacks/zod" target="_blank" rel="noopener noreferrer">colinhacks/zod: TypeScript-first schema validation with static type inference</a></li><li><a href="https://final-form.org/react" target="_blank" rel="noopener noreferrer">React Final Form</a></li><li>Prisma - Next-generation ORM for Node.js and TypeScript</li><li><a href="https://github.com/tannerlinsley/react-query" target="_blank" rel="noopener noreferrer">tannerlinsley/react-query: ⚛️ Hooks for fetching, caching and updating asynchronous data in React： blitz-query</a> 의 실체</li><li>Jest</li><li>TypeScript</li></ul><p>또 blitz에는 <code>*/{queries,mutations}/*</code> 밑의 파일은 어느정도 규약을 따르면 클라이언트에서 호출할 수 있도록 컴파일 된다. 상세는 <a href="https://zenn.dev/mizchi/articles/8ae3fa90799a3d8332ab" target="_blank" rel="noopener noreferrer">여기</a></p><p>빌드</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ blitz build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>.blitz</code> 밑에는 <code>next</code> 폴더 구성에 따라 폴더가 만들어져있음.
즉 다단 빌드되어있음</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="frourio"><a href="https://github.com/frouriojs/frourio" target="_blank" rel="noopener noreferrer">Frourio</a><a class="hash-link" href="#frourio" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="https://i.gyazo.com/2b0b66afeaa5ef90997f11419b957297.png" alt="Frourio" class="img_E7b_"></p><p>풀스택프레임워크, 혹은 풀스택에 대응하기 위한 서버사이드 생성 도구
TypeScript + <a href="https://github.com/aspida/aspida" target="_blank" rel="noopener noreferrer">Aspida</a>를 축으로 여러 라이브러리를 골라 프로젝트를 생성한다.</p><p>선택 가능 라이브러리</p><ul><li>next/nuxt</li><li>prisma/typeorm</li><li>fetch/axios</li></ul><p>이번에는 next/prisma(sqlite)/fetch</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── aspida.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── UserBanner.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── next-env.d.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── _app.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── index.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── favicon.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── vercel.svg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── </span><span class="token variable" style="color:#36acaa">$server</span><span class="token plain">.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── </span><span class="token variable" style="color:#36acaa">$api</span><span class="token plain">.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── </span><span class="token variable" style="color:#36acaa">$relay</span><span class="token plain">.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── controller.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── </span><span class="token variable" style="color:#36acaa">$relay</span><span class="token plain">.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── _taskId@number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   ├── </span><span class="token variable" style="color:#36acaa">$relay</span><span class="token plain">.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   ├── controller.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── controller.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── </span><span class="token variable" style="color:#36acaa">$relay</span><span class="token plain">.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── controller.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── </span><span class="token variable" style="color:#36acaa">$relay</span><span class="token plain">.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── controller.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── hooks.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── prisma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── dev.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── migrations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── </span><span class="token number" style="color:#36acaa">20201001130532</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   ├── schema.prisma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   │   └── steps.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── migrate.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── schema.prisma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── icons</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── dammy.svg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── envValues.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── tasks.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── user.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── types</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── validators</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── webpack.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── yarn.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── styles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── Home.module.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── UserBanner.module.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── globals.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── tsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── apiClient.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── yarn.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">19</span><span class="token plain"> directories, </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> files</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>클라이언트 측을 보자.</p><p>pages/index.tsx</p><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token maybe-class-name">Head</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next/head&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> useCallback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> useState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">FormEvent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">ChangeEvent</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> useAspidaSWR </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@aspida/swr&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> styles </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;~/styles/Home.module.css&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> apiClient </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;~/utils/apiClient&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Task</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;$prisma/client&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token maybe-class-name">UserBanner</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;~/components/UserBanner&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">Home</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> tasks</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mutate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> setTasks</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useAspidaSWR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">apiClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasks</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">label</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setLabel</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> inputLavel </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ChangeEvent</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">HTMLInputElement</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setLabel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createTask </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">FormEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">preventDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">label</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> label </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setLabel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setTasks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">$get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">label</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> toggleDone </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">task</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Task</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">_taskId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">patch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> done</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">done </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTasks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">$get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> deleteTask </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">task</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Task</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">_taskId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTasks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> apiClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">$get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">failed to load</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">tasks</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">loading...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styles</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">container</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">frourio-todo-app</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">icon</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">/favicon.png</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">main</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styles</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">main</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">UserBanner</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styles</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">title</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          Welcome to </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://nextjs.org</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Next.js!</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styles</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">description</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">frourio-todo-app</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"> textAlign</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">&#x27;center&#x27;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onSubmit</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">createTask</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">label</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">inputLavel</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">submit</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ADD</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styles</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">tasks</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">tasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">task</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">task</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">id</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                    </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">checkbox</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                    </span><span class="token tag attr-name" style="color:#00a4db">checked</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">task</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">done</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                    </span><span class="token tag attr-name" style="color:#00a4db">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">toggleDone</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">task</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                  </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                  </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">button</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                  </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">DELETE</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                  </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"> float</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">&#x27;right&#x27;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                  </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">deleteTask</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">task</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">              </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">main</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">footer</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styles</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">footer</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://vercel.com?utm_source=create-next-app&amp;utm_medium=default-template&amp;utm_campaign=create-next-app</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">target</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">_blank</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">noopener noreferrer</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          Powered by</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27; &#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">/vercel.svg</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Vercel Logo</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styles</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">logo</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">footer</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">Home</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><a href="https://github.com/aspida/aspida/tree/master/packages/aspida-swr#readme" target="_blank" rel="noopener noreferrer"><code>@aspida/swr</code></a>의 useAspidaSWR를 사용해 데이터를 받고있다.</p><p>어떻게 타입을 얻지? 생각해서 알아보니 이런 느낌, aspida가 자동생성 타입 정의를 뽑아낸다</p><p>util/apiClient.ts</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">aspida</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@aspida/fetch&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">api</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;~/server/api/$api&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> apiClient </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">api</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">aspida</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>서버사이드를 보면</p><ul><li>fastify<ul><li>fastify-jwt</li></ul></li><li>prisma</li><li>dotenv</li></ul><p>이런 구성입니다.</p><p>npm scripts</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;dev&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;npm run migrate:up &amp;&amp; run-p dev:*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;dev:server&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;webpack --watch --mode=development&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;dev:frourio&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;frourio --watch&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;dev:prisma&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;prisma generate --watch&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;build&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;npm run build:frourio &amp;&amp; webpack --mode=production&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;build:frourio&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;npm run migrate:up &amp;&amp; prisma generate &amp;&amp; frourio&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;migrate&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;npm run migrate:save &amp;&amp; npm run migrate:up&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;migrate:save&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;prisma migrate save --create-db --experimental&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;migrate:up&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;prisma migrate up --create-db --experimental&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;migrate:down&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;prisma migrate down --experimental&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;start&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cross-env NODE_ENV=production node index.js&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>frourio-app 보일러 플레이트 생성과 별개로 frourio 커맨드가 aspida 주변 타입 생성을 하는 느낌</p><p>클라이언트에서 호출한 tasks 구현을 보자</p><p>server/tasks/controller.ts</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> defineController </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./$relay&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> getTasks</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> createTask </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;$/service/tasks&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">defineController</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">get</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getTasks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">post</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> body </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createTask</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">label</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>server/api/tasks/index.ts</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Task</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;$prisma/client&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Methods</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  get</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    query</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      limit</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resBody</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Task</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  post</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reqBody</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Pick</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Task</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;label&#x27;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resBody</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Task</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>server/service/tasks.ts 의 getTasks</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">PrismaClient</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@prisma/client&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Task</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">TaskUpdateInput</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;$prisma/client&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> prisma </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PrismaClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">getTasks</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">limit</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> limit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createTask </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">label</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Task</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;label&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> label </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updateTask </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Task</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;id&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> partialTask</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">TaskUpdateInput</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> partialTask </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> deleteTask </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Task</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;id&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>내부적으로 fastify 용 JSONSchema도 생성하는 듯</p><p>fastify JSONSchema를 적어 고속화하는 특징을 충분히 발휘 등등 똘똘함</p><p>api층, service층 나눠지는 것도 합리적</p><p>모듈러에 어떤 리포지토리층 구현해도 합당</p><p>상세히 다룰려 했지만 주제에 벗어남으로 다른 글에 언급하겠습니다.</p><p>파일 시스템 규약으로 움직임이 정해지는 것이 좋음
제약에 의해 퍼포먼스 최적화함으로 next.js API 서버 버전 느낌.</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="redwood"><a href="https://redwoodjs.com/" target="_blank" rel="noopener noreferrer">RedWood</a><a class="hash-link" href="#redwood" title="Direct link to heading">​</a></h3><p>prisma, GraphQL 사용.</p><p>next.js 영향을 받았지만 router, SSR가 독자적임 (next 사용 안 함)</p><p>Typesciprt도 사용안하며, 꽤 사상이 다름</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> create redwood-app redwood-app</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>폴더구성</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">├── LICENSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── schema.prisma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── seeds.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── jest.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── jsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── functions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   └── graphql.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── graphql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   └── db.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── babel.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── graphql.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── prettier.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── redwood.toml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── jest.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── jsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── favicon.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── robots.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── Routes.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── index.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── index.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── layouts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│           ├── FatalErrorPage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│           │   └── FatalErrorPage.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│           └── NotFoundPage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               └── NotFoundPage.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── yarn.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> directories, </span><span class="token number" style="color:#36acaa">27</span><span class="token plain"> files</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>클라/서버는 web, api 2개로 구별</p><p>Router 독자적</p><p>web/src/routes/Routes.js</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// In this file, all Page components from &#x27;src/pages` are auto-imported. Nested</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// directories are supported, and should be uppercase. Each subdirectory will be</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// prepended onto the component name.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Examples:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;src/pages/HomePage/HomePage.js&#x27;         -&gt; HomePage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;src/pages/Admin/BooksPage/BooksPage.js&#x27; -&gt; AdminBooksPage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Router</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Route</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@redwoodjs/router&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">Routes</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Router</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"> notfound page</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">NotFoundPage</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Router</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">Routes</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>react-router 스러움</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="bison"><a href="https://github.com/echobind/bisonapp" target="_blank" rel="noopener noreferrer">Bison</a><a class="hash-link" href="#bison" title="Direct link to heading">​</a></h3><p>blitz같이 next 랩퍼계열, blitz가 next를 숨기는데에 반해 bison은 다 보여주는 것이 특징</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> create bison-app bison-app</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ tree </span><span class="token builtin class-name">.</span><span class="token plain"> -I node_modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── _templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── cell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── new.ejs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── new.ejs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── graphql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── graphql.ejs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── injectImport.ejs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── page</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── new.ejs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   └── component.ejs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── factory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   └── factory.ejs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│           └── request.ejs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── api.graphql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── chakra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── codegen.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── AllProviders.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── CenteredBoxForm.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── ErrorText.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── FullPageSpinner.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── LoginForm.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── Logo.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── Nav.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── SignupForm.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── constants.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── auth.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── cypress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── commands.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── tsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── cypress.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── graphql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── context.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── profile.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── scalars.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── user.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── schema.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── jest.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── layouts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── LoggedIn.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── LoggedOut.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── apolloClient.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── cookies.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── prisma.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── next-env.d.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── _app.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── graphql.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── index.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── login.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── signup.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── prettier.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── prisma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── migrations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── </span><span class="token number" style="color:#36acaa">20200726094736</span><span class="token plain">-initial-migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── schema.prisma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── steps.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── </span><span class="token number" style="color:#36acaa">20200726203519</span><span class="token plain">-profile-timestamps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── schema.prisma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── steps.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── migrate.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── schema.prisma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── seeds.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── favicon.ico</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── vercel.svg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── buildProd.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── dropDatabase.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── yarnWithEnv.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── auth.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── permissions.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── e2e</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── login.test.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── logout.test.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── tsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── factories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── user.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── helpers.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── jest.setup.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── jest.teardown.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── matchMedia.mock.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── createUser.test.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── login.test.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── me.test.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       ├── signup.test.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │       └── users.test.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── unit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── CenteredBoxForm.test.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── ErrorText.test.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── LoginForm.test.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── Logo.test.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── Nav.test.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── SignupForm.test.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── utils.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── tsconfig.cjs.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── tsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── types.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── setErrors.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">41</span><span class="token plain"> directories, </span><span class="token number" style="color:#36acaa">88</span><span class="token plain"> files</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><ul><li>prisma</li><li>GraphQL Nexus · Declarative, Code-First GraphQL Schemas for JavaScript/TypeScript</li><li>Templates | Hygen</li><li>Chakra UI - A simple, modular and accessible component library that gives you the building blocks you need to build your React applications. - Chakra UI</li><li>Cypress</li><li>Jest</li></ul><p>GraphqlNexus는 DSL으로 타입 정의하면서 구현도 정의함</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> objectType </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@nexus/schema&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Profile Type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Profile</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">objectType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Profile&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;A User Profile&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">definition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">id</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">firstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">lastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createdAt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">updatedAt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fullName&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">nullable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;The first and last name of a user&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> firstName</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> lastName </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">firstName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lastName</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name">Boolean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27; &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><a href="https://github.com/graphql-nexus/nexus-plugin-prisma" target="_blank" rel="noopener noreferrer">prisma binding</a></p><p>blitz generate 정도의 커맨드를 갖지 않은 대신, <a href="https://zenn.dev/takepepe/articles/hygen-template-generator" target="_blank" rel="noopener noreferrer">hygen</a> 이라는 scaffolding 도구를 사용하고 있다.</p><p>chakra-ui는 최근 자주 사용하는 것으로 tailwinds 계열 컴포넌트 프레임워크</p><p>blitz 레시피가 1개 있는데, 마크업 엔지니어 연계하면 편리.</p><p>빌드</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>next와 똑같이 빌드함</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="aleph"><a href="https://alephjs.org/docs/get-started" target="_blank" rel="noopener noreferrer">Aleph</a><a class="hash-link" href="#aleph" title="Direct link to heading">​</a></h3><p>deno제 next.js 계열 프레임워크</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ aleph init aleph-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> aleph-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ aleph dev </span><span class="token comment" style="color:#999988;font-style:italic"># localhost:8080</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>pages/index.tsx</p><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Import</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> useDeno </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://deno.land/x/aleph/mod.ts&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> useState </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://esm.sh/react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token maybe-class-name">Logo</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../components/logo.tsx&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Home</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useDeno</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token maybe-class-name">Deno</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">version</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">page</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Import</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">from</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">../style/index.less</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">logo</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Logo</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        Welcome to use </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Aleph.js</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">links</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://alephjs.org</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">target</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">_blank</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          Website</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">&amp;middot;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://alephjs.org/docs/get-started</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">target</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">_blank</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          Get Started</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">&amp;middot;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://alephjs.org/docs</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">target</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">_blank</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          Docs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">&amp;middot;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://github.com/alephjs/aleph.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">target</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">_blank</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          Github</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">counter</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Counter:</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">setCount</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">n</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> n </span><span class="token tag script language-javascript operator" style="color:#393A34">-</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript number" style="color:#36acaa">1</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">-</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">setCount</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript" style="color:#00009f">n</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> n </span><span class="token tag script language-javascript operator" style="color:#393A34">+</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript number" style="color:#36acaa">1</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">+</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">copyinfo</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Built by Aleph.js in Deno v</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">version</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">deno</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><a href="https://alephjs.org/docs/advanced-features/use-deno-hook" target="_blank" rel="noopener noreferrer"><code>useDeno</code></a>는 서버사이드에서만 실행가능</p><p>클라이언트에는 hydration 할 때 실행 결과 주입됨</p><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> post </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useDeno</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">https://.../post/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">params</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>구성</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── app.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── logo.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── import_map.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── index.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── favicon.ico</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── logo.svg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── style</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── index.less</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>새 routing 추가</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ code pages/foo.tsx</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://esm.sh/react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">page</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">foo</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>API Route 추가</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ code api/foo.tsx</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">APIRequest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://deno.land/x/aleph/types.ts&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">APIRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ok&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>request 객체에 send하는게 어색함</p><p>디플로이 방법 찾다가 재밌는 거 발견</p><ul><li><a href="https://alephjs.org/docs/deployment" target="_blank" rel="noopener noreferrer">Deployment - Aleph.js</a></li><li><a href="https://fleek.co/" target="_blank" rel="noopener noreferrer">Fleek: Build. Preview. Deploy. Scale.</a></li></ul><p>Vercel 외에 Fleek 호스팅 지원중</p><p>IPFS 베이스 호스팅임</p><p>문서를 보면 임의의 컨테이너를 업로드하는 느낌</p><ul><li>Build Command: deno run -A <a href="https://deno.land/x/aleph@v0.2.26/cli.ts" target="_blank" rel="noopener noreferrer">https://deno.land/x/aleph@v0.2.26/cli.ts</a> build</li><li>Docker Image Name: hayd/deno</li><li>Output Directory: dist (outputDir, you can override it in aleph.config.js)</li><li>Environment Variables: NO_COLOR (recommended)</li><li>APIs(Functions): not supported currently</li></ul><p>대신 지금은 어떤 것을 사용해도 aleph api routes는 작동 안 하는 듯</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="sapper">Sapper<a class="hash-link" href="#sapper" title="Direct link to heading">​</a></h3><p>svelte 기반 next계 프레임워크</p><p>svelte는 rollup 등을 개발한 Rich Harris가 개발한 것</p><p>Vue 스럽게 프리컴파일 시 최적화를 한다</p><p>런타임 한계까지 옅어진 프레임워크</p><p><a href="https://svelte.dev/" target="_blank" rel="noopener noreferrer">svelte</a></p><p><a href="https://sapper.svelte.dev/" target="_blank" rel="noopener noreferrer">sapper</a></p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── __sapper__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── build.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── 465898c830bb9d2c.jpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">slug</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">-5bc8f95f.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">slug</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.2922cc3a.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── about.2cf04b36.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── client-e118e612.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── client.0d1fad1f.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── index-39716d32.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── index-7ed37c94.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── index.4ca45b6e.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── index.cd2c953b.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── inject_styles.5607aec6.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   ├── sapper-dev-client.1e7a4a5e.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   └── shimport@2.0.4.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       │   └── server.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── service-worker.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── rollup.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── setupTypeScript.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── ambient.d.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── client.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── Nav.svelte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── routes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── _error.svelte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── _layout.svelte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── about.svelte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── blog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">slug</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.json.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">slug</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.svelte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── _posts.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── index.json.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   └── index.svelte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── index.svelte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── server.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── service-worker.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── template.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── static</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── favicon.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── global.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── logo-192.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── logo-512.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── manifest.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── yarn.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> directories, </span><span class="token number" style="color:#36acaa">41</span><span class="token plain"> files</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>src/routes/index.svelte</p><div class="codeBlockContainer_I0IT language-svelte theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-svelte codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import successkid from &#x27;images/successkid.jpg&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;style&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    h1, figure, p {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        text-align: center;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        margin: 0 auto;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    h1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        font-size: 2.8em;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        text-transform: uppercase;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        font-weight: 700;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        margin: 0 0 0.5em 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    figure {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        margin: 0 0 1em 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    img {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        width: 100%;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        max-width: 400px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        margin: 0 0 1em 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    p {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        margin: 1em auto;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @media (min-width: 480px) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        h1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            font-size: 4em;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/style&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;svelte:head&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;title&gt;Sapper project template&lt;/title&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/svelte:head&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;h1&gt;Great success!&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;figure&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;img alt=&quot;Success Kid&quot; src=&quot;{successkid}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;figcaption&gt;Have fun with Sapper!&lt;/figcaption&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/figure&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;p&gt;&lt;strong&gt;Try editing this file (src/routes/index.svelte) to test live reloading.&lt;/strong&gt;&lt;/p&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>&lt;svelte:head&gt;</code> 같이 커스텀 태그를 넣을 수 있는 듯</p><p><code>src/server.js</code>, <code>src/client.js</code>로 엔트리포인트 다루기 가능</p><p>src/server.js</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">sirv</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;sirv&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">polka</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;polka&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">compression</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;compression&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> sapper</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@sapper/server&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PORT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NODE_ENV</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dev </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NODE_ENV</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;development&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">polka</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// You can also use Express</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">compression</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">threshold</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sirv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;static&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> dev </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">middleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">PORT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;error&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>src/client.js</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> sapper</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@sapper/app&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">target</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">querySelector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;#sapper&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>sapper를 다루다보면 next.js보다 훨씬 편리하다 느껴</p><p><code>src/routes/items/[id([0-9]+)].svelte</code> 처럼 <a href="https://sapper.svelte.dev/docs#src_routes" target="_blank" rel="noopener noreferrer">Dynamic Routing 가능</a></p><p>next로 URL 패턴 분기할 때 있었으면 싶었던 기능</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="sveltekitsveltenext"><a href="https://svelte.dev/blog/whats-the-deal-with-sveltekit" target="_blank" rel="noopener noreferrer">SvelteKit(svelte@next)</a><a class="hash-link" href="#sveltekitsveltenext" title="Direct link to heading">​</a></h3><p>실은 위의 sapper은 개발 중지가 결정된 상태</p><p>sveltekit 프레임워크로 svelte 본체와 통합</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> init svelte@next sveltekit-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> sveltekit-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> dev --open</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>흥미로운 것은 2020/12/05 기준으로 작동 안함</p><p>글 쓰는 초기 시점에는 작동한 기분인데</p><p><code>@snowpack/plugin-svelte</code>가 없어서 더해보면 에러가 나옴</p><div class="codeBlockContainer_I0IT language-node theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-node codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Failed to init component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;Root&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: options.hydrate only works if the component was compiled with the `hydratable: true` option</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>SSR, Hydration 같은게 제대로 작동 안하는듯</p><p>sapper는 확실히 hydration에 문제를 안고 있기에 svelte 본체로 SSR 다시 만드는게 나을지도</p><p>작동은 안해도 구성은 이런 느낌</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package-lock.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── snowpack.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── app.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── Counter.svelte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── globals.d.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── routes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── index.svelte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── static</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── favicon.ico</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── robots.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── svelte.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── tsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── yarn.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> directories, </span><span class="token number" style="color:#36acaa">13</span><span class="token plain"> files</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>rollup 제작자인데도 <a href="https://www.snowpack.dev/" target="_blank" rel="noopener noreferrer">snowpack</a> 사용하는 것이 재밌음</p><p>어느걸 선택해도 native esm 베이스 설계이므로 상성은 좋아보임</p><p>routes/index.svelte를 보았지만 딱히 언급할 거리는 없음. 그냥 svelte component.</p><p>다른 흥미로운 점은 지금 svelte에는 <code>svelte.config.js</code>가 새로 생김</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sveltePreprocess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;svelte-preprocess&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Consult https://github.com/sveltejs/svelte-preprocess</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// for more information about preprocessors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">preprocess</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sveltePreprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// By default, `npm run build` will create a standard Node app.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// You can create optimized builds for different platforms by</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// specifying a different adapter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">adapter</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@sveltejs/adapter-node&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>@sveltejs/adapter-node</code>가 뭔지도 궁금.</p><p>앞으로 deno나 다른 처리(브라우저 같은)에서도 작동하는 것도 가능해보임</p><p>아직 개발 도중이므로 개발진척도에 따라 충분히 바뀔 듯</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="remix"><a href="https://remix.run/features" target="_blank" rel="noopener noreferrer">Remix</a><a class="hash-link" href="#remix" title="Direct link to heading">​</a></h3><p>지금까지 언급한 것과 궤를 달리하는데, react-router를 제작한 Michael Jackson, Ryan Florence가 시작한 풀스택 프레임워크 개발환경. 아직 출시상태 아님. 유료 지원 라이센스</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">///////////////////////////////////////////////////////////////////</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Server side loaders fetch data from anywhere</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> db </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;../db&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> params </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">users/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">params</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation property-access">userId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">https://api.github.com/users/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">user</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation property-access">githubLogin</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">///////////////////////////////////////////////////////////////////</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Data gets passed to your route component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">UserGithubProfile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> data </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Avatar</span><span class="token plain"> src</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">avatar_url</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>샘플 코드는 이뿐이므로 유료등록하지 않은 필자로써 실체를 알 수 없지만 blitz 같은 풀스택 프레임워크로 예상</p><p>개인적으로 react-router에 호되게 당한 적 밖에 없어 가까이 하기 싫으므로 누군가 대신해주면 좋겠음</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="flareact"><a href="https://github.com/flareact/flareact" target="_blank" rel="noopener noreferrer">Flareact</a><a class="hash-link" href="#flareact" title="Direct link to heading">​</a></h3><p>Next.js 영향을 받았음</p><p>Cloudflare Workers의 Edge Worker에서 작동하도록 설계된 것</p><p>Cloudflare Workers CLI 도구인 wrangler를 설치해서 셋업함.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> i @cloudflare/wrangler -g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ wrangler generate flareact-app https://github.com/flareact/flareact-template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> flareact-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> flareact@alpha typescript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> -D @types/react</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> @cloudflare/wrangler -D </span><span class="token comment" style="color:#999988;font-style:italic"># 문서에는 없었지만 필요했다. 경로의존?</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><blockquote><p><a href="https://flareact.com/docs/typescript" target="_blank" rel="noopener noreferrer">출처</a></p></blockquote><p>작동하려면 <a href="https://workers.cloudflare.com/" target="_blank" rel="noopener noreferrer">cloudflare workers 계정</a>이 필요해서 해보니 그럭저럭이며 무료서비스.</p><p>account_id를 wrangler.toml에 세팅.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> dev </span><span class="token comment" style="color:#999988;font-style:italic"># http://127.0.0.1:8787/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>동적 루트, edge 실행 테스트를 위해 <code>pages/xxx/[yyy]/[zzz].tsx</code> 추가 해봄</p><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getEdgeProps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> params </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      params</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    revalidate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Index</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      xxx/yyy/zzz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pre</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">pre</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>getEdgeProps()</code>는 next.js의 <code>getServerSideProps()</code>이며 Edge Worker로 실행되는 부분</p><p>next.js의 ISR 같이 60초 후 재검증가능</p><p><code>pages/api/hello.ts</code> API 루트도 추가해봄</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ok&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>cloudflare workers는 ServiceWorker의 API 틀이므로 요런 느낌.</p><p>pages/api/<!-- -->*<!-- -->.ts</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── dist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── worker.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── hello.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">yyy</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│           └── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">zzz</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.tsx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── tsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── script.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── wrangler.toml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── yarn.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> directories, </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"> files</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>flareact에 들어간 webpack으로 <code>dist/worker.js</code>, <code>out/_flareact/*</code>의 정적 에셋 나옴.</p><p>다른 Edge로 움직인다면 next.js를 AWS Lambda@Edge로 움직이는 <a href="https://github.com/serverless-nextjs/serverless-next.js" target="_blank" rel="noopener noreferrer">serverless-next</a>가 있음</p><p>개인적으로는 cloudflare workers를 권함. 이유는 <a href="https://blog.cloudflare.com/serverless-performance-comparison-workers-lambda/" target="_blank" rel="noopener noreferrer">벤치마크</a></p><p>이전에 다뤄볼 때에 비추어볼 때 기능이 늘어 놀람.</p><p>좋아보이므로 쓸만한 곳이 있으면 써보고 싶음</p><p>일단 flareact + prisma도 가능할 듯?</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="layr"><a href="https://github.com/layrjs/layr" target="_blank" rel="noopener noreferrer">layr</a><a class="hash-link" href="#layr" title="Direct link to heading">​</a></h3><p>RPC로 클라/서버에 하나의 모델를 조작하려는 라이브러리</p><p>어떤 의미로 isomorphism</p><p>시간이 없으므로 제대로 돌려보지 못했지만 <a href="https://github.com/layrjs/crud-example-app-ts-webpack" target="_blank" rel="noopener noreferrer">레포지토리가 흥미로움</a>.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Component</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> expose</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> validators </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@layr/component&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Storable</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> primaryIdentifier</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> attribute </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@layr/storable&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> notEmpty </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> validators</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">expose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  find</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> call</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prototype</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> call</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    save</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> call</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">delete</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> call</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Movie</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Storable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Component</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">expose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> get</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> set</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">primaryIdentifier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">expose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> get</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> set</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">attribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> validators</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">notEmpty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">expose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> get</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> set</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">attribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;number?&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> year</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">expose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> get</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> set</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">attribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> country </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>frontend/src/components/movie-list.tsx</p><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Component</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> attribute</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> consume </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@layr/component&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Routable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> route </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@layr/routable&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> view</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> useAsyncMemo </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@layr/react-integration&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Movie</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./movie&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Common</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./common&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">MovieList</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Routable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Component</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;constructor&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> </span><span class="token maybe-class-name">MovieList</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function" style="color:#d73a49">consume</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token maybe-class-name">Movie</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> </span><span class="token maybe-class-name">Movie</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function" style="color:#d73a49">consume</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token maybe-class-name">Common</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> </span><span class="token maybe-class-name">Common</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function" style="color:#d73a49">attribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Movie[]?&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> items</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">InstanceType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">ReturnType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> </span><span class="token maybe-class-name">Movie</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function" style="color:#d73a49">view</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Layout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> children </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> children</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token maybe-class-name">ReactNode</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h2</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Movies</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h2</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function" style="color:#d73a49">route</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/movies&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> aliases</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> @</span><span class="token function" style="color:#d73a49">view</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">movieList</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> loadingError</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> retryLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">useAsyncMemo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> movieList </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        movieList</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">items </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token maybe-class-name">Movie</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> year</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> sort</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> year</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;desc&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;asc&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> movieList</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">this.Common.LoadingMessage</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">loadingError </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> movieList </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">this.Common.ErrorMessage</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">message</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Sorry, something went wrong while loading the movies.</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">onRetry</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">retryLoading</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">this.Layout</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">movieList.Main</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">this.Layout</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function" style="color:#d73a49">view</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Movie</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">constructor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">items</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">movie</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">movie.ListItem</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">movie</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">id</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript maybe-class-name" style="color:#00009f">Movie</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript maybe-class-name" style="color:#00009f">Creator</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript function" style="color:#d73a49">navigate</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">New</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>계승 베이스 API는 개인적으로 좋아하지는 않지만 이 RPC화 발상은 흥미로움.</p><hr><h3 class="anchor anchorWithStickyNavbar_mojV" id="총평">총평<a class="hash-link" href="#총평" title="Direct link to heading">​</a></h3><p>현시점에는 frourio가 제일 사용하기 좋아 보였습니다.
UI층이랑 구분되어 있어서 장소 구분없이 투입가능하다 느꼈습니다.</p><p>다음은 blitz, 좋은 규약으로 만드면 frourio보다 좋아 진화의 여지가 있습니다. 현상은 랩한 부분이 하나로 다루기 어려워보입니다. 그렇기에 bsion 같이 카운터도 나오는 듯합니다. 우선 zod, react-final-form은</p><p>bison를 사용할 생각은 없어보이지만 hygen 코드 생성은 blitz generate 같이 규칙 기반 설계를 개별로 넣을 여지가 있으므로 hygen은 다루기 쉽게 하나로 하고 싶습니다.</p><p>ORM은 prisma 1강. 현시점에는 prisma migrate가 experimental이지만 그래도 아무튼 prisma 선택이 많습니다.</p><p>React UI Framwork는 Chakra 선택이 늘어나느 느낌입니다. Chakra는 Tailwind 영향을 받은 UI 프레임워크이며 tailwind가 점점 향상되면서 React 계 tailwind 선택이 늘어나고 있습니다.</p><p>flareact는 사용할 곳을 잘 고르면 좋게 사용 가능함. React로 Edge 에서만 다루는 체험을 실현하고 싶다면 이 프레임워크임. AWS 환경이라면 serverless-next도 가능할지도 모릅니다.</p><p>graphql 근처가 그다지 였지만 blitz, layr, aspida 같이 RPC화로 URL를 은닉하는 것이 많아지고 있습니다. 개인적으로 언어와는 별개로 TS와 조합하는 것이 GraphQL은 오버킬이라 느꼈으므로 풀스택이라면 이 노선은 반가운 뉴스입니다.</p><p>sveltekit, aleph는... 후발주자인 만큼 필요한 기능의 구현조차 잘 되어 있지 않은 인상 rollup, deno 선택에 도움되도록 힘냈으면 좋겠습니다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/next-js">Next.js</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/react">React</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/node-js">Node.js</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/blitz">blitz</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/frourio">frourio</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/fullstack">fullstack</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/번역">번역</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 2021년은 fullstack next.js 원년이므로, 유망한 next.js 계열 프레임워크를 전부 체험했다." href="/La-viva-es-Sueno/blog/2021-try-fullstack-nextjs"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/La-viva-es-Sueno/blog/image-csr-ssr-ssg-isr">도해 CSR, SSR, SG(SSG), ISR</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-04-08T00:00:00.000Z" itemprop="datePublished">April 8, 2022</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rewrite0w0" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">rewrite0w0</span></a></div><small class="avatar__subtitle" itemprop="description">JavaScript 개발자</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p><a href="https://zenn.dev/bitarts/articles/37260ddb28ae5d" target="_blank" rel="noopener noreferrer">글</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="server-side-application">Server Side Application<a class="hash-link" href="#server-side-application" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/6nu5zsouh7wjzvyj4ptrdbl1ld2m" alt="server side application" class="img_E7b_"></p><p>서버는 리퀘스트를 받으면 동적으로 HTML 문서를 생성, 반환합니다.</p><p>1993년에 CGI가 등장했을 때부터 기본적으로 같은 구조입니다.</p><p>지금도 중요한 아키텍처입니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ajax">Ajax<a class="hash-link" href="#ajax" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/4xz3tw2i65m9mi05o9q3ee9n4gxg" alt="Ajax" class="img_E7b_"></p><p>클리언트(브라우저)의 JavaScript에 서버에서 추가 데이터를 받아, DOM 조작으로 페이지 내용을 바꿀 수 있습니다.</p><p>페이지 transition 할 필요없이 컨텐츠를 바꿀 수 있는 방법입니다. 이 아키텍처가 등장하고 나서 Web 애플리케이션에서 실현할 수 있는 UI, 표현이 폭이 비약적으로 넓어졌습니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="csr-client-side-rendering">CSR (Client Side Rendering)<a class="hash-link" href="#csr-client-side-rendering" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/wxz7n1mb78uj1tq2e8p2z3gx5ztx" alt="CSR" class="img_E7b_"></p><p>Ajax와의 차이가 알기 어렵지만, 닮았다고 하면 닮았습니다.
특징으로는 처음 받는 HTML은 거의 비어있고, 페이지 전체를 JavaScript로 생성하는 점입니다.</p><p>페이지 transition 하는 것이 아니라, 페이지 전체를 갈아 끼우기에 인터랙션이 빠릅니다.</p><p>이렇게 만들어진 애플리케이션을 SPA라 합니다.</p><p>한 편, 처음 접속시에 큰 JS 코드를 읽고, 페이지 전체를 처리하기에 초기 로드가 무거워지기 십상입니다.</p><p>또 원시적인 크롤러에서는 컨텐츠를 얻지 못하는 경우도 있어서, SEO면에서는 별로입니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ssr-server-side-rendering">SSR (Server Side Rendering)<a class="hash-link" href="#ssr-server-side-rendering" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/phqr6ndc6bp1gj5nquv3fgwdo146" alt="SSR" class="img_E7b_"></p><p>CRS 단점(초기 단계 로딩, SEO 문제)을 해결하기 위해, 리퀘스트에 반응해 동적으로 HTML 문서를 반환하는 것이 SSR입니다.</p><p>...응? 그말인즉슨, 1번 돌리면 기존에 있던 서버 사이드 애플리케이션이랑 같은거 아닌가? 의문을 가질수 있습니다.</p><p>네, 거의 같습니다.</p><p>특징은 CSR에서 클라이언트 측과 같은 기술 스택 (JS, 가상 DOM 등)을 서버사이드에서 이용하는 것입니다.</p><p>Next.js 등 같은 프레임워크에는 같을 로직을 클라이언트 사이드, 서버사이드로 편하게 구분해서 사용할 수 있습니다.</p><p>단점은 역시 서버사이드의 무거움입니다.
특히 프론트에 구현과 같은 감각으로 API 통신 등을 하면 리스폰스에 시간이 걸립니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="sg-static-site-generation">SG (Static Site Generation)<a class="hash-link" href="#sg-static-site-generation" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/iucztcgwn37lbs8xus1b6x923us7" alt="SG" class="img_E7b_"></p><p>SSR는 리스폰스가 늦어서, 이를 해결하기 위해 사전에 정적인 HTML를 생성해두자.</p><p>이것이 SG입니다. (이전에는 SSG라 불렸습니다.)</p><p>...응? 이건 2번 돌려서 정적 HTML? 사이트 제네레이터나 MovableType 같은건가? 생각하실 수 있습니다만</p><p>예, 맞습니다.</p><p>이것의 특징은 CSR, SSR와 같은 스택으로 사용하는 점입니다. 대응하는 프레임워크를 이용하면 하나의 애플리케이션 안에서 CSR, SSR, SG를 적재절소에 사용할 수 있습니다.</p><p>SSG로 빌드할 때 HTML를 생성하므로, 배포가 빠르지만, 디플로이한 후에 페이지 내용을 동적으로 변경하는 것은 불가능합니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="isr-incremental-static-regeneration">ISR (Incremental Static Regeneration)<a class="hash-link" href="#isr-incremental-static-regeneration" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/wfy0mieh8x1j4ie0i6paf4kr1980" alt="ISR" class="img_E7b_"></p><p>SG은 빠르지만, 내용을 갱신할 수 없다.</p><p>ISR는 이것을 해결하기 위한 방법으로, SSR과 SG의 하이브리드라 볼 수 있습니다. SSR도 SSG도 기시감 있는 아키텍쳐이지만, ISR은 지금까지 본 적 없는 구조입니다.</p><p>ISR에는 SSR 같은 리퀘스트에 HTML를 생성하지만, 생성은 백그라운드에서 하면서, 이미 생성된 오래된 HTML를 반환합니다. 그렇기에 내용은 조금 오래된 것이라도 SSG과 비슷한 레벨로 빠르게 리스폰스됩니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="맺음말">맺음말<a class="hash-link" href="#맺음말" title="Direct link to heading">​</a></h2><p>ISR은 상당한 놈이지만, 최신 컨텐츠를 반환하는 것이 불가능하므로, 어떤 상황에서도 사용할 수 있다. 이런 놈이 아닙니다. Next.js를 사용하면 CSR, SSR, SG, ISR를 적재적소에 편히 구분해서 사용할 수 있습니다.</p><p>이것이 포인트라 생각합니다.</p><p>서버측에서도, 클라이언트측에서도 모두 단일 코드 베이스로 monolithic한 애플리케이션으로 개발을 할 수 있습니다. 이런 특징은 1인 개발으로 스톨스타트하는 경우 엄청난 속도를 이점으로 가져갈 수 있기에 유리하다 생각합니다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/next-js">Next.js</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/react">React</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/번역">번역</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 도해 CSR, SSR, SG(SSG), ISR" href="/La-viva-es-Sueno/blog/image-csr-ssr-ssg-isr"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/La-viva-es-Sueno/blog/think-about-personal-developement-architecture">개인개발 / 스타트업이 선택하면 좋을 최강의 아키텍처에 대한 생각</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-04-07T00:00:00.000Z" itemprop="datePublished">April 7, 2022</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rewrite0w0" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">rewrite0w0</span></a></div><small class="avatar__subtitle" itemprop="description">JavaScript 개발자</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p><a href="https://zenn.dev/yuno_miyako/articles/19201dcb19ff6b6ffc59" target="_blank" rel="noopener noreferrer">글</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="결론">결론<a class="hash-link" href="#결론" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/2v2eb15y29ueoa42tgz0x72vmlwx" alt="supa architecture" class="img_E7b_"></p><ul><li>Serverless Framework 사용.</li><li>프론트엔드는 S3 hosting + CloudFront, SSR도 Lambda@Edge로 가능.</li><li>DB는 RDS를 사용하지 말고, DynamoDB.</li><li>API는 기본적으로 GraphQL, 필요할 때 REST도 간단히 추가가능.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="배경-아키텍처에는-절대-정답이-없다">배경: 아키텍처에는 절대 정답이 없다<a class="hash-link" href="#배경-아키텍처에는-절대-정답이-없다" title="Direct link to heading">​</a></h2><p>아키텍처에는 절대 정답이 없다.
왜냐면 제품, 단계에 의해서 <strong>필요한 요건</strong>이 변하며, 그것을 고려해서 아키텍처를 생각할 필요가 있기 때문입니다.</p><p>예를 들어, 어떤 사건으로 1일 휴장했던 도쿄 증권 거래소 시스템은 <strong>안정성, 신뢰</strong>에 전력을 다해, 400대 서버에 부하 분산을 하거나, 네트워크 분산으로 장애 영향 범위를 국소화하는 아키텍처입니다.</p><p>AWS이나 メルカリ(mercari) 같은 기업은 <strong>확장성</strong>이 높고 이노베이션을 계속 일으킬 수 있도록 전체 애플리케이션에 영향을 끼치지 않고 새로운 서비스를 시도 가능한 마이크로 서비스 아키텍처를 사용중입니다.</p><p>그럼 개인개발, 스타트업은 어떤 요건을 중시해야할지 생각해봅시다.
<a href="https://www.idaten.vc/post/%E3%82%B9%E3%82%BF%E3%83%BC%E3%83%88%E3%82%A2%E3%83%83%E3%83%97%E3%81%8C%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B%E7%90%86%E7%94%B1%E3%83%88%E3%83%83%E3%83%9720" target="_blank" rel="noopener noreferrer">여기</a>에 스타트업이 실패하는 이유 순위가 있습니다.</p><p><strong><em>스타트업이 실패하는 이유 랭킹</em></strong></p><ol><li>시장 니즈가 없어서</li><li>자본 고갈</li><li>적절한 팀 구성 실패</li><li>경쟁력 패배</li><li>사용하기 어려운 제품</li></ol><p>전부 아키텍처 수준에서 해결 가능한 것은 아니지만, 어떤 요건이 필요한가 봅시다.</p><ol><li>시장 니즈가 없어서 =&gt; 고객의 기대에 맞춰 사양을 변화하기 좋은 <strong>민첩함</strong></li><li>자본 고갈 =&gt; <strong>비용 최적화</strong></li><li>적절한 팀 구성 실패 =&gt; 최대한 전문가가 필요로하지 않도록 <strong>작은 구성</strong></li><li>경쟁력 패배 =&gt; <strong>개발 속도</strong>를 올려 경합 상태 돌파</li><li>사용하기 어려운 제품 =&gt; 개선 사이클을 높이기 위한 <strong>민첩함</strong></li></ol><p>개인개발/스타트업에 필요한 요건은 <strong>민첩함, 비용 최적화, 작은 구성, 개발 속도</strong>가 아닐까 가설을 세웠습니다.
그럼 이 관점에서 기술 요소를 검토합시다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="기술요소">기술요소<a class="hash-link" href="#기술요소" title="Direct link to heading">​</a></h2><p>배경에서 개인개발과 스타트업에는 <strong>민첩함, 비용 최적화, 작은 구성, 개발 속도</strong>가 우수한 기술 요소를 선택해야 하지 않을까 검토했습니다.</p><p>이 관점에서 저는 우수하다 생각하는 기술요소를 소개하려합니다.
구성은 <code>프론트엔드</code>, <code>DB</code>, <code>백엔드(API)</code> 입니다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="프론트엔드">프론트엔드<a class="hash-link" href="#프론트엔드" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="프론트엔드-프레임워크-선정">프론트엔드 프레임워크 선정<a class="hash-link" href="#프론트엔드-프레임워크-선정" title="Direct link to heading">​</a></h4><p>프론트엔드는 React, Vue, Angular 3대 프레임이 있습니다.
<strong><code>개발속도</code>, <code>민첩함</code> 관점으로 보면, TypeScript로 타입을 붙이는 것이 필수라 생각합니다. 입력 보완을 혜택을 받으면서 어떤 데이터를 받고 넘기면 되는가 한 눈에 알기 쉽기에 개발효율을 올릴 수 면서, 사양변경이나 코드 변경할 때도 에러 체크를 컴파일할 때 알기 때문입니다.</strong>
<strong>그러니 TS와 상성이 좋다 관점에서 React</strong>가 군계일학이기에 프론트엔드 프레임워크는 <strong>React를 선택해야한다</strong> 생각합니다.</p><p>또한, <strong><code>개발속도</code>, <code>작은 구성</code> 관점에서는 저는 <code>React</code>보다 <code>Next.js</code> 사용하는 것을 추천</strong>합니다.
Next.js가 필요하지만 구현에 귀찮은 일을 <strong>No Config</strong>로 실현시켜주기 때문입니다. 구체적으로 말하면 루팅, SSR(SEO, SNG의 OGP를 위해서)입니다.
이상의 이유로 <strong>Next.js(TS)를 프레임워크로 추천</strong>합니다.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="프론트엔드-디플로이-할-곳">프론트엔드 디플로이 할 곳<a class="hash-link" href="#프론트엔드-디플로이-할-곳" title="Direct link to heading">​</a></h4><p>Next.js 디폴로이 할 곳으로 먼저 떠오르는 것이, vercel, Netlify, Heroku 등이 있습니다.
이들은 상당히 편하게 디플로이 가능하며, 기본무료로 이용할 수 있어 선택지에 들어가 있습니다.
하지만 무료에는 <strong>반드시 기능적 제한</strong>이 있기에, 규모가 있는 것을 전제한다면 AWS으로 구축하고 싶습니다.</p><p><strong>S3 hosting + CloudFront</strong>라면 AWS 무료 혜택으로 사용할 수 있고, 무료 혜택이 아니라더라 <strong>거의 무료</strong>입니다. (S3은 0.025USD/GB, CloudFront 0.114USD/10TB)</p><p>vercel 등의 서비스에서 유료 계정은 고정비가 들지만, AWS의 이 구성이면 onDemand한 과금이므로 <strong><code>비용 최적화</code> 관점에서 S3hosting + CloudFront를 추천합니다.</strong></p><p>프론트엔드 디플로이할 곳으로 EC2, ECS 등 서버를 사용하는 것은 <strong>민첩함, 비용 최적화, 작은 구성, 개발 속도</strong> 관점에서 논외라 생각합니다.</p><p>Next.js의 SSR은 Lambda@Edge로 행해지고 있습니다.
이 구성의 디플로이는 <strong>Serverless Framework</strong>를 사용함으로 No Config로 간단히 해결합니다.</p><p><a href="https://github.com/serverless-nextjs/serverless-next.js" target="_blank" rel="noopener noreferrer">serverless-nextjs</a></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="db">DB<a class="hash-link" href="#db" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="rds-vs-dynamodb">RDS vs DynamoDB<a class="hash-link" href="#rds-vs-dynamodb" title="Direct link to heading">​</a></h4><p>결론부터 말하면 <strong>무조건 DynamoDB를 선택하는 것을 추천</strong>합니다.
정확히 말하면 DynamoDB에서는 표현할 수 없는 자료구조, 복잡한 접근패턴이라면 RDS를 사용해야하지만, 초기 단계에는 DynamoDB로 만들다가 무리가 생기면 RDS와 병용하는 접근이 좋다 생각합니다.</p><p><strong><code>비용 최적화</code> 관점으로 말하면, Dynamo는 종량과금으로 되어있지만 RDS는 인스턴스 기동시간으로 과금됩니다. 또한 RDS + Lambda는 RDS Proxy 도입을 꼭 해야합니다. Aurora Serverless도 있지만, 이는 콜드 스타트가 치명적</strong>입니다.</p><p><strong><code>민첩함</code></strong> 관점에서는 Dynamo는 NoSQL이므로 스키마가 고정되어 있지 않아 사양 변경에 유연하게 대응할 수 있습니다. RDB는 테이블 간의 의존관계가 있기에 테이블을 버리기 어렵고, 마이그레이션이나 SQL로 다시 제작할 경우가 생깁니다.</p><p><strong><code>개발속도</code></strong> 관점에서는 Dynamo는 데이터베이스 기능 관리가 필요하지 않고, GraphQL과 상성이 좋음으로 개발효율을 올릴 수 있습니다.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="dynamodb-설계">DynamoDB 설계<a class="hash-link" href="#dynamodb-설계" title="Direct link to heading">​</a></h4><p>DynamoDB를 추천한다 했지만, <strong>RDB스럽게 DynamoDB를 설계하면 100% 벽에 막힙니다.</strong> Dynamo는 Join을 할 수 없으므로, Join이 필요하지 않게 테이블 설계를 할 필요가 있습니다.
RDB랑 NoSQL은 테이블 설계를 하는 방법이 전혀 다르므로, 여기에 반드시 초기 학습 비용을 들여야합니다.</p><p>추천링크를 붙이겠습니다.
<a href="https://pages.awscloud.com/rs/112-TZM-766/images/20190905_%E3%82%A4%E3%83%81%E3%81%8B%E3%82%89%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B%E3%82%B5%E3%83%BC%E3%83%8F%E3%82%99%E3%83%BC%E3%83%AC%E3%82%B9%E3%82%A2%E3%83%95%E3%82%9A%E3%83%AA%E9%96%8B%E7%99%BA-%E3%82%B5%E3%83%BC%E3%83%8F%E3%82%99%E3%83%BC%E3%83%AC%E3%82%B9%E3%82%A2%E3%83%95%E3%82%9A%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%90%91%E3%81%8D%E3%81%AEDB%20%E8%A8%AD%E8%A8%88%E3%83%98%E3%82%99%E3%82%B9%E3%83%88%E3%83%95%E3%82%9A%E3%83%A9%E3%82%AF%E3%83%86%E3%82%A3%E3%82%B9.pdf" target="_blank" rel="noopener noreferrer">서버레스 애플리케이션을 위한 DB 설계 모범사례</a>
<a href="https://dev.classmethod.jp/articles/reinvent-2019-report-cmy304-for-developer/" target="_blank" rel="noopener noreferrer">Amazon DynamoDB 데이터 모델링</a>
<a href="https://docs.aws.amazon.com/ko_kr/amazondynamodb/latest/developerguide/bp-general-nosql-design.html" target="_blank" rel="noopener noreferrer">DynamoDB를 위한 NoSQL 설계</a></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="백엔드api">백엔드(API)<a class="hash-link" href="#백엔드api" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="rest-vs-graphql">REST vs GraphQL<a class="hash-link" href="#rest-vs-graphql" title="Direct link to heading">​</a></h4><p><strong><code>민첩함</code>, <code>작은 구성</code>, <code>개발속도</code> 관점에서 GraphQL를 추천합니다.</strong></p><p>GraphQL은 지금까지 지니고 있었던 백엔드의 책무를 프론트엔드로 이양하는 측면이 있습니다.
그래서 UI 변경이 일어날 때마다 API 수정 할 필요가 없어져 <strong>민첩함이 상승합니다.</strong></p><p>또 Lambda로 REST API를 작성하면, 엔드포인트 수 만큼 Lambda를 만들어야합니다(이를 피하는 방법도 있긴 합니다.)만, GraphQL은 <strong>단일 엔드포인트이므로 <code>작은 구성</code>을 유지할 수 있습니다.</strong></p><p>GraphQL은 프론트엔드에서 이용할 때 사용하기 상당히 쉽고, 이는 체감이지만 REST보다 <strong>프론트엔드 개발 속도를 올려주는 기분입니다.</strong></p><p>그러나 REST가 더 우수하게 처리하는 것도 있습니다. 예를 들면 파일 업로드 등은 GraphQL로 하려하면, 상당히 공을 들여야합니다. 그럴 때는 REST 엔드포인트를 병용하면 됩니다. <strong>API Gateway</strong>를 사이에 두면, 같은 도메인으로 대응할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="디플로이에-대해">디플로이에 대해<a class="hash-link" href="#디플로이에-대해" title="Direct link to heading">​</a></h3><p>API Gateway + Lambda(GraphQL) + Lambda(REST) + DynamoDB 구성의 디플로이는 Serverless Framework를 사용하면 간단합니다.</p><p><a href="https://github.com/serverless/examples" target="_blank" rel="noopener noreferrer">여기</a>에 각 언어의 템플릿이 있으므로 찾아서, 디폴리이까지 해보시길 바랍니다. 간편함 놀랄 것이라 생각합니다.
여담으로 저는 <a href="https://github.com/serverless/serverless-graphql" target="_blank" rel="noopener noreferrer">이 템플릿</a>을 커스터마이즈해서 사용하기 쉽게 만들어 사용하고 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="인증인가에-대해">인증인가에 대해<a class="hash-link" href="#인증인가에-대해" title="Direct link to heading">​</a></h3><p>인증인가는 로그인 기능 등을 구현할 때는 <strong>Cognito</strong>를 활용합니다. 개발 속도를 의식하면, 스스로 구현하는게 빠를 때도 있지만, 보안에 관한 것이므로 매니지드 서비스를 쓰는 것이 별 탈없겠죠.
이것도 Serverless Framework에 추가 가능합니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="재결론">재결론<a class="hash-link" href="#재결론" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/2v2eb15y29ueoa42tgz0x72vmlwx" alt="recommend architecture for personal developer &amp; start up" class="img_E7b_"></p><p>이상을 정리하면 이러한 그림 구성이 됩니다.</p><ul><li>Serverless Framework 사용.</li><li>프론트엔드는 S3 hosting + CloudFront, SSR도 Lambda@Edge로 가능.</li><li>DB는 RDS를 사용하지 말고, DynamoDB.</li><li>API는 기본적으로 GraphQL, 필요할 때 REST도 간단히 추가가능.</li></ul><p>이게 포인트라 생각합니다.
개인개발 / 스타트업에 관련한 분이라면 참고가 될 것이라 생각합니다.</p><p>감사합니다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/architecture">architecture</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/personal-developement">personal developement</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/start-up">start up</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/번역">번역</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 개인개발 / 스타트업이 선택하면 좋을 최강의 아키텍처에 대한 생각" href="/La-viva-es-Sueno/blog/think-about-personal-developement-architecture"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/La-viva-es-Sueno/blog/keep-truth-acting">프로그래밍 미경험자가 3개월만에 외자 IT 엔지니어가 되서 연봉 2억에 달하는 로드맵</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-04-03T00:00:00.000Z" itemprop="datePublished">April 3, 2022</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rewrite0w0" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">rewrite0w0</span></a></div><small class="avatar__subtitle" itemprop="description">JavaScript 개발자</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p><a href="https://note.com/sakamoto_582/n/n539d6e54c203" target="_blank" rel="noopener noreferrer">글</a></p></blockquote><p>안녕하세요. 오늘은 드디어 여러분에게 숨겨왔던 프로그래밍 미경험자가 단 3개월만에 IT 엔지니어가 되서 무려 연봉 2억에 달하는 방법은</p><p>없습니다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/번역">번역</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 프로그래밍 미경험자가 3개월만에 외자 IT 엔지니어가 되서 연봉 2억에 달하는 로드맵" href="/La-viva-es-Sueno/blog/keep-truth-acting"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/La-viva-es-Sueno/blog/array-sum-array-is-weird">JS에서 [1, 2, 3]+[4, 5, 6]은 왜 &quot;1,2,34,5,6&quot;인가?</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-04-01T00:00:00.000Z" itemprop="datePublished">April 1, 2022</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rewrite0w0" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">rewrite0w0</span></a></div><small class="avatar__subtitle" itemprop="description">JavaScript 개발자</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p><a href="https://sosukesuzuki.dev/posts/array-plus-array/" target="_blank" rel="noopener noreferrer">글</a></p></blockquote><p>이런 트윗을 봤다.</p><blockquote><p>I have been writing Javascript since roughly 1997 but it still manages to occasionally do something that absolutely shocks me <a href="https://pic.twitter.com/JyYOo4wGOu" target="_blank" rel="noopener noreferrer">pic.twitter.com/JyYOo4wGOu</a> — mcc (@mcclure111) <a href="https://twitter.com/mcclure111/status/1481027678362902528?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">2022/01/11</a></p></blockquote><p>JavaScript에서 <code>[1, 2, 3] + [4, 5, 6]</code>은 <code>&quot;1,2,34,5,6&quot;</code>이며, 직관에 반하기에 나온 반응이었다.</p><p>필자도 직관에 반한다 느낀다.</p><p>하지만 이건 ECMAScript 사양을 착실히 수행한 것이다.</p><p>이글에서는 왜 이런 동작이 ECMAScript 사양에 따르는 것인지 사양을 인용하며 설명한다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="대략적-대답">대략적 대답<a class="hash-link" href="#대략적-대답" title="Direct link to heading">​</a></h2><p>우선 대략적으로 대답한다.</p><p>JavaScript에서 <code>[1, 2, 3] + [4, 5, 6]</code>가 <code>&quot;1,2,34,5,6&quot;</code>로 되는 이유는 피연산자 배열의 <code>Array.prototype.toString</code>을 호출해서 이를 문자열로 결합하기 때문이다.</p><p>하지만 이 설명만으로는 노잼이므로 사양을 보자.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="-연산자">+ 연산자<a class="hash-link" href="#-연산자" title="Direct link to heading">​</a></h2><p><code>+</code> 연산자 동작이 어떤 식으로 정해져있는가 보자.</p><p><code>+</code> 연산자는 <a href="https://tc39.es/ecma262/#sec-addition-operator-plus" target="_blank" rel="noopener noreferrer">The Addition Operator</a>에 정의되어 있다.</p><p>구문에 대해서는 다들 알 테니 글의 주제에 벗어나니 무시하고, 세멘틱을 보자. 여기에서 다음과 같은 세멘틱이 정의되어 있다.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">1. Return ? EvaluateStringOrNumericBinaryExpression(AdditiveExpression, +, MultiplicativeExpression).</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>AdditiveExpression</code>과 <code>MultiplicativeExpression</code>은 좌, 우측에 있다.</p><p>그리고 <code>+</code> 연산자는 <code>EvaluateStringOrNumericBinaryExpression</code>라는 Abstract Operation에 좌측 <code>+</code> 우측을 전달 이런 식으로 전달한다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="evaluatestringornumericbinaryexpression">EvaluateStringOrNumericBinaryExpression<a class="hash-link" href="#evaluatestringornumericbinaryexpression" title="Direct link to heading">​</a></h2><p><code>EvaluateStringOrNumericBinaryExpression</code>은 <a href="https://tc39.es/ecma262/#sec-evaluatestringornumericbinaryexpression" target="_blank" rel="noopener noreferrer">https://tc39.es/ecma262/#sec-evaluatestringornumericbinaryexpression</a>에 정의되어 있다.</p><p>Abstract Operation은 <code>leftOperand</code>, <code>opText</code>, <code>rightOperand</code> 인수를 받는다.
3개의 인수는 다음과 같이 동작한다</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">1. Let lref be the result of evaluating leftOperand.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Let lval be ? GetValue(lref).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Let rref be the result of evaluating rightOperand.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Let rval be ? GetValue(rref).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. Return ? ApplyStringOrNumericBinaryOperator(lval, opText, rval).</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>단계를 대충 설명한다.</p><p>먼저 <code>leftOperand</code>를 평가한 결과를 <code>lref</code>라 한다.</p><p><code>GetValue(lref)</code> 결과를 <code>lval</code>이라 한다.(<code>GetValue</code> <a href="https://tc39.es/ecma262/#sec-getvalue" target="_blank" rel="noopener noreferrer">정의</a> 이번 경우처럼 <code>[1, 2, 3]</code> 같이 단순한 배열을 넘기면 그대로 배열을 반환해준다 생각하면 좋다.)</p><p><code>leftOperand</code> 에서 한 처리를 <code>rightOperand</code>에서도 한다.</p><p>그러면 <code>lval</code>, <code>rval</code>를 얻는다</p><p>마지막으로 <code>ApplyStringOrNumericBinaryOperator</code> Abstract Operation에 <code>lval</code>이랑 인수로 받는 <code>opText</code>, <code>rval</code>를 전달하고 결과를 반환한다.</p><p><code>EvaluateStringOrNumericBinaryExpression</code>은 피연산자와 연산자를 인수로 받아, 비연산자를 평가해 <code>GetValue</code> 한 후에, 그대로 <code>ApplyStringOrNumericBinaryOperator</code>에 전달할 뿐인 Abstract Opertaion 한 것이다</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="applystringornumericbinaryoperator">ApplyStringOrNumericBinaryOperator<a class="hash-link" href="#applystringornumericbinaryoperator" title="Direct link to heading">​</a></h2><p><code>ApplyStringOrNumericBinaryOperator</code> <a href="https://tc39.es/ecma262/#sec-applystringornumericbinaryoperator" target="_blank" rel="noopener noreferrer">정의</a></p><p><code>ApplyStringOrNumbericBinaryOperator</code>은 <code>lval</code>, <code>opText</code>, <code>rval</code>를 받는다</p><p><code>ApplyStringOrNumbericBinaryOperator</code>의 단계를 전부 서술하기에는 공백이 부족하기에 관련되는 단계만 설명한다.</p><p>우선 첫 단계로 인수로 받은 <code>opText</code>의 validation 한다</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">1. Assert: opText is present in the table in step 7.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>7단계에 있는 표에 의하면 <code>opText</code>은 이하의 군이어야 한다.</p><ul><li><code>**</code></li><li><code>*</code></li><li><code>/</code></li><li><code>%</code></li><li><code>+</code></li><li><code>-</code></li><li><code>&lt;&lt;</code></li><li><code>&gt;&gt;</code></li><li><code>&gt;&gt;&gt;</code></li><li><code>&amp;</code></li><li><code>^</code></li><li><code>|</code></li></ul><p>그리고 <code>+</code>가 <code>opText</code>이다.</p><p>다음 단계는 <code>opText</code>가 <code>+</code>일 때 실행되는 것으로</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">2. If opText is +, then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a. Let lprim be ? ToPrimitive(lval).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b. Let rprim be ? ToPrimitive(rval).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c. If Type(lprim) is String or Type(rprim) is String, then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i. Let lstr be ? ToString(lprim).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ii. Let rstr be ? ToString(rprim).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        iii. Return the string-concatenation of lstr and rstr.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d. Set lval to lprim.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    e. Set rval to rprim.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>a</code>, <code>b</code>로 <code>lval</code>, <code>rval</code>을 각각 <code>ToPrimitve</code>에 전달해 결과를 <code>lprim</code>, <code>rprim</code>이라 한다.</p><p><code>c</code>에서는 <code>lprim</code>, <code>rprim</code>에서 어딘가 하나라도 <code>String</code>이면 남은 쪽도 <code>String</code>으로 변환해서 그것을 <code>lstr</code>, <code>rstr</code>이라 한다.
<strong>그리고 <code>lstr</code>, <code>rstr</code>을 문자열로 결합한 결과를 <code>ApplyStringOrNumericBinaryOperator</code> 전체 결과로 한다</strong></p><p>이 때 후속 <code>d</code>, <code>e</code>는 실행되지 않는다.</p><p>결론적으로 <code>[1, 2, 3] + [4, 5, 6]</code>은 <code>c</code> 단계가 실행되어 문자열 결합하는 <code>&quot;1,2,34,5,6</code>가 된다는 소리다.</p><p><code>c</code>가 실행되는 것은 <code>lprim</code>, <code>rpirm</code>이 적어도 하나가 <code>String</code>일 때 뿐이다.</p><p>그리고 <code>lprim</code>, <code>rprim</code>은 <code>ToPrimitive</code>에 의해 변환된 값이다.</p><p>즉, 배열에 <code>ToPrimitive</code> 결과가 <code>String</code>이므로 직관에 반하는 행동이 일어난다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="toprimitive">ToPrimitive<a class="hash-link" href="#toprimitive" title="Direct link to heading">​</a></h2><p><code>ToPrimitive</code> <a href="https://tc39.es/ecma262/#sec-toprimitive" target="_blank" rel="noopener noreferrer">정의</a></p><p><code>ToPrimitive</code>은 <code>input</code> 필수 인수와 <code>preferedType</code> 옵션 인수를 받는다</p><p><code>ToPrimitive</code>은 <code>input</code>이 Object 타입일 때 Object가 아닌 타입(primitive type)으로 변환하는 Abstract Operation이다.</p><p><code>ToPrimitive</code>의 절차는 이렇다</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">1. If Type(input) is Object, then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a. Let exoticToPrim be ? GetMethod(input, @@toPrimitive).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b. If exoticToPrim is not undefined, then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i. If preferredType is not present, let hint be &quot;default&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ii. Else if preferredType is string, let hint be &quot;string&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        iii. Else,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            1. Assert: preferredType is number.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            2. Let hint be &quot;number&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        iv. Let result be ? Call(exoticToPrim, input, « hint »).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        v. If Type(result) is not Object, return result.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vi. Throw a TypeError exception.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c. If preferredType is not present, let preferredType be number.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d. Return ? OrdinaryToPrimitive(input, preferredType).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Return input.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>1</code>은 <code>input</code>이 Object 타입일 때만 실행된다
(<code>input</code>이 Object 타입이아니라 때는 <code>2</code>로 직행해서 <code>input</code>를 반환한다)</p><p><code>1</code>의 <code>a</code>, <code>b</code>, <code>c</code>에 설명하면</p><p><code>a</code>는 <code>GetMethod</code>를 사용해 <code>input</code>의 <code>@@ToPrimitve</code>를 얻어 <code>exoticToPrim</code>이라 한다.</p><p>(<code>GetMethod</code> <a href="https://tc39.es/ecma262/#sec-getmethod" target="_blank" rel="noopener noreferrer">정의</a>, 이름처럼 객체에서 메소드를 받기 위한 Abstract Operation)</p><p><code>@@ToPrimitve</code>는 Well-know Symbols의 하나로 Object 타입값이 primitive으로 변환될 때 행동을 제어한다.</p><p>상세는 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toPrimitive" target="_blank" rel="noopener noreferrer">MDN</a> 참조</p><p>배열에는 기본적으로 <code>@@ToPrimitive</code>가 없으므로 이번에는 <code>exoticToPrim</code>은 <code>undefined</code>이다</p><p><code>b</code>는 <code>If exoticToPrim is not undefined, then</code> 조건 실행하고 <code>exoticToPrim</code>이 <code>undefined</code>라면 <code>b</code>는 넘어간다.</p><p><code>c</code>는 <code>preferedType</code>가 존재하지 않으면 <code>preferedType</code>를 <code>number</code>로 한다.</p><p>이번 <code>ToPrimitive</code>는 <code>ApplyStringOrNumbericBinaryOperator</code>에서 호출했지만, <code>preferedType</code>가 지정되어 있지 않아 <code>c</code>에 의해 <code>preferedType</code>은 <code>number</code>가 된다</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ordinarytoprimitive">OrdinaryToPrimitive<a class="hash-link" href="#ordinarytoprimitive" title="Direct link to heading">​</a></h2><p><code>OrdinaryToPrimitive</code> <a href="https://tc39.es/ecma262/#sec-ordinarytoprimitive" target="_blank" rel="noopener noreferrer">정의</a></p><p><code>OrdinaryToPrimitive</code>은 <code>O</code>과 <code>hint</code>를 받는다.</p><p><code>O</code>은 Object, <code>hint</code>는 <code>string</code>, <code>number</code>이다.</p><p><code>ToPrimitive</code>에서 전달된 <code>input</code>이 <code>O</code>, <code>preferedType</code>이 <code>hint</code>다</p><p><code>OrdinaryToPrimitive</code>의 다음 절차를 따른다</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">1. If hint is string, then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a. Let methodNames be « &quot;toString&quot;, &quot;valueOf&quot; ».</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Else,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a. Let methodNames be « &quot;valueOf&quot;, &quot;toString&quot; ».</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. For each element name of methodNames, do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a. Let method be ? Get(O, name).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b. If IsCallable(method) is true, then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i. Let result be ? Call(method, O).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ii. If Type(result) is not Object, return result.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Throw a TypeError exception.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>먼저 <code>1</code>, <code>2</code> 단계에 의해 <code>methodNames</code>이 결정된다.</p><p><code>hint</code>가 <code>string</code>이면 <code>methodNames</code>는 <code>&quot;toString&quot;, &quot;valueOf&quot;</code>가 된다.</p><p><code>number</code>면 <code>&quot;valueOf&quot;, &quot;toString&quot;</code>이 된다.</p><p>이번에는 <code>ToPrimitive</code> <code>1</code>의 <code>c</code>에 의해서 <code>preferedType</code>가 <code>number</code>가 되었으므로, <code>methodNames</code>는 <code>&quot;valueOf&quot;, &quot;toString&quot;</code>이 된다.</p><p><code>3</code> 단계에서는 <code>methodNames</code> 각 요소(이번에는 <code>valueOf</code>, <code>toString</code>)에 <code>a</code>, <code>b</code> 단계를 실행한다.</p><p>각 루프마다 <code>methodNames</code> 요소는 <code>name</code>으로 한다.</p><p><code>a</code>에서 <code>Get</code>를 사용해 <code>O</code>에서 <code>name</code>에 대한 메서드를 취득하고 <code>method</code>라 한다.(<code>Get</code> <a href="https://tc39.es/ecma262/#sec-get-o-p" target="_blank" rel="noopener noreferrer">정의</a>)</p><p><code>b</code>에서 <code>IsCallable</code>를 사용해 <code>method</code> 호출 가능을 확인한다(<code>IsCallable</code> <a href="https://tc39.es/ecma262/#sec-iscallable" target="_blank" rel="noopener noreferrer">정의</a>).</p><p>만약 호출가능하면 <code>method</code> 호출, 결과를 <code>result</code>라 한다.
결과가 Object형이 아니라면 <code>result</code>를 반환한다.</p><p><code>1</code>, <code>2</code>, <code>3</code> 단계를 실행해 아무 것도 반환할 것이 없으면 <code>4</code>로 <code>TypeError</code>를 던진다.</p><p><code>OrdinaryToPrimitive</code>를 JS로 간단히 표현하면 이렇게 된다. 의사코드로 봐달라.</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">OrdinaryToPrimitive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter constant" style="color:#36acaa">O</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> hint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> methodNames </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hint </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;toString&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;valueOf&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;valueOf&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;toString&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 3.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> name </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> methodNames</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// a.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> method </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">O</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// b.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function maybe-class-name" style="color:#d73a49">IsCallable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">method</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// i.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">method</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">O</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// ii.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;object&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 4.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token known-class-name class-name">TypeError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>이번에는 <code>methodNames</code>는 <code>&quot;valueOf&quot;, &quot;toString&quot;</code>이므로 순서대로 루프 실행한다.</p><p>첫 번째 루프에서 <code>Get</code>를 사용해 <code>O</code>(이번엔 배열)에서 <code>valueOf</code>를 받아 <code>method</code>로 한다. <code>method</code>에는 배열 <code>valueOf</code>가 담긴다.</p><p><code>IsCallable(method)</code>는 넘어간다.
하지만 배열 <code>valueOf</code>는 배열을 반환한다.</p><p>즉, 배열 <code>valueOf</code>는 객체 값을 반환한다.</p><p>그렇기에 <code>ii</code>의 <code>If Type(result) is not Object</code> 조건은 넘어가지 않는다. 값을 아무것도 반환하지 않으면 다음 루프로 진입한다.</p><p>두 번째 루프에서 <code>Get</code>를 사용해 <code>O</code>에서 <code>toString</code>를 받아 <code>method</code>라 한다.</p><p>배열에는 <code>toString</code>이 정의되어 있으므로, <code>method</code>는 그 배열을 <code>toString</code>한다.</p><p>이번 루프에서는 <code>method</code>에 배열 <code>toString</code>이 담기므로 <code>IsCallable(method)</code>는 <code>true</code>이다.</p><p>다음 <code>i</code>에서는 <code>method</code>를 호출한 결과를 <code>result</code>로 한다.</p><p>배열의 기본 <code>toString</code>은 <code>String</code>을 반환한다.
<code>String</code>은 객체가 아니므로, <code>If Type(result) is not Object</code> 조건을 넘어가서 <code>result</code>가 <code>OrdinaryToPrimitive</code> 값이 된다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="결국에-뭐지">결국에 뭐지?<a class="hash-link" href="#결국에-뭐지" title="Direct link to heading">​</a></h2><p><code>ApplyStringOrNumericBinaryOperator</code>를 떠올려보자.
<code>ApplyStringOrNumericBinaryOperator</code>에는 <code>ToPrimitive</code>에 의해 좌변, 우변을 Primitive화 한 값(<code>lprim</code>, <code>rprim</code>)이 <code>String</code>이라면 결합해서 반환했다.</p><p><code>ToPrimitive</code>는 배열을 <code>toString</code> 호출해서 반환한다는 소리다.</p><p>배열의 <code>toString</code> 동작은 간단하게 확인할 수 있다.(<a href="https://tc39.es/ecma262/#sec-array.prototype.tostring" target="_blank" rel="noopener noreferrer">정의</a>)</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> arrStr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arrStr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;1,2,3&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>단순하게 결합한 것이 <code>ApplyStringOrNumericBinaryOperator</code>이 되며, 그것을 <code>+</code> 연산 반환값이 된다.</p><p><code>[1, 2, 3] + [4, 5, 6]</code>은 <code>ToPrimitive([1, 2, 3])</code>이 <code>&quot;1, 2, 3&quot;</code>이 되며, <code>ToPrimitive([4, 5, 6])</code>은 <code>&quot;4, 5, 6&quot;</code>이 되므로 <code>ApplyStringOrNumericBinaryOperator</code>에 의해서 문자열 2개를 결합한 <code>+</code> 연산자 결과로 <code>&quot;1,2,34,5,6&quot;</code>이 된다는 소리다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="hack">hack<a class="hash-link" href="#hack" title="Direct link to heading">​</a></h2><p>그럼 이 사양이 보았으니, 뭔가 hack이 떠올랐을 것이다.</p><p>우선 <code>ToPrimtive</code>에 의해 <code>OrdinaryToPrimitive</code> 보다 먼저 실행되는 <code>@@ToPrimitive</code>를 덮어쓰면 동작은 변한다.</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> arr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token known-class-name class-name">Symbol</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">toPrimitive</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hello!!&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arr </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;hello!!4,5,6&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>또 배열이라면 <code>toString</code>보다 <code>valueOf</code>가 우선된다.
그러니 <code>valueOf</code>가 Object가 아닌 타입을 반환하도록 하려면</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> arr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">valueOf</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hello!!&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arr </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;hello!!4,5,6&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>혹은 <code>toString</code> 자체를 덮어쓰면 동작이 변한다.</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> arr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">toString</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hello!!&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arr </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;hello!!4,5,6&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="정리">정리<a class="hash-link" href="#정리" title="Direct link to heading">​</a></h2><p>The Addition Operator 사양은 다음과 같이 기술되어있다.</p><blockquote><p>Note: The addition operator either performs string concatenation or numeric addition.</p></blockquote><p><code>+</code> 연산자는 수치를 더하거나 문자열을 결합하는 연산자이다.</p><p>그래서 직관적이지 않은 행동을 피하기 위해서는 그것 이외의 용오로는 사용하지 않는 것이 좋다.</p><p>당연하지만 TS에서는 <code>[1, 2, 3] + [4, 5, 6]</code>은 컴파일러에서 에러가난다. TS를 쓰자</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/javascript">javascript</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/번역">번역</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about JS에서 [1, 2, 3]+[4, 5, 6]은 왜 &quot;1,2,34,5,6&quot;인가?" href="/La-viva-es-Sueno/blog/array-sum-array-is-weird"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/La-viva-es-Sueno/blog/imasara-react-v18">이제와서 알아보는 React v18</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-03-31T00:00:00.000Z" itemprop="datePublished">March 31, 2022</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rewrite0w0" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">rewrite0w0</span></a></div><small class="avatar__subtitle" itemprop="description">JavaScript 개발자</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p><a href="https://zenn.dev/reo777/articles/c0420a2bad2e6b" target="_blank" rel="noopener noreferrer">글</a></p></blockquote><p>React Conf 영상을 보며 사내 10분 공부회에서 공유한 자료입니다.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="react-conf">React Conf<a class="hash-link" href="#react-conf" title="Direct link to heading">​</a></h4><ul><li><a href="https://youtu.be/pj5N-Khihgc" target="_blank" rel="noopener noreferrer">Streaming Server Rendering with Suspense</a></li><li><a href="https://www.youtube.com/watch?v=ytudH8je5ko" target="_blank" rel="noopener noreferrer">React 18 for app developers</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="개인적-react-v18의-핵심">(개인적) React v18의 핵심<a class="hash-link" href="#개인적-react-v18의-핵심" title="Direct link to heading">​</a></h2><ul><li>Suspense</li><li>automatic batching</li><li>useDefferedValue hook</li><li>startTransition</li></ul><p>글에서는 React18보다 suspense 이야기가 주가 되겠네요</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="suspense에-의해-무엇이-변하는가">Suspense에 의해 무엇이 변하는가<a class="hash-link" href="#suspense에-의해-무엇이-변하는가" title="Direct link to heading">​</a></h2><ul><li><p>UX 측면</p><ul><li>유저에게 보여주는 화면을 <strong>단계적</strong>으로 화면 게시가능<ul><li>무거운 처리가 필요한 곳은 완료후 게시</li></ul></li></ul></li><li><p>코드 측면</p><ul><li>화면 요소만 JSX에 적을 수 있다<ul><li>isLoading&amp;&amp;<div></div> 같은게 필요없어진다</li></ul></li><li>Apollo, React Query와 조합하면 fetch on render와 fetch then render를 해소한다</li></ul></li></ul><p>fetch on render 코드</p><p>ref: <a href="https://ko.reactjs.org/docs/concurrent-mode-suspense.html#approach-1-fetch-on-render-not-using-suspense" target="_blank" rel="noopener noreferrer">https://ko.reactjs.org/docs/concurrent-mode-suspense.html#approach-1-fetch-on-render-not-using-suspense</a></p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ProfilePage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setUser</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fetchUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">u</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">u</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Loading profile...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">ProfileTimeline</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ProfileTimeline</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">posts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setPosts</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fetchPosts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setPosts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">posts </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h2</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Loading posts...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h2</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">posts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">post</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">id</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="suspense">suspense<a class="hash-link" href="#suspense" title="Direct link to heading">​</a></h2><ul><li>한 줄 요약: 컴포넌트가 Promise를 던질 수 있어서 UX 초상승</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="server-rendering-with-suspense">Server rendering With suspense<a class="hash-link" href="#server-rendering-with-suspense" title="Direct link to heading">​</a></h3><p><strong>SSR</strong></p><ul><li><p>무엇을 하는가</p><ul><li>데이터 취득</li><li>HTML 렌더링</li><li>JS 로딩</li><li>hydration (추후 설명)</li></ul></li><li><p>장단</p><ul><li>HTML 빨리 유저에게 보여줄 수 있어서 UX가 좋음</li><li>JS가 로드되지 않으므로 애플리케이션은 인터렉팅하지 않는다<ul><li>단순 HTML만 게시되므로</li></ul></li><li>애플리케이션 <strong>전체</strong> 데이터를 읽기까지 <strong>아무것도</strong> HTML이 게시되지 않음<ul><li>fetch everything, before you can show anything이라 한다</li></ul></li></ul></li></ul><hr><p><strong>CSR</strong></p><ul><li><p>무엇을 하는가</p><ul><li>클라이언트에서 화면 렌더링 한다</li></ul></li><li><p>장단</p><ul><li>기분좋게 돌아간다</li><li>JS 번들 크기가 커지면 초기 게시까지 시간이 걸림</li><li>무엇을 게시하기 전에 모든 걸 읽을 필요가 있음</li></ul></li></ul><p>=&gt; <strong>SSR, CSR 둘 다, 읽는데 애플리케이션 전체를 멈출 필요가 있었다</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="hydration">hydration<a class="hash-link" href="#hydration" title="Direct link to heading">​</a></h3><ul><li><p>HTML 인터렉티브하기 위한 것</p><ul><li>컴포넌트 트리를 조사해서 이벤트 번들러를 부여</li></ul></li><li><p>전체를 한 번에 hydrate 해야한다</p><ul><li>애플리케이션 전체 JS를 모두 읽을 필요가 있다 = 시간이 걸리는 일</li></ul></li><li><p>hydration 완료하기 전까지는 인터렉티브하지 않은 것을 유저에게 보이는 상태가 된다</p><ul><li>클릭해도 아무런 반응 없음</li></ul></li><li><p><strong>애플리케이션 전체</strong> hydration이 완료하기까지 애플리케이션 전체는 인터렉티브하지 않는다</p></li></ul><p><strong>React18에서는 분할해서 HTML를 보이며, 각각을 부분적으로 hydrate할 수 있다🎉</strong></p><p>=&gt; 이를 실현하는 것이 Streaming HTML</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/e4b204a04191-20220329.png" alt="streaming HTML image" class="img_E7b_"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="streaming-html">Streaming HTML<a class="hash-link" href="#streaming-html" title="Direct link to heading">​</a></h4><ul><li>데이터를 얻기까지 fallback 용 HTML를 렌더링해서, 데이터를 얻기가 완료되면 요소를 동적으로 갈아끼운다 =&gt; 이로인해서 화면 전체 데이터 취득을 갖을 필요가 없어짐<ul><li>fallback용 HTML = 로딩 스피너 등등</li><li>갈아끼울 요소 = 취득에 시간이 걸리는 요소<ul><li>이하 화면에서는 <code>&lt;Comments&gt;</code></li></ul></li></ul></li></ul><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/3fe60606af8f-20220329.png" alt="Streaming HTML example" class="img_E7b_"></p><p><strong>비동기적으로 hydrate하고 있어서, HTML를 빨리 보일 수 있고, 데이터를 얻기가 완료될 때부터 인터렉티브하게 할 수 있다</strong></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="구현">구현<a class="hash-link" href="#구현" title="Direct link to heading">​</a></h4><ul><li>Suspense로 감싸서 나중으로 미루는 처리를 전달<ul><li>이 뿐임</li><li>에러핸들링은 ErrorBoundary를 사용</li><li>try-catch 같은 느낌<blockquote><p>역주: 혹은 Maybe/Either</p></blockquote></li></ul></li></ul><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#00009f">Spinner</span><span class="token tag script language-javascript tag" style="color:#00009f"> </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Comments</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>이 코드는 이렇게 된다.</p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// This is not a Promise. It&#x27;s a special object from our Suspense integration.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resource </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchProfileData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ProfilePage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag" style="color:#00009f">h1</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&gt;</span><span class="token tag script language-javascript plain-text" style="color:#00009f">Loading profile...</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag script language-javascript tag" style="color:#00009f">h1</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">ProfileDetails</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag" style="color:#00009f">h1</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&gt;</span><span class="token tag script language-javascript plain-text" style="color:#00009f">Loading posts...</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag script language-javascript tag" style="color:#00009f">h1</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">ProfileTimeline</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ProfileDetails</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Try to read user info, although it might not have loaded yet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> resource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ProfileTimeline</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Try to read posts, although they might not have loaded yet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> posts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> resource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">posts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">posts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">li</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">post</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">id</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">li</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ul</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><blockquote><p>역주: 공식으로 react18이 출시되었으니 문서 참조 <a href="https://reactjs.org/docs/react-api.html#reactsuspense" target="_blank" rel="noopener noreferrer">https://reactjs.org/docs/react-api.html#reactsuspense</a></p></blockquote><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// This component is loaded dynamically</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> OtherComponent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lazy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./OtherComponent&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MyComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Displays &lt;Spinner&gt; until OtherComponent loads</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">React.Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#00009f">Spinner</span><span class="token tag script language-javascript tag" style="color:#00009f"> </span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">OtherComponent</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">React.Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>hydration이 완료된 곳부터 인터렉팅 가능</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/c19a1e40b511-20220329.png" alt="done hydration and interacting parts" class="img_E7b_"></p><ul><li><p>여러 Suspense로 wrap하면 비동기로 트리를 위에서부터 hydrate한다
<img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/c8548646bcd4-20220329.png" alt="async hydrate" class="img_E7b_"></p></li><li><p>Suspense는 여러 컴포넌트를 wrap 가능</p><ul><li>전체가 Suspend 함</li></ul></li><li><p>React는 유저의 관심순으로 hydration 한다 =&gt; Selective Hydration</p><ul><li>절대적으로 트리 상 순서로 hydrate 되는 것은 아님</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="selective-hydration">Selective Hydration<a class="hash-link" href="#selective-hydration" title="Direct link to heading">​</a></h4><ul><li>유저가 클릭한 부분부터 hydration 한다</li></ul><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/228b807c2191-20220329.png" alt="click and hydration" class="img_E7b_"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="automatic-batching">automatic batching<a class="hash-link" href="#automatic-batching" title="Direct link to heading">​</a></h4><ul><li>핸들러 안에 있는 setState의 실행 후 렌더링을 모아 한 번에 해주는 놈<ul><li>지금까지는 상태 갱신 함수마다 재 렌더링해줌</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="usedeferredvalue">useDeferredValue<a class="hash-link" href="#usedeferredvalue" title="Direct link to heading">​</a></h4><ul><li>겁나 무거운 처리를 명시적으로 뒤로 미루는 hook<ul><li>필터된 아이템 리스트 같은 놈</li></ul></li><li>React.memo를 사용하면 엄청 효율적<ul><li>memo되어도 부모 컴포넌트 렌더링될 때는</li></ul></li></ul><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> defferedValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useDeferredValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/*무거운처리*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="react-server-components">React Server Components<a class="hash-link" href="#react-server-components" title="Direct link to heading">​</a></h4><ul><li>컴포넌트를 서버사이드에서 렌더링한다<ul><li>state를 가지지 않는다, 재렌더링 하지 않는다<ul><li>useState, useEffect 같은 것을 사용하지 않는다</li></ul></li></ul></li><li><strong>번들 크기 0</strong><ul><li>렌더한 결과의 JSX를 클라이언트에 보낼 뿐 = 흔한 API 통신</li></ul></li><li>Suspense를 사용가능</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="ssr와-차이점">SSR와 차이점<a class="hash-link" href="#ssr와-차이점" title="Direct link to heading">​</a></h4><ul><li>SSR은 빠르게 화면을 유저에게 보여주는 것이 주 목적</li><li>RSC는 번들 크기를 감소 지키는 것이 주 목적</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="정리">정리<a class="hash-link" href="#정리" title="Direct link to heading">​</a></h2><ul><li>React 애플리케이션 UX와 React 개발자 체험에 엄청난 집중을 하고 있다.<ul><li>영상에서도 UX라 무지하게 말한다</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="참고자료">참고자료<a class="hash-link" href="#참고자료" title="Direct link to heading">​</a></h2><p><a href="https://github.com/reactjs/rfcs/pull/188" target="_blank" rel="noopener noreferrer">https://github.com/reactjs/rfcs/pull/188</a></p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/react">react</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/번역">번역</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 이제와서 알아보는 React v18" href="/La-viva-es-Sueno/blog/imasara-react-v18"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/La-viva-es-Sueno/blog/safe-react-hooks-policy">보수하기 쉬운 React Hooks 코드 방침</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-03-31T00:00:00.000Z" itemprop="datePublished">March 31, 2022</time> · <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rewrite0w0" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">rewrite0w0</span></a></div><small class="avatar__subtitle" itemprop="description">JavaScript 개발자</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p><a href="https://zenn.dev/haniwa_www/articles/8ebacbd8e24321" target="_blank" rel="noopener noreferrer">글</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="전제">전제<a class="hash-link" href="#전제" title="Direct link to heading">​</a></h2><p>이 글은 보수하기 쉬운 React Hooks 코드 방침에 대한 글임</p><p>방침은 tips에 가까운 것부터 원칙까지 잡다하게 있음</p><p>보수성 낮은 코드를 반면교사로 삼았고, 개인적 경험 기반임(생각날 때마다 추가할 수 있습니다.)</p><p>유념 부탁드립니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="해소하고-싶은-것">해소하고 싶은 것<a class="hash-link" href="#해소하고-싶은-것" title="Direct link to heading">​</a></h2><ul><li><strong>재현 곤란한 버그/에러 발생</strong></li><li><strong>쉽게 무한 루프 발생 제어</strong></li><li><strong>버그/에러 지점을 특정하는 수단</strong></li><li><strong>분기 많은 코드 리팩토링에는 수고가 든다</strong></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="해소하는-수법">해소하는 수법<a class="hash-link" href="#해소하는-수법" title="Direct link to heading">​</a></h2><ul><li><strong><code>useEffect</code>는 1페이지 1개</strong></li><li><strong><code>useEffect</code>에 deps 자동 조건부 제거 주석을 남긴다</strong></li><li><strong><code>state</code>는 원형으로 한다</strong></li><li><strong><code>props</code>에 플러그가 있다면 컴포넌트를 나눈다</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="useeffect는-1페이지-1개"><code>useEffect</code>는 1페이지 1개<a class="hash-link" href="#useeffect는-1페이지-1개" title="Direct link to heading">​</a></h3><p><strong>나쁜 예: 유저 이벤트 처리</strong></p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setFoo</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setFoo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;bar&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setFoo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;baz&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>간략화해서 알기 어려울 수 있지만, 실제에는 여러 <code>useEffect</code>가 공통으로 하는 <code>deps</code>가 있어, 처리가 동시 발화하는 경우가 발생했다. 그래서 <code>useEffect</code> 내에 비동기처리가 있고, 처리 타이밍에 의해 순서를 정했다
결국 어떤 <code>useEffect</code>가 최종적으로 state를 갱신하는가 알 수 없다
<strong>재현 곤란한 버그/에러 발생</strong>이 일어났다</p><p><strong>좋은 예: 유저 이벤트 처리</strong></p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setFoo</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">onClickBar</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setFoo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;bar&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">onClickBaz</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setFoo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;baz&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>useEffect</code>를 제거하고, 여러 처리가 동시에 발화되지 않도록 했다.</p><p>후술한 Web 애플리케이션 대부분의 경우에 <code>useEffect</code>가 필요없는 경우가 대부분이다.
<code>useEffect</code>를 1페이지에 1개하는 것이 현실적이라 보인다</p><p>브라우저에서 발생하는 이벤트는 다음과 같이 나뉜다</p><ul><li><p>페이지 트랜지션 이벤트
초기 렌더, 패스 트랜지션 등</p></li><li><p>유저 조작 이벤트
클릭, 탭 등</p></li><li><p>유저 조작을 제외한 <code>EventListner</code>계열 이벤트
네트워크 접속, 중단 이벤트 등</p></li><li><p>서버에서 오는 이벤트
Websocket, firebase 리얼타임 업데이트 등</p></li></ul><p>이 중 <code>useEffect</code>가 필요하지 않은 것은 유저 조작 이벤트 뿐.</p><p>많은 애플리케이션에서 페이지 트랜지션 이벤트, 유저 조작 이벤트 이외에는 잘 사용않는다(경험측).</p><p>사용하려해도 글로벌에서 이용하는 경우(예시: 네트워크 접속상태 감시) 혹은 1개의 컴포넌트에 관한 경우(예시: 통지유무게시)였다.</p><p>이래서 실제로 <code>useEffect</code>를 필요하는 것은 페이지 트랜지션 이벤트가 대부분이다. 그러니 1페이지에 1개를 쓰자</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="useeffect에-deps-자동보완-제거-주석을-남긴다"><code>useEffect</code>에 deps 자동보완 제거 주석을 남긴다<a class="hash-link" href="#useeffect에-deps-자동보완-제거-주석을-남긴다" title="Direct link to heading">​</a></h3><p><strong>나쁜 예: 로드 함수</strong></p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> useState </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> boolean </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setRes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> load </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">FooApi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setRes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">load</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>useEffect</code> 사용방법으로 렌더링할 때 로드 함수 발화가 있다. 이 경우의 대부분은 deps가 필요없다.
그러나 deps 조건부 기능쓰는 경우 <strong>쉽게 무한 루프 발생</strong>. 이걸 피하고 싶다</p><p><strong>좋은 예: 로드 함수</strong></p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> useState </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> boolean </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setRes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> load </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">FooApi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setRes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setIsLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// eslint-disable-next-line react-hooks/exhaustive-deps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>// eslint-disable-next-line react-hooks/exhaustive-deps</code>를 deps에 적용함으로 deps의 자동 조건부, 무한 루프를 예방한다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="state는-원형으로-한다"><code>state</code>는 원형으로 한다<a class="hash-link" href="#state는-원형으로-한다" title="Direct link to heading">​</a></h3><p><strong>나쁜 예: 객체 <code>state</code> 갱신</strong></p><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">fooObj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setFooObj</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">useState</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">{</span><span class="token generic-function generic class-name"></span><br></span><span class="token-line" style="color:#393A34"><span class="token generic-function generic class-name">    name</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">,</span><span class="token generic-function generic class-name"></span><br></span><span class="token-line" style="color:#393A34"><span class="token generic-function generic class-name">    familyName</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">,</span><span class="token generic-function generic class-name"></span><br></span><span class="token-line" style="color:#393A34"><span class="token generic-function generic class-name">    firstName</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">,</span><span class="token generic-function generic class-name"></span><br></span><span class="token-line" style="color:#393A34"><span class="token generic-function generic class-name"></span><span class="token generic-function generic class-name punctuation" style="color:#393A34">}</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    familyName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    firstName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> onUpdateFamilyName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newFamilyName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setFooObj</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">...</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> newFamilyName </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        familyName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> newFamilyName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> onUpdateFirstName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newFirstName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setFooObj</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">...</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">familyName </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> newFirstName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        firstName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> newFirstName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>간단한 예를 적다보니 예시에는 큰 데미지는 없다</p><p>그러나 실제 <code>fooObj</code>는 큰 객체인 경우가 많다.</p><p>API request, response 객체가 그대로 1개의 <code>state</code>에
몰아있는 경우가 많기 때문.</p><p>큰 객체를 <code>state</code>로 관리하면, 1개의 필드마다 <code>setState</code>를 늘리자.</p><p>버그가 발생한 <code>state</code> 조사는 갱신이 왕왕있는 부분을 조사한다.</p><p>이런 조사처를 필드 수만큼 늘린다</p><p>그리고 <code>setState</code>가 다른 컴포터는에 전달되다면 조사 수단을 더 늘린다</p><p>결과, <strong>버그 발생 지점 특정</strong>이 쉬워진다.</p><p><strong>좋은 예: 원형 <code>state</code> 갱신</strong></p><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setName</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">useState</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">familyName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setFamilyName</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">firstName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setFirstName</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> onUpdateFamilyName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newFamilyName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newFamilyName </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setFamilyName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newFamilyName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> onUpdateFirstName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newFirstName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">familyName </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> newFirstName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newFirstName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>버그가 발생한 <code>state</code> 조사는 그 <code>setState</code>를 따라가면 될 뿐이다.</p><p>큰 객체를 다루기보다 조사, 코드 리팩토링 수고를 절감할 수 있다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="props에-플러그가-있다면-컴포넌트를-나눈다"><code>props</code>에 플러그가 있다면 컴포넌트를 나눈다<a class="hash-link" href="#props에-플러그가-있다면-컴포넌트를-나눈다" title="Direct link to heading">​</a></h3><p><strong>나쁜 예: 작성/갱신이 같은 컴포넌트에 있다</strong></p><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">DialogContents</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FC</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">isAdd</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    isAdd</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> onSubmit </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isAdd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">FooRegisterApi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">FooUpdateApi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onSubmit</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">onSubmit</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Name</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                &lt;input value=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"> onChange=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onChangeName</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text">/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">ID</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                &lt;input disabled=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isAdd</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"> value=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"> onChange=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onChangeId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text">/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">isAdd </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Email</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">input value</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> onChange</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onChangeEmail</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">PhoneNumber</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">input value</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">phoneNumber</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> onChange</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onChangePhoneNumber</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>컴포넌트에 여러 책임이 있는 경우, 컴포넌트 도처에 쓸데없이 분기가 발생한다.</p><p>자주 보는 패턴은 작성과 갱신이 동시에 컴포넌트에서 일어나는 패턴</p><p>작성 / 갱신을 플러그로 분기해서 알맞은 API, 렌더링 항목을 제어한다.</p><p>이러면 <strong>분기가 많은 코드가 되서 읽기에 수고가 많이 든다</strong></p><p><strong>좋은 예: 작성/갱신 별 컴포넌트</strong></p><div class="codeBlockContainer_I0IT language-tsx theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-tsx codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">RegisterDialogContents</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function-variable function maybe-class-name" style="color:#d73a49">FC</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> onSubmit </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">FooRegisterApi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onSubmit</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">onSubmit</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Name</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                &lt;input value=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"> onChange=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onChangeName</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text">/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">ID</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                &lt;input value=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"> onChange=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onChangeId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text">/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Email</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                &lt;input value=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"> onChange=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onChangeEmail</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text">/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">PhoneNumber</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                &lt;input value=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">phoneNumber</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"> onChange=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onChangePhoneNumber</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text">/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">UpdateDialogContents</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function-variable function maybe-class-name" style="color:#d73a49">FC</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> onSubmit </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">FooUpdateApi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onSubmit</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">onSubmit</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Name</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                &lt;input value=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"> onChange=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onChangeName</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text">/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">ID</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">                &lt;input disabled=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"> value=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"> onChange=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onChangeId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text">/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>작성과 갱신은 구별해서 컴포넌트로 만들자.</p><p>도처의 분기를 제거해서 코드 읽기가 편해졌다</p><p>props에 <code>isFoo</code> 같은 플러그가 있다면, 컴포넌트 분리 검토를 권한다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/react">react</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/react-hooks">react hooks</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/maintenance">maintenance</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/번역">번역</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 보수하기 쉬운 React Hooks 코드 방침" href="/La-viva-es-Sueno/blog/safe-react-hooks-policy"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/La-viva-es-Sueno/blog/unit-test-no-susume">유닛테스트를 권함</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-03-31T00:00:00.000Z" itemprop="datePublished">March 31, 2022</time> · <!-- -->31 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rewrite0w0" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">rewrite0w0</span></a></div><small class="avatar__subtitle" itemprop="description">JavaScript 개발자</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p><a href="https://zenn.dev/suzuki_hoge/books/2020-12-small-unit-test-65625504e7be1532413f" target="_blank" rel="noopener noreferrer">글</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="큰-테스트의-비용과-위험">큰 테스트의 비용과 위험<a class="hash-link" href="#큰-테스트의-비용과-위험" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="들어가며">들어가며<a class="hash-link" href="#들어가며" title="Direct link to heading">​</a></h3><p>이 글에서 테스트의 크고 작음은 테스트 코드의 <strong>행수가 아니라</strong> 테스트에서 <strong>보증하는 내용</strong>을 뜻함</p><p>보증되는 내용이 큰 테스트는 일견 나쁜 것 같지 않지만, 이 챕터에는 3개의 관점에서 <strong>큰 테스트</strong>를 다시 보려한다.</p><p>예를 사용해서 이미지를 그리며 생각해보자</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="큰-테스트와-3개의-문제">큰 테스트와 3개의 문제<a class="hash-link" href="#큰-테스트와-3개의-문제" title="Direct link to heading">​</a></h3><p>모듈 A, B, C를 이용하는 기능을 이용하는 UseCase A가 있다.</p><p>UseCase와 모듈 각각 하나의 클래스로 상상하며 하나하나 색을 칠한 블록을 그렸다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--47hzll2N--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/1df1d9f9d1752f5dcb1dd575.jpeg%3Fsha%3D24e57e04748fb4232e8db3297cf7479a9cac87fa" alt="UseCase A" class="img_E7b_"></p><p>UseCase A 테스트 코드를 쓸 떄, <strong>발생하는 것 전부를 테스트해야지</strong>는 자연스러운 사고흐름이다.</p><p>그렇게 만드는 UseCase A 테스트 코드를 옅은 빨간색으로 이미지했다.</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/vrsy3nj8166yo2x8dv14njqjcax4" alt="UseCase A Test" class="img_E7b_"></p><p>1개의 블록에 4개의 블록, 결국 테스트 하나로 클래스 4개를 테스트한다.</p><p>커버리지면에서는 UseCase A, 모듈 A, B, C 모두 통과되므로 <strong>모두 보증</strong>된다</p><p>여러 개가 보증되므로 이게 <strong>큰 테스트</strong>이다.</p><p>이렇게 생각하며 만든 <strong>큰 테스트</strong>를 <strong>비용</strong>, <strong>실행시간</strong>, <strong>위험</strong> 관점에서 생각해보자.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="비용">비용<a class="hash-link" href="#비용" title="Direct link to heading">​</a></h3><p>시스템이 돌아가고, 사업도 지속되서 <strong>추가 사양</strong>을 해야된다.</p><p>거의 비슷한 처리지만 모듈 C가 아니라 모듈 D로 움직이는 UseCase B를 만들었다.</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/l2zbhxd5sl67ni49148zah5uiupi" alt="useCase B" class="img_E7b_"></p><p>비슷한 방식으로 테스트를 만들죠.</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/j8f3ejsem30iwmctfstemo81r0bo" alt="useCase B test" class="img_E7b_"></p><p>바로 눈치에 들어오는 건 UseCase A 테스트, UseCase B 테스트에서 <strong>보증하고 있는 범위 중복</strong>이다</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/9b311favsg4reiy1h2jzfhzsdmd2" alt="useCase A, B test" class="img_E7b_"></p><p>단순 계산 <strong>75% 테스트 코드가 중복입니다.</strong></p><p>쓴 코드의 75%가 쓸모없는 코드라는 <strong>무의미</strong>한 짓을 한거죠.</p><p>거기에 중복범위에 포함된 모듈 B에 변경이 발생하면 <strong>테스트를 2개나 고쳐야합니다.</strong></p><p>그러나 2개의 테스트 코드를 편집하고 보증하는 내용은 1개죠.</p><p>즉, <strong>앞으로 수정 비용은 2배</strong>가 되죠.</p><p><strong>이제 쓰는 테스트 코드의 50%는 무가치</strong>하다 말할 수도 있죠.</p><p>굉장하지 않나요</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="실행시간">실행시간<a class="hash-link" href="#실행시간" title="Direct link to heading">​</a></h3><p>중복된 내용으로 테스트를 늘리면 당연히 <strong>실행시간</strong>도 증가한다.</p><p>이미 UseCase A만 할 때보다 <strong>이미 2배 시간이 들죠</strong></p><p>실행시간이 긴 것만큼 <strong>실행하기 귀찮아</strong>지며, <strong>코드를 적는 심리적 부담감을 느낀다</strong></p><p>이 상태는 테스트 코드를 유지하지 못하므로 <strong>상당히 건전하지 못한</strong> 상태다.</p><p>무엇보다 편해지기 위해서 자동테스트에 시간을 할애하는 건 <strong>본말전도</strong>이다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="위험">위험<a class="hash-link" href="#위험" title="Direct link to heading">​</a></h3><p>&quot;<strong>큰 테스트</strong>로 발생하는 중복이 나쁜 건 알았다, 그럼 <strong>추가로 만든 모듈 D만 테스트하면?</strong>&quot;</p><p>이런 생각으로 테스트를 만들면?</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/zzxwnj2fk9nu5pj85jmtgghg5ag8" alt="UseCase A test &amp; module D test" class="img_E7b_"></p><p>이제 중복이 없어서 비용 문제는 없다</p><p>그런데 구조에 문제가 있다</p><p>예를 들어 처음 제공한 UseCase A에 사양 변경이 들어가 모듈 A는 사용하지 않기로 했다</p><p>편의상 UseCase A&#x27;으로 한다</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/kwp3bn1b3lrd72lrylfkd4m5bkmk" alt="UseCase A&#x27;" class="img_E7b_"></p><p>UseCase A를 수정한 사람은 호출하지 않는 모듈 A 테스트를 삭제했다.</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/868ibzlswbh02b9sy3xvzbi8jutl" alt="UseCase A&#x27; Test" class="img_E7b_"></p><p>그러나 <strong>UseCase A 테스트는 UseCase B 테스트도 겸하고 있었다</strong></p><p>이걸 잊고 지워버렸기에 <strong>UseCase B 에서 사용하고 있는 모듈 A 테스트</strong>가 사라져버렸다.</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/geiwdcx4mwpmz9ab8mmcc7vdd21v" alt="UseCase A&#x27; test &amp; module D test" class="img_E7b_"></p><p>이게 <strong>위험</strong>이다</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="당신의-제품은-어떠한-규모인가">당신의 제품은 어떠한 규모인가?<a class="hash-link" href="#당신의-제품은-어떠한-규모인가" title="Direct link to heading">​</a></h3><p>&quot;무슨 소리, <strong>나는 그런 실수를 하지 않아</strong>&quot; 생각했습니까?</p><p>그러면 제품 파일 수를 세봅시다.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">find</span><span class="token plain"> src/ -name </span><span class="token string" style="color:#e3116c">&#x27;*.java&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wc</span><span class="token plain"> -l</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>얼마나 되나요?</p><p>100? 500? 1000? 5000?</p><p>제품의 첫 first commit은 언제인가요?</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> log --reverse</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>commiter는 몇 명인가요?</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> log --pretty</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">format:</span><span class="token string" style="color:#e3116c">&quot;%an&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -u  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wc</span><span class="token plain"> -l</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>실 제품은 이런 예시와 비교할 수 없을 정도로 복잡하다.</p><p>결과는 다소 다를지라도, 결국 코드 전부를 파악하는 사람은 없기에 UseCase A 테스트와 UseCase B 관계를 파악하는 것은 <strong>무척 곤란하다</strong></p><p>애초에 &quot;눈치챈다&quot;, &quot;찾는다&quot; 이런 키워드가 필요하면 <strong>개선</strong>해야한다.</p><p><strong>그것도 비용과 위험</strong>이다.</p><p>둘 다 없어야 좋죠.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="정리">정리<a class="hash-link" href="#정리" title="Direct link to heading">​</a></h3><ul><li><strong>큰 테스트</strong>는 <strong>많은 비용, 큰 위험</strong></li><li>실제 제품에 &quot;주의해서 처리&quot;는 <strong>비현실적</strong></li></ul><hr><h2 class="anchor anchorWithStickyNavbar_mojV" id="작은-테스트-군群의-기본">작은 테스트 군(群)의 기본<a class="hash-link" href="#작은-테스트-군群의-기본" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="작게-더하는게-아니라-전부-자잘하게가-기본">작게 더하는게 아니라 전부 자잘하게가 기본<a class="hash-link" href="#작게-더하는게-아니라-전부-자잘하게가-기본" title="Direct link to heading">​</a></h3><p><strong>작은 테스트</strong>가 잘 동작하지 않았던 경우를 다시 보자.</p><p><img loading="lazy" src="https://storage.googleapis.com/zenn-user-upload/zzxwnj2fk9nu5pj85jmtgghg5ag8" alt="UseCase A test &amp; module D test" class="img_E7b_"></p><p>모듈D 테스트를 작게 만들어도 제대로 잘 돌아가지 않은 이유는 <strong>전부 자잘하게</strong>하지 않아서이다.</p><p>UseCase A를만든 시점에 모듈 A, B, C가 <strong>각각 단독으로 테스트되어있다</strong>를 이미지 그리자.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--AofqWmli--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/2ea9761111d3885142c93a5a.jpeg%3Fsha%3Db24f608efb7b773b378ec247f15a91834d746c27" alt="split Module A, B, C test on UseCase A" class="img_E7b_"></p><p>이렇게 되면 UseCase B를 만들 때는 모듈 D만 테스트를 추가하면 된다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--OiC20oPW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/7fc470ae8a6ae32dda2a9549.jpeg%3Fsha%3D489ff68f6e801d1dca08a900c97f6ab54fd6a505" alt="adding module D test on UseCase B" class="img_E7b_"></p><p>UseCase A를 UseCase A&#x27;로 만들 때도 A를 빼면 그만이다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--nFVKqEYa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/95328556e6c595bc8971a932.jpeg%3Fsha%3D84823c99e4c1204b89a728f1d771b16fb3879ffd" alt="remove module A test on UseCase A&#x27;" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="자잘하게-많이가-포인트">자잘하게 많이가 포인트<a class="hash-link" href="#자잘하게-많이가-포인트" title="Direct link to heading">​</a></h3><p>자잘하게 많이를 유지하기 위해서 <strong>1개 테스트로 1개의 모듈을 테스트</strong>하는 것이 핵심이다</p><p>모듈을 <strong>1개씩 늘리면</strong> 테스트도 <strong>1개 씩 늘린다</strong></p><p>그러면 어디선가 모듈을 호출하지 않아도 <strong>모듈 테스트는 사라지지 않는다</strong></p><p><strong>어떤 모듈을 다뤄도 이미 그건 테스트 완료</strong> 상태가 유지되므로 &quot;영향을 주는 클래스, 테스트를 찾는다&quot; 프로세스는 확실히 적어진다</p><p>반복하지만 <strong>잘게 많이</strong>가 포인트</p><p><strong>큰 테스트</strong>에 반하는 이것을 <strong>작은 테스트 군(群)</strong>이라 한다</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="비용-비교">비용 비교<a class="hash-link" href="#비용-비교" title="Direct link to heading">​</a></h3><p>여기까지 나온 <strong>큰 테스트</strong>, <strong>작은 테스트 군</strong> 패턴을 숫자로 <strong>비용</strong>비교해보자</p><p>예를 들어 상품 재고 참조와 플랜 제공 기간 확인을 처리한다 상정하자</p><p>모듈 A는 인수(item)으로 DB 참조, 결과를 로직 전개 후 true/false 반환</p><p>모듈 B는 인수(plan)으로 HTTP request을 발생시킴, 그 결과를 로직 전개 후 true/false 반환</p><p>UseCase A는 모듈 A, B 결과를 자신의 private 메서드(self.check)로 OK, NG를 내면, 모듈 C가 그것을 &quot;success&quot;, &quot;failure&quot;로 변환</p><p>UseCase B는 item1, 2, 3, 4가 있고, plan은 Plan X, Y, Z가 있다. self.check는 간단하게 둘 다 true 일 때 OK</p><p>이미지로 그리면...</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--Xc6mztyH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/87835a43f62d9b9b12fc38c6.jpeg%3Fsha%3D14eb3813783672b567d4bb7f8966b072a745b5fd" alt="example project UseCase A" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="큰-테스트로-해야하는-패턴">큰 테스트로 해야하는 패턴<a class="hash-link" href="#큰-테스트로-해야하는-패턴" title="Direct link to heading">​</a></h3><p><strong>큰 테스트</strong>는 앞 장에서 본 것처럼 하나의 블록으로 모든 걸 처리한다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--FitlZhxj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/55189774ea9089b376754b2b.jpeg%3Fsha%3D46d0e3aa92b14767f5b439ccaca7b35c4663d813" alt="UseCase A test" class="img_E7b_"></p><p>모든 모듈을 한 번에 테스트할 때, &quot;모듈 A는 item 1일 때 true 반환, 모듈 B는 Plan X일 때 true 반환하므로 self.check는 OK, 모듈 C가 &#x27;success&#x27;를 반환&quot;</p><p>이렇게 이어서 생각해야한다</p><p>이만큼의 패턴이 필요하죠</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--rdGtUQ8C--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/ec9df35ca49e7792aca4e8e0.jpeg%3Fsha%3D2362bbb4865e2346e8e331d761c90d53fe3c77d4" alt="UseCase A large test" class="img_E7b_"></p><p>4 ( item1 || item2 || item3 || item4 ) <!-- -->*<!-- --> 3 ( planX || planY || planZ ) = <strong>12 패턴</strong>이다</p><p><strong>테스트 코드 중복</strong>도 떠올려보자</p><p><code>1, X =&gt; OK</code> 랑 <code>1, Y =&gt; OK</code> 랑 <code>2, X =&gt; OK</code>을 확인해서, <code>1</code> 이랑 <code>2</code> 랑 <code>X</code> 랑 <code>Y</code> 에서 다 true가 나왔는데, <code>2, Y =&gt; OK</code> <strong>테스트에 가치가 있는가?</strong></p><p><code>2, Y =&gt; OK</code> 패턴은 <strong>이미 테스트된 것이 아닌가?</strong>
2가 true가 되면 <code>2, X</code>도 확인 된 것이며 Y도 같은 방식이다</p><p>이렇게 생각하면 <strong>반절정도는 무의미</strong>하다</p><p>쓸모없는 패턴은 지울까요?
이런 제거 방법은 앞 장에서 본 것처럼 순식간에 범위를 알기 어려워진다는 <strong>위험</strong>을 발생시킨다</p><p>또 사양이 바뀔 때, <strong>과거 의도적으로 지운 일부 케이스를 과부족하지 않게 정확히 복원하는 것은 거의 불가능</strong>합니다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="작은-테스트-군에서-해야하는-패턴">작은 테스트 군에서 해야하는 패턴<a class="hash-link" href="#작은-테스트-군에서-해야하는-패턴" title="Direct link to heading">​</a></h3><p>각 모듈에서 각 필요한 패턴을 준비할 뿐이므로</p><p>&quot;모듈 A, item 1 일 때 true, item 2 일 때는...&quot;</p><p>&quot;모듈 B는 plan X일 때...&quot;</p><p>고민을 <strong>분리할 수 있다</strong></p><p>해야할 일을 이미지로 보죠</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--tRWnonR6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/d956b815a09f5cae2c80c516.jpeg%3Fsha%3Dba19e70b8cde8c0e4703fcf92670f9299610242c" alt="unit test UseCase A" class="img_E7b_"></p><p>4 ( item1 || item2 || item3 || item4 ) + 3 ( planX || planY || planZ ) + 2 ( OK || NG ) = <strong>9 패턴</strong>이다</p><p>큰 차이는 없지만 <strong>작은 테스트 군</strong> 패턴이 더 <strong>적다</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="추가사양으로-증가-추세-비교">추가사양으로 증가 추세 비교<a class="hash-link" href="#추가사양으로-증가-추세-비교" title="Direct link to heading">​</a></h3><p>item에 item5가 plan에 planW가 추가되었다</p><p><strong>큰 테스트</strong>는 앞의 계산식에서 본 것처럼 5 <!-- -->*<!-- --> 4 = <strong>20 패턴</strong></p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--Hn-3ny9m--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/a7afa458633b947a205f3f70.jpeg%3Fsha%3D68e5beb28f4c6039eccf013a0bce665f6bd28034" alt="large test UseCase A" class="img_E7b_"></p><p>상품이 <strong>2개</strong> 늘었는데 <strong>8 패턴</strong>이 늘어났다</p><p>5, X =&gt; OK랑 W =&gt; NG 이외는 <strong>테스트를 이미 한 것이므로</strong> <strong>6 패턴의 쓸모없는</strong> 테스트 코드를 적어서 <strong>무의미한 코드가 75%</strong>이다</p><p>한 편 <strong>작은 테스트 군</strong>은 5 + 4 + 2 = <strong>11 패턴</strong></p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--Ny1YHKma--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/a0b789a9961b14921f00162c.jpeg%3Fsha%3D1ee7a906a407b4de2f4cd17d320092f9919997a1" alt="unit test UseCase A" class="img_E7b_"></p><p>상품이 <strong>2개</strong> 늘었고, 패턴도 <strong>2개</strong> 들었다.</p><p><strong>증가 추세가 전혀 다르다</strong></p><p>조금 시점을 바꿔 패턴 추가이 아니라 모듈 추가라면 어떨까?</p><p>계절에 따라 결과가 변화하는 모듈 E를 UseCase A에 넣는다면?</p><p><strong>큰 테스트</strong> 5 <em> 4 </em> 4 = <strong>80 패턴</strong>
<strong>작은 테스트 군</strong>은 5 + 4 + 2 + 4 = <strong>15 패턴</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="하지만-큰-테스트에-비교해서-테스트-범위는-감소한다">하지만 큰 테스트에 비교해서 테스트 범위는 감소한다<a class="hash-link" href="#하지만-큰-테스트에-비교해서-테스트-범위는-감소한다" title="Direct link to heading">​</a></h3><p>이게 거슬리는 분도 있을거라 생각한다. 그림으로 보면</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--taWvPGjb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/400f52e43a36f38444f3b026.jpeg%3Fsha%3Dcbab00fe8425cbc650b43b663986943d83057729" alt="still you didn&#x27;t test useCase A" class="img_E7b_"></p><p><strong>작은 테스트 군</strong>에서는 UseCase A가 <strong>아무런 테스트를 받지 않았잖아?</strong></p><p>&quot;모듈 A, B 에서 OK || NG를 만듬(self.check)&quot;와 &quot;그 결과를 모듈 C로 전달한다&quot;가 <strong>테스트되지 않았다</strong></p><p><strong>작은 테스트 군</strong>의 한계일까요?</p><p>당연히 아니죠, <strong>mock</strong>를 사용하자</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="정리-1">정리<a class="hash-link" href="#정리-1" title="Direct link to heading">​</a></h3><ul><li><strong>큰 테스트</strong>는 <strong>지수적 폭발</strong>이 일어나기 쉽다</li><li><strong>작은 테스트 군</strong>의 비법은 <strong>자잘하게 많이</strong></li><li>테스트 클래스 수가 많으면 많을 수록 패턴은 폭증한다</li></ul><p>다음 장에서는 <strong>mock</strong>으로 <strong>작은 테스트 군</strong>의 UseCase A 부분을 테스트한다</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="mock를-잘-활용한다">mock를 잘 활용한다<a class="hash-link" href="#mock를-잘-활용한다" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="mock">mock?<a class="hash-link" href="#mock" title="Direct link to heading">​</a></h3><p>테스트 구현할 떄, 테스트에 영향을주지 않도록 더미를 갈아끼우는 것</p><p>&quot;테스트 용 DB, 로컬 더미 API 호출&quot; 접속처를 바꾸는 것이 아니다</p><p>&quot;DB를 사용하는 것처럼 테스트할 때만 쓰는 코드&quot;로 생각하라</p><p>목 라이브러리는 어떤 언어에도 있으니 간단하고 좋은 걸 쓰거나 스스로 만들어도 된다. 여기서는 목 설명은 여기까지 하겠다</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="뭘-mock으로-하나">뭘 mock으로 하나<a class="hash-link" href="#뭘-mock으로-하나" title="Direct link to heading">​</a></h3><p>UseCase A를 테스트 할 때, 앞 장에서 테스트하지 안한 점이 있었다</p><blockquote><p>모듈 A, B 결과 OK || NG 작성 (self.check)와 결과를 모듈 C 전달</p></blockquote><p>반대로 그 이외에는 관심사가 아니다</p><p><strong>UseCase A를 테스트할 때는 DB도 HTTP API도 없어도 된다</strong></p><p>모듈 A, B, C 한 번에 <strong>목</strong>하자</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--CFd4-jzc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/c19a7a1b19a7cdb899ffb0ed.jpeg%3Fsha%3D7e3267da8c56248d0f60ab54d7585a50e2bbc8d3" alt="mock on module a, b, c" class="img_E7b_"></p><p>모듈 A <strong>작은 테스트</strong>는 있으니 모듈 A 패턴 테스트를 할 필요가 없다</p><p>구현에 포함되어있는 조건분기, DB도 <strong>전혀 신경 쓸 필요없다</strong></p><p>그러니 <strong>우선 Mock A는 1를 반환</strong>하자</p><p>이거만 하면 끝</p><p>모듈 B도 같다.
<strong>Mock B는 X를 반환하자</strong></p><p>모듈 C는 <strong>인수가 OK인지 확인한 후 &quot;success&quot; 반환 하자</strong></p><p>그럼 <strong>모듈C 목이</strong> &quot;UseCase A가 1, X, OK 만듦&quot;, &quot;그걸 모듈C로 전달&quot;을 <strong>테스트</strong>하자</p><p>물론 UseCase A 자체 반환 값은 &quot;success&quot;이다</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--WcL8Qt8q--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/5c61730db0bb7fead62d8852.jpeg%3Fsha%3D724e673a6c3fbb4aac8183cca7706a11a9a4a339" alt="mock on UseCase A Test" class="img_E7b_"></p><p>코드는 이런 느낌</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--76D4Ws-F--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/ebf6725f3849ced2f5612d42.jpeg%3Fsha%3D16fefe39c748637b121c5957c73b53a21c9ea7e2" alt="test on java" class="img_E7b_"></p><p>대신 더미 response가 아니므로 <strong>목 안에 assert가 있는 것이</strong> 포인트</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="테스트-크기-비용-확인">테스트 크기, 비용 확인<a class="hash-link" href="#테스트-크기-비용-확인" title="Direct link to heading">​</a></h3><p>이 테스트 코드는 조금 길어, 이해하기 어려울지도 모른다</p><p>그러나 <strong>보증하고 있는 건 많지 않다</strong></p><p>이것도 <strong>작은 테스트</strong>로 충분하다</p><p>가령 모듈A 더미 DB 설정, 모듈B 구현 조사가 필요로 하지 않다</p><p><strong>필요 최저한의 것만 해서이다</strong></p><p>또 <strong>비용</strong>도 패턴 증가 추세가 낮습니다</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--tRWnonR6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/d956b815a09f5cae2c80c516.jpeg%3Fsha%3Dba19e70b8cde8c0e4703fcf92670f9299610242c" alt="unit test UseCase A" class="img_E7b_"></p><p>앞 장에서 나온 5 + 4 + 2 = 11 패턴에 더해 <strong>4 패턴</strong>이면 된다</p><blockquote><p><code>1 + X</code>, <code>1 + Z</code>, <code>4 + X</code>, <code>4 + Z</code> 반환하면 충분하다. OK/NG는 2개의 값을 and르 받는 것이라서. 예시만큼의 복잡도라면 OK/NG 2개 패턴으로 충분할지도 모른다</p></blockquote><p><strong>큰 테스트</strong>는 5 <!-- -->*<!-- --> 4 = <strong>20 패턴</strong> 이었으니, 꽤 차이가 있고, 속도 차이도 크다.</p><blockquote><p><strong>작은 테스트 군</strong>은 5 DB 접속 + 4 Http request, <strong>큰 테스트</strong>는 20 DB 접속 + 20 Http request 4배차이</p></blockquote><p>만약 item이 8개, plan이 8개라면 어떻게 되겠는가</p><blockquote><p>단순 계산 <strong>작은 테스트 군</strong> 8 + 8 + 2 + 2 = <strong>22 패턴</strong> <strong>큰 테스트</strong>는 8 <!-- -->*<!-- --> 8 = <strong>64 패턴</strong>. 요점은 item, plan이 증가해도 UseCase A 테스트는 <strong>하나도 증가하지 않는다</strong>이다. 이게 관심사를 분리한 성과이다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_mojV" id="어째서-테스트할-때-구현을-다뤄야-좋은가">어째서 테스트할 때 구현을 다뤄야 좋은가<a class="hash-link" href="#어째서-테스트할-때-구현을-다뤄야-좋은가" title="Direct link to heading">​</a></h3><p>모듈A DB 접속을 하지 않고, 1를 반환하는 경우가 좋은건가 느낄수도 잇다</p><p>그러나 <strong>모듈A가 작은 테스트이므로 문제없다</strong></p><p>결과가 1이 되는 value를 넘긴 테스트, 2가 되는 value 테스트, 3...
보증되면 모듈 A은 <strong>안전한 테스트이다</strong></p><p>UseCase A 테스트가 관여하는 건 <strong>어떻게해야 1이 되는가</strong>가 아니라 <strong>1이 나오면 뭘하나</strong>이다</p><p>목으로 처리해도 <strong>보증된다</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="입구-출구-하나만이-포인트">입구, 출구 하나만이 포인트<a class="hash-link" href="#입구-출구-하나만이-포인트" title="Direct link to heading">​</a></h3><p>모듈 A, B, C를 다시 보자</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--0P8oEyVy--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/e7d9f9cf7393a35a64667f40.jpeg%3Fsha%3D6b4f8958f4c31168a6e91e47dd69b391b648c27b" alt="module test A, B, C" class="img_E7b_"></p><p>모듈 A 테스트는 <strong>인수를 받아(1), 값을 DB 참조해(2), 반환한다(3)</strong> 부분을 테스트하고 있다</p><p>이건 전부 <strong>모듈A의 직접 입출력</strong>부분이다</p><p>UseCase A는 어떤가</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--01K5qVm7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/d30c7605057ddaab9bfab9b6.jpeg%3Fsha%3Dd2f88b380c09d2b67ddf04ccfafa1c0e5ee16629" alt="UseCase A Test" class="img_E7b_"></p><p>여기는 <strong>인수를 받아(1), 그 값을 하위 모듈로 전달해서(2, 3), 결과를 다른 하위 모듈로 준 다음(4), 결과를 반환(5)</strong> 부분 테스트하므로 모듈 A의 DB 같이 <strong>층이 다른 곳은 신경쓰지 않는다</strong></p><p>이렇게 <strong>한층 씩</strong> 이어가면, 틈새없이 구성할 수 있다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--JPhJ1sKA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/d0955793750c83e90c94103c.jpeg%3Fsha%3D1c03bfb806d42bbc30bf4c4e7cc2ad3d64cbf134" alt="unit test UseCase A, Module A, B, C" class="img_E7b_"></p><p><strong>입구, 출구를 한 층만 테스트</strong>하자</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="정리-2">정리<a class="hash-link" href="#정리-2" title="Direct link to heading">​</a></h3><ul><li><strong>목</strong>은 테스트 할 때 쓰는 <strong>다른 구현</strong></li><li><strong>목</strong>은 자체가 assertion를 하는 것도 있다</li><li><strong>작은 테스트</strong>가 있는 모듈은 <strong>목하기 쉽다</strong></li><li><strong>입구, 출구 한층만 진짜</strong>로 한다</li><li><strong>한층 씩</strong> 테스트하면 <strong>빈틈없이</strong> 테스트 가능</li></ul><p>나머지는 부록에 있다</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="부록1-private-메서드를-테스트하고-싶어하는-병의-처방전">부록1: private 메서드를 테스트하고 싶어하는 병의 처방전<a class="hash-link" href="#부록1-private-메서드를-테스트하고-싶어하는-병의-처방전" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="private-메서드도-public-으로-해서-작은-테스트-군해야하는가">private 메서드도 public 으로 해서 작은 테스트 군해야하는가?<a class="hash-link" href="#private-메서드도-public-으로-해서-작은-테스트-군해야하는가" title="Direct link to heading">​</a></h3><p>예제를 봅시다</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">public function check_all(user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if !check_type(user)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return NG_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if !check_payment(user)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return NG_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if !check_age(user)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return NG_3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private function check_type(user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private function check_payment(user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private function check_age(user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>여기서는 public의 check_all과 private의 check_type, check_payment, check_age가 우리가 지금까지 본 UseCase A, 모듈 A, B, C와 <strong>닮아있죠</strong></p><p><strong>작은 테스트 군</strong>으로 만드려고 하면, private 메서드도 public으로 해서 테스트해야하나?는 생각이 머리를 스치기도 한다.</p><div class="codeBlockContainer_I0IT language-diff theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-diff codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49"> private function check_type(user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"> public function check_type(user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49"> private function check_payment(user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"> public function check_payment(user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49"> private function check_age(user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"> public function check_age(user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--q5Ze63a4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/ec37f9f9ee23e77faa61166f.jpeg%3Fsha%3D65e2549b36dcd03b25197e9ada492742a0e174f9" alt="example code modifying private =&gt; public" class="img_E7b_"></p><p>그러나 private 3메서드는 private로 두고, public의 check_all를 <strong>큰 테스트</strong>하는 게 좋다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--qqZbtxQi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/3117502f5cd8f2117141042b.jpeg%3Fsha%3Da60ca43951912cdfe7e71e0e80e4f67eb44d52df" alt="example code large test like" class="img_E7b_"></p><p>이는 테스트하는 <strong>최소단위</strong>에 의해 결정된다</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="테스트-대상의-최소단위를-정한다">테스트 대상의 최소단위를 정한다<a class="hash-link" href="#테스트-대상의-최소단위를-정한다" title="Direct link to heading">​</a></h3><p><strong>최소단위</strong>는 <strong>공개되어 있는 동작</strong>으로 생각하자</p><p>제공하는 건 <strong>구현이 아니라 기능</strong>이므로 보증은 그 단위로 하자</p><p>예를 들어 <code>java.util.ArrayList#add</code>라면 <code>ensureCapacityInternal</code> private 메서드가 메모리 범위에 문제가 없는가 확인해서, 부족하면 <code>glow</code> private 메서드로 메모리 확보하지만 <strong>add 할 때 뭘 어떻게 하는지 그 내부까지는 알 필요가</strong>없다.</p><p><strong>호출할 지, 안 할지 모르는 메서드같은건 아무래도 좋다</strong></p><p>제공하는 것은 <strong>실패없이 add 한다</strong>이므로</p><p>이걸 <strong>최소단위</strong>로 염두하고 테스트하자</p><p>앞에서 check_all 예시를 생각해보자</p><p>check_all만 public 이라면 check_all를 <strong>최소단위</strong>로 봐도 된다</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="최소단위는-불변이-아니다">최소단위는 불변이 아니다<a class="hash-link" href="#최소단위는-불변이-아니다" title="Direct link to heading">​</a></h3><p>상기의 check_payment는 재설계, 기능추가에 의해 공통화된 private 메서드에서 독립 모듈(Payment Module)이 될 수 있을 것이다</p><p>그때는 check_payment가 public인 <strong>또 하나의 제공하는 기능</strong>으로 격상되므로 <strong>최소단위</strong>가 된다.</p><p>이럴때 Payment Module 테스트를 작성하자</p><p><strong>최소단위를 승격, 격하되기도 하는</strong> 것이다</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="부록2-모듈은-무엇인가-실제-코드-예시">부록2: 모듈은 무엇인가 실제 코드 예시<a class="hash-link" href="#부록2-모듈은-무엇인가-실제-코드-예시" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="모듈이란-실제적으로-무엇인가">모듈이란 실제적으로 무엇인가?<a class="hash-link" href="#모듈이란-실제적으로-무엇인가" title="Direct link to heading">​</a></h3><p>1장 모두에 말한대로, 기본적으로 하나의 클래스로 보면 된다</p><p>단 하나의 클래스가 <strong>정말 하나의 클래스인가</strong> 아니면 <strong>여러 클래스를 사용하는 하나의 클래스인가</strong>는 신경쓰지 않는다</p><p>테스트할 때 관심사는 클래스는 <strong>한층 다룰 것</strong>이다</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="실제-코드-예시">실제 코드 예시<a class="hash-link" href="#실제-코드-예시" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="안내">안내<a class="hash-link" href="#안내" title="Direct link to heading">​</a></h4><p>적지만 정말로 돌아가는 코드를 올린다</p><p>scala인데, 사전 지식이 없어도 읽을 수 있다</p><p>의존 라이브러리는 <code>org.scalatest</code>의 <code>scalatest</code>, 목 라이브러리는 없다</p><p>목은 그냥 Dependency Injection(DI)으로 실현했다.</p><p>&quot;이런 구현은 이래야한다&quot;, &quot;scala스러움&quot;을 뿜는 부분은 배제했다.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="테스트-대상">테스트 대상<a class="hash-link" href="#테스트-대상" title="Direct link to heading">​</a></h4><p>어떠한 API가 있고, ItemChecker, UserChecker로 구성되어있다.</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">case class Api(itemChecker: ItemChecker, userChecker: UserChecker) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def check(item: String, age: Int, address: String): String = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!itemChecker.check(item))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;NG ITEM&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else if (!userChecker.check(age, address))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;NG USER&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;OK&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>이걸로 알 수 있는 구성은 이렇다</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--xFtYz0Jg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/b1e0fd1478cbf27838ef4770.jpeg%3Fsha%3Daefca589111c7e6d1ec7f46d19c5dd4f536fccca" alt="scala API" class="img_E7b_"></p><p>ItemChecker는 재고 체크한다</p><p>DB(로 보이는 HashMap)을 참조해서 수량이 충분한가 확인한다</p><p>DB 접근에 1초 정도 사용한다 치자</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">trait ItemChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def check(item: String): Boolean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case class ItemCheckerImpl() extends ItemChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  override def check(item: String): Boolean = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0 &lt; DB.findOr(item, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">object DB {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var stock: HashMap[String, Int] = HashMap.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def findOr(item: String, default: Int): Int = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Thread.sleep(1000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stock.getOrElse(item, default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>DB를 확인한다. 이것으로 상품 확인은 끝이다</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--tSbCvLlF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/680658e2698ff138d88577d6.jpeg%3Fsha%3D2d01680bab314edeeaf42d5b83a86609a1c52ae2" alt="item check db" class="img_E7b_"></p><p>UserChecker는 AgeChecker와 AddressChecker로 구성된다</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">trait UserChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def check(age: Int, address: String): Boolean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case class UserCheckerImpl(ageChecker: AgeChecker, addressChecker: AddressChecker) extends UserChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  override def check(age: Int, address: String): Boolean = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ageChecker.check(age) &amp;&amp; addressChecker.check(address)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>AgaChecker, AddressChecker는 DB 같은건 사용하지 않는다.</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">trait AgeChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def check(age: Int): Boolean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case class AgeCheckerImpl() extends AgeChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  override def check(age: Int): Boolean = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    20 &lt;= age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">trait AddressChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def check(address: String): Boolean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case class AddressCheckerImpl() extends AddressChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  override def check(address: String): Boolean = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address == &quot;tokyo&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>2개의 Checker를 확인하고 마무리 짓는다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--wBc-HwT---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/8d1e51a3234370005c7fb642.jpeg%3Fsha%3De27c57911e7b1c29bedb6d63bea0da652fc482cf" alt="UserChecker check AgeChecker, AddressChecker" class="img_E7b_"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="큰-테스트-예시">큰 테스트 예시<a class="hash-link" href="#큰-테스트-예시" title="Direct link to heading">​</a></h4><p>집요하다 느낄 수 있겠지만 <strong>큰 테스트</strong> 패턴 수를 확인해보자.</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class BigTest extends FunSuite {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test(&quot;test&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val api = Api(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ItemCheckerImpl(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      UserCheckerImpl(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AgeCheckerImpl(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AddressCheckerImpl()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap(&quot;iPhoneSE&quot; -&gt; 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 20, &quot;tokyo&quot;) == &quot;OK&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 20, &quot;tokyo&quot;) == &quot;NG ITEM&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap(&quot;iPhone8&quot; -&gt; 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 20, &quot;tokyo&quot;) == &quot;NG ITEM&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap(&quot;iPhoneSE&quot; -&gt; 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 19, &quot;tokyo&quot;) == &quot;NG USER&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap(&quot;iPhoneSE&quot; -&gt; 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 20, &quot;osaka&quot;) == &quot;NG USER&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 19, &quot;tokyo&quot;) == &quot;NG ITEM&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap(&quot;iPhone8&quot; -&gt; 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 19, &quot;tokyo&quot;) == &quot;NG ITEM&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 20, &quot;osaka&quot;) == &quot;NG ITEM&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap(&quot;iPhone8&quot; -&gt; 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 20, &quot;osaka&quot;) == &quot;NG ITEM&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap(&quot;iPhoneSE&quot; -&gt; 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 19, &quot;osaka&quot;) == &quot;NG USER&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 19, &quot;osaka&quot;) == &quot;NG ITEM&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap(&quot;iPhone8&quot; -&gt; 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(api.check(&quot;iPhoneSE&quot;, 19, &quot;osaka&quot;) == &quot;NG ITEM&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>여기가 DI하는 부분이다, 정말 구현을 주입했다.</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">val api = Api(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ItemCheckerImpl(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UserCheckerImpl(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AgeCheckerImpl(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AddressCheckerImpl()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>덕분에 한 번에 테스트되지만 어느 행이 어떤 값을 어떤 모듈에 재현한 패턴인지 <strong>알기 너무 어렵다</strong></p><p><strong>큰 테스트</strong>를 구현할 때는 모든 것을 감쌀 큰 테스트를 하나 만들어, 가장 겉의 인수가 <strong>선단(그림 상 아래)에서 말단(그림 상 위)</strong>로 전달되는 걸 생각하며 만들어야한다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--19rKPo34--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/bf15b5fee91318aff7fec829.jpeg%3Fsha%3Da69f6b645e296d8954ac310543c2e6a421ac4a03" alt="large test flow" class="img_E7b_"></p><p>테스트는 DB 접속이 12번 <strong>12초</strong> 이상 소비된다.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="작은-테스트-군">작은 테스트 군<a class="hash-link" href="#작은-테스트-군" title="Direct link to heading">​</a></h4><p><strong>작은 테스트 군</strong>은 <strong>큰 테스트</strong>와 반대로, 말단에서 잘게 잘게 테스트하며 올라간다</p><p>ItemChecker를 테스트해보자</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class ItemCheckerTest extends FunSuite {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test(&quot;test&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap(&quot;iPhoneSE&quot; -&gt; 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(ItemCheckerImpl().check(&quot;iPhoneSE&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap(&quot;iPhone8&quot; -&gt; 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(!ItemCheckerImpl().check(&quot;iPhoneSE&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DB.stock = HashMap.empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(!ItemCheckerImpl().check(&quot;iPhoneSE&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>테스트 하나 끝</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--L46dCcS8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/da6aaa45153bbf3e601de4f9.jpeg%3Fsha%3D69a6689c53ef67b2de7b28f862330bd46cd35ed0" alt="done ItemChecker test" class="img_E7b_"></p><p>나머지 2개의 말단 Checker도 테스트하자</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class AgeCheckerTest extends FunSuite {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test(&quot;item&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(AgeCheckerImpl().check(20))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(!AgeCheckerImpl().check(19))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class AddressCheckerTest extends FunSuite {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test(&quot;test&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(AddressCheckerImpl().check(&quot;tokyo&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(!AddressCheckerImpl().check(&quot;osaka&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>2개의 Checker를 테스트했으니 2개의 테스트가 완료되었다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--kD_6cyVE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/80c147c99bb3e8bc73e5c3ca.jpeg%3Fsha%3D2a601f461939340aa18c157e7253bc3b25fbd3be" alt="done test Agechecker, AddressChecker" class="img_E7b_"></p><p>다음은 UserChecker 테스트</p><p><strong>테스트를 마친 모듈은 mock화 해도 좋다</strong></p><p>여기서 mock은 라이브러리가 아니라 무명클래스로 Trait(=Interface)를 구현해서 return 시킨다</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class UserCheckerTest extends FunSuite {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test(&quot;test&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val age_ok = new AgeChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      override def check(age: Int): Boolean = return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val age_ng = new AgeChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      override def check(age: Int): Boolean = return false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val address_ok = new AddressChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      override def check(address: String): Boolean = return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val address_ng = new AddressChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      override def check(address: String): Boolean = return false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(UserCheckerImpl(age_ok, address_ok).check(20, &quot;tokyo&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(!UserCheckerImpl(age_ng, address_ok).check(19, &quot;tokyo&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(!UserCheckerImpl(age_ok, address_ng).check(20, &quot;osaka&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(!UserCheckerImpl(age_ng, address_ng).check(19, &quot;osaka&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>복잡해 보이지만, 에디터에서 <code>new</code>를 치면 95% 정도 자동으로 채워준다</p><p>등장하는 클래스 명이 많지만, 테스트한 것은</p><p>&quot;UserChecker를 사용한 2개의 Checker의 결과가 모두 true라면 최종적으로 true&quot;</p><p>이거 <strong>하나</strong>이다. 또 하나의 테스트가 끝났다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--nQmgOyKx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/d7d787cff28217d67ec64777.jpeg%3Fsha%3Db484f65007e6c8c16adfbccf87712ddb7ad48658" alt="done UserChecker test" class="img_E7b_"></p><p>마지막으로 API를 테스트한다</p><p><strong>테스트를 마친 모듈은 mock으로 치며</strong> 테스트한다</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class ApiTest extends FunSuite {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test(&quot;test&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val item_ok = new ItemChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      override def check(item: String): Boolean = return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val item_ng = new ItemChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      override def check(item: String): Boolean = return false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val user_ok = new UserChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      override def check(age: Int, address: String): Boolean = return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val user_ng = new UserChecker {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      override def check(age: Int, address: String): Boolean = return false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(Api(item_ok, user_ok).check(&quot;iPhoneSE&quot;, 20, &quot;tokyo&quot;) == &quot;OK&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(Api(item_ng, user_ok).check(&quot;iPhoneSE&quot;, 20, &quot;tokyo&quot;) == &quot;NG ITEM&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(Api(item_ok, user_ng).check(&quot;iPhoneSE&quot;, 20, &quot;tokyo&quot;) == &quot;NG USER&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(Api(item_ng, user_ng).check(&quot;iPhoneSE&quot;, 20, &quot;tokyo&quot;) == &quot;NG ITEM&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>API 하나가 테스트를 마쳤다</p><p>관심사는 <strong>한층</strong> 입출력이므로, 이 테스트에 DB, AgeChecker, AddressChecker는 <strong>등장하지 않는다</strong></p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--NIO32-Lm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/c33170bedea4880762446b2b.jpeg%3Fsha%3Da6302ac2f921c50b2eca626c3fd9a15cb7d597f1" alt="API test" class="img_E7b_"></p><p>지금까지 테스트한 것을 확인해보면 <strong>효율적으로 빈틈없이</strong> 테스트했다.</p><p><img loading="lazy" src="https://res.cloudinary.com/zenn/image/fetch/s--fqv1fuDI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_1200/https://storage.googleapis.com/zenn-user-upload/deployed-images/699983f906c8079b52e78492.jpeg%3Fsha%3Dc7f2bc10621c1e6e9f524b3341171c1dfef81ada" alt="done unit test" class="img_E7b_"></p><p>다섯 테스트의 실행 시간은 전부 합쳐 <strong>3초</strong>였다.</p><p>DB 접속이 ItemCheckTest에만 발생하지 않아서이다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="특별한-라이브러리는-필요없다">특별한 라이브러리는 필요없다<a class="hash-link" href="#특별한-라이브러리는-필요없다" title="Direct link to heading">​</a></h3><p>물론 제대로 된 걸 잘쓰면 강력한 테스트를 간단히 하지만, 그 또한 본질은 DI이다.</p><p>Interface와 new만 잘 쓰면 충분히 구사할 수 있는 테크닉이므로, 평소에 <strong>mock</strong>을 가까이 다루면서 설계가 하면 좋을거라 생각한다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/test">test</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/unit-test">unit test</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/번역">번역</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 유닛테스트를 권함" href="/La-viva-es-Sueno/blog/unit-test-no-susume"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/La-viva-es-Sueno/blog/you-can-define-and-design-project">요건정의 ~ 시스템 설계까지 할 수 있는 인재가 되는 글</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-03-31T00:00:00.000Z" itemprop="datePublished">March 31, 2022</time> · <!-- -->20 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rewrite0w0" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">rewrite0w0</span></a></div><small class="avatar__subtitle" itemprop="description">JavaScript 개발자</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p><a href="https://qiita.com/Saku731/items/741fcf0f40dd989ee4f8" target="_blank" rel="noopener noreferrer">글</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="첫-머리">첫 머리<a class="hash-link" href="#첫-머리" title="Direct link to heading">​</a></h2><p>프로그래밍을 공부하고, 이런 걸 느낀 경험은 없나요</p><p><strong>공부해도 제품을 못 만든다</strong>
<strong>애초에 개발은 어떻게하지?</strong>
<strong>요건정의가 뭐지?</strong></p><p>이런 고민을 해결하기 위해, 우선은 <strong>개발의 전체상</strong>을 이해합시다.</p><p>소프트웨어 개발 프로세스를 확인보죠</p><p>늘 공부하는 프로그래밍은 &quot;<strong>구현</strong>&quot; 부분에 해결하겠네요
즉, 프로그래밍 실력을 발휘하기 전에 <strong>4개의 벽이 있다는 거죠</strong></p><p><img loading="lazy" alt="you can design product" src="/La-viva-es-Sueno/assets/images/youcandesign01-dd3fd489e4c1309d018c815f80da4cf5.png" width="1650" height="549" class="img_E7b_"></p><p>그래서 이 글에서는 구현(프로그래밍)을 시작하기 전에 필요한 <strong>기획 ~ 설계</strong>에 대해 설명하려합니다.</p><p>특히 엔지니어가 이해해야 하는 <strong>요건정의</strong>, <strong>설계</strong>에 초점을 두고 있습니다.</p><p>또 개발 전체에 대한 <strong>구현(프로그래밍에 사용하는 시간은 전체의 20~30%라 합니다</strong>
<strong>반면 요건정의, 설계 등을 쓰는 것은 50%</strong> 사용합니다.</p><p>즉, <strong>요건정의, 설계가 되는 인재는 개발 프로젝트에 공헌도가 필연적으로 높다</strong>는 의미입니다</p><p>이 계기로 제대로 몸에 익혀 활약의 장을 넓힙시다.</p><p>본 글의 구성</p><ul><li>요건정의 필요성</li><li>요건정의를 결정하는 프로세스</li><li>요건정의에서 결정하는 사항</li><li>기본설계 제작방법</li><li>기본설계 그 넘어</li><li>정리</li></ul><p>@SNS에서 여러 정보를 발신하고 있습니다. 글이 마음에 드셨다면 <a href="https://twitter.com/digisaku710" target="_blank" rel="noopener noreferrer">twitter</a> 팔로우 해주시면 기쁠 것 같습니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="요건정의-필요성">요건정의 필요성<a class="hash-link" href="#요건정의-필요성" title="Direct link to heading">​</a></h2><h4 class="anchor anchorWithStickyNavbar_mojV" id="요건정의-목적">요건정의 목적<a class="hash-link" href="#요건정의-목적" title="Direct link to heading">​</a></h4><p>시스템 개발 안건에는 크게 2개 종류 관계자가 있습니다.</p><ul><li><strong>시스템을 &quot;만드는&quot; 사람(개발자)</strong></li><li><strong>시스템을 &quot;사용하는&quot; 사람(발주자)</strong></li></ul><p>바라는 시스템을 자신이 만든다면, 머리 안에 완성된
이미지가 문제없지만, &quot;발주자 =&gt; 개발자&quot; 이런 부탁 형태 발주한 경우가 많겠을 것입니다.</p><p>그 때, <strong>발주자 머리 안에 있는 이미지를 명확히</strong>하지 않으면 개발자는 무엇을 만들어야 좋을지 모릅니다.</p><p>그러기 위해 소통하는 것이 요건정의입니다.</p><p>일상적인 예시를 들어봅시다.
목이 말랐을 때 &quot;마실거 사줘!&quot; 이런 부탁하나요?</p><p>&quot;커피 사줘&quot; 이런식으로 더 구체적으로</p><p>&quot;<strong>저당 커피 뜨거운거 사줘, 캔 말고 페트병으로 된거로</strong>&quot;</p><p>이렇게 표현하지 않으면 생각한대로 커피를 사오지 않을지도 모릅니다.</p><p>시스템 개발도 같습니다</p><p>&quot;<strong>뭘 어떻게 만들어야 만족스럽나요?</strong></p><p>이를 명확히 합의하는 것이 요건정의 목적입니다.</p><p>즉,</p><p><strong>요건정의 = 납품시 &quot;이걸로 OK죠?&quot;라 구체적인 확인하는 사전 약속</strong></p><p>이런 의미입니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="요건정의를-결정하는-프로세스">요건정의를 결정하는 프로세스<a class="hash-link" href="#요건정의를-결정하는-프로세스" title="Direct link to heading">​</a></h2><p>요건정의 목적을 알았다면, 요건정의가 완성하기까지 3단계를 이해합시다</p><ul><li><strong>요망</strong>: &quot;이런 시스템이 있으면 좋겠다&quot; 아이디어</li><li><strong>요구</strong>: 시스템에 구현하고 싶은 &quot;대략적 기능 목록&quot;</li><li><strong>요건</strong>: 쌍방이 합의한 <strong>구체적인 기능 목록</strong>이랑 <strong>구현방법</strong></li></ul><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2F6b94649d-2cf3-ac22-83ab-c6923a7a025b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4e360b0689448de9d87074e03df2ce8a" alt="요망, 요구, 요건의 차이" class="img_E7b_"></p><p>이 3단계의 과정에는 &quot;<strong>검토</strong>&quot;, &quot;<strong>제안</strong>&quot;를 통한 커뮤니케이션이 필요하다.</p><p>순서대로 정리하면 이런 모양입니다.</p><ol><li><p><strong>요망: 해결해야할 과제 (발주자 과제)</strong></p><ul><li>현재 과제</li><li>골 (최종적인 상태)</li><li>현재과 골 (해결해야할 과제)</li></ul></li><li><p><strong>요구: 시스템에 구현하고 싶은 기능 (발주자 과제)</strong></p><ul><li>기획의 배경 (해결해야할 과제)</li><li>과제해결에 필요한 시스템 개요</li><li>구체적으로 구현하고 싶은 기능 목록</li></ul></li><li><p><strong>검토: 요구 실현성을 생각한다 (개발자 과제)</strong></p><ul><li>기술적으로 가능한가?</li><li>예산은 어느 정도인가?</li><li>납기는 언제까지인가?</li></ul></li><li><p><strong>제안: 검토한 결과를 발주자에게 제안 (개발자 과제)</strong></p><ul><li>구현할 수 있는 기능</li><li>청구 금액</li><li>납품하는 기일</li></ul></li><li><p><strong>요건: 쌍방이 합의한 결정사항 (발주자 / 개발자 협력으로 결정)</strong></p><ul><li>시스템에 구현하는 기능 목록</li><li>납기, 청구액 상세히 기술할 필요도 있습니다.</li></ul></li></ol><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2F098c9c26-e5b2-c3cb-e29a-d47f003e93d5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f4721f45f820a67cd930367cb66b3ff2" alt="요건정의 기본적 흐름" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="요건정의로-결정하는-사항">요건정의로 결정하는 사항<a class="hash-link" href="#요건정의로-결정하는-사항" title="Direct link to heading">​</a></h2><p>흐름을 알았으니, 여기까지 요건정의로 결정할 사항을 대략적 정리를 하겠습니다.</p><p>3W (Why / What / How)로 정리하는 것이 깔끔합니다.</p><ul><li><strong>Why: 시스템개발의 목적 (요망)</strong><ul><li>현재 과제</li><li>골 (최종적인 상태)</li><li>현재과 골 (해결해야할 과제)</li></ul></li><li><strong>What: 어떤 식으로 과제 해결하는가</strong><ul><li>시스템 도입 후 업무 흐름</li><li>기능요건<ul><li>시스템에 구현하는 기능 목록</li></ul></li><li>비기능요건<ul><li>처리 스피드, 보안 등등</li></ul></li></ul></li><li><strong>How: 구체적으로 사용하는 수단과 구현방법 (시스템 설계에 가까운 업무)</strong><ul><li>기본설계<ul><li>화면설계 (UI설계)</li><li>기능설계</li><li>데이터 설계</li></ul></li><li>상세설계<ul><li>클래스 관계도, 시퀀스 관계도</li><li>시스템 아키텍처</li><li>각 부위를 구현하는 기술 등등</li></ul></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="기본설계화면설계-기능설계-데이터-설계의-작성방법">기본설계(화면설계, 기능설계, 데이터 설계)의 작성방법<a class="hash-link" href="#기본설계화면설계-기능설계-데이터-설계의-작성방법" title="Direct link to heading">​</a></h2><p>요건정의에서 결정된 사항이 많을 것이라 생각하실 수도 있지만 안심해주세요.</p><p>What (업무 흐름이나 기능요건, 비기능요건)은 엔지니어가 아닐가, 개발 중에도 &quot;<strong>영업맨</strong>&quot;, &quot;<strong>세일즈 엔지니어</strong>&quot; 대응해주는게 보통입니다.</p><p>그러니 <strong>엔지니어인 여러분은 능력을 발휘하는 HOW(설계)에 대해 깊게 연구할 수 있습니다.</strong></p><p><strong>그중에서도 특히 기본설계는 키를 쥐고있습니다.</strong></p><p>이글에서는 거기에 집중합니다.</p><p>전술했던데로 기본설계에는 &quot;<strong>화면, 기능, 데이터</strong>&quot;를 설계합니다.</p><p>이를 모았으니 이제 프로그래머가 소프트웨어 개발에 착수할 수 있습니다.</p><ul><li><p>화면설계 (UI설계)</p><ul><li>각 화면에 뭘 할 수 있는가?</li><li>게시하는 정보(문자, 이미지 등), 레이아웃</li><li>상기한 것을 화면 transition 관계도로 정리</li></ul></li><li><p>기능설계</p><ul><li>뒤에서 처리 (기능명, 처리내용)</li><li>처리에 필요한 데이터, 데이터 취득처 (화면에서 입력, DB에서 취득 등)</li><li>취득 한 데이터 전달처 (화면게시, DB 보존 등)</li></ul></li><li><p>데이터 설계</p><ul><li>데이터의 구체적인 내용</li><li>데이터베이스 설계</li><li>데이터 흐름 (데이터 플로우)</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="화면설계-ui설계">화면설계 (UI설계)<a class="hash-link" href="#화면설계-ui설계" title="Direct link to heading">​</a></h2><p>우선 무엇보다 먼저 해야할 요소는 <strong>화면설계 (UI 설계)</strong>입니다.</p><p>유저는 화면(UI)을 통해 소프트웨어를 이용하므로, 먼저 &quot;<strong>화면의 사용하기 쉬움</strong>&quot;에 동의를 얻는 일이 프로젝트 성공의 지름길입니다.</p><p>화면설계에는 이런 항목을 결정합니다.</p><ul><li>각 화면에 뭘 할 수 있는가?</li><li>게시하는 정보(문자, 이미지 등), 레이아웃</li><li>상기한 것을 화면 transition 관계도로 정리</li></ul><p><img loading="lazy" src="https://camo.qiitausercontent.com/cc0a44dc3e46ea00e5b4e6641a23a5fc9dc21c80/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3535353135382f64386531363934612d383030372d336561312d656537622d3736313264666235616137652e706e67" alt="화면 transition 관계도" class="img_E7b_"></p><p>여기까지 정리하면 시스템 완성도가 구체적으로 이미지되겠네요.</p><p>이게 가장 먼저 화면설계를 하는 이유입니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="기능설계">기능설계<a class="hash-link" href="#기능설계" title="Direct link to heading">​</a></h2><p>화면설계 (UI설계)가 끝났으면, 시스템에 구현하는 기능을 설계합니다.</p><p>기능설계는 &quot;<strong>뒤에서 실행하는 처리, 필요한 데이터</strong>&quot;를 결정하는 페이즈라 이해해주세요.</p><p>필요한 결정사항</p><ul><li>뒤에서 처리 (기능명, 처리내용)</li><li>처리에 필요한 데이터, 데이터 취득처 (화면에서 입력, DB에서 취득 등)</li><li>취득 한 데이터 전달처 (화면게시, DB 보존 등)</li></ul><p>화면 transition 관계도에 등장한 각 페이지에 대해 대략적으로 기능 설계합시다.</p><p><img loading="lazy" src="https://camo.qiitausercontent.com/7c9b80a6ba8a07d92515533065eae3fdaba7340c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3535353135382f30636261393333312d353938652d653561322d313166322d3630643362326462616166352e706e67" alt="설계기능 (계정 만들기 화면)" class="img_E7b_"></p><p><img loading="lazy" src="https://camo.qiitausercontent.com/53a2bd4a3db28933a77c52801a25e048379ab302/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3535353135382f35623934306435342d383238362d303231342d646637312d3539616132303765336435392e706e67" alt="설계기능 (마이페이지)" class="img_E7b_"></p><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2F86c73af9-012a-a5c8-c0e9-fbb11ffb8cbe.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=060755d07f14b0a871283ef0bde378a0" alt="설계기능 (구입이력화면)" class="img_E7b_"></p><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2Fb5cb6277-ccdd-9d78-f119-e3bad322d415.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=33b4f8cadfcb7c1fceefb8dbacdf09e6" alt="설계기능 (검색 화면)" class="img_E7b_"></p><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2F7366f287-7698-498f-d1a6-751f5cb1342a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=031049a647d599c347720329997c76db" alt="설계기능 (상품 목록 화면)" class="img_E7b_"></p><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2F2ecebf84-9ef2-5fb3-0186-b92819d5327b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=dd19d3d4ba49a03f9aa5cfd1debf5b8a" alt="설계기능 (구입 화면)" class="img_E7b_"></p><p>이렇게하면 누가봐도, <strong>어떤 프로그램을 만들어야 하는가</strong> 이미지가 잡힙니다.</p><p>시스템을 구성하는 파츠 구성도 명확해지므로, <strong>팀 안에 역할 분할 분담</strong>도 간단하겠죠.</p><p>기능설계 마무리로 화면설계과 기능설계 이어봅시다.</p><p>화면 끼리 어떻게 해야 <strong>유저조작 / 뒤에서 처리</strong>가 일어나는가 가시화합니다.</p><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2Fca21ce77-1b2e-4301-8147-46dc161352fb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f930c7fdadebde8c48f4af83888ed5c8" alt="기능설계 (기능설계와 화면설계를 이음)" class="img_E7b_"></p><p>전체를 정리하면 이렇겠죠.</p><p>@정보량이 많아졌으니 자세히 보시려면 확대해서 봐주세요.</p><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2Febae8222-33d5-6fba-21ec-8d1b1cb2c0d7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=21b45f86958f20f50a8b45997e6c59fe" alt="기능설계랑 화면설계를 이음" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="데이터-설계">데이터 설계<a class="hash-link" href="#데이터-설계" title="Direct link to heading">​</a></h2><p>마지막은 데이터 설계입니다.</p><p>여기까지 준비했으니, 이제 드디어 데이터 설계가 시작됩니다.</p><ul><li>데이터의 구체적인 내용</li><li>데이터베이스 설계</li><li>데이터 흐름 (데이터 플로우)</li></ul><p>여기까지 의식하고 있으면 좋은 것은 <strong>데이터는 크게 나눠 4종류</strong>라는 점입니다.</p><p>여기서 4종류 데이터가 시스템 안에 어떻게 흘러가는지 설계합시다.</p><ul><li><p>프로그램에 &quot;입력하는&quot; 데이터(인수)</p><ul><li>Web 화면에서 유저가 입력하는 데이터</li><li>데이터베이스에서 읽는 데이터</li></ul></li><li><p>프로그램에서 &quot;돌아오는&quot; 데이터(반환값)</p><ul><li>Web 화면에 게시되는 데이터</li><li>데이터베이스에 저장하는 데이터</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="데이터의-구체적인-내부">데이터의 구체적인 내부<a class="hash-link" href="#데이터의-구체적인-내부" title="Direct link to heading">​</a></h2><p>이 단계에서 &quot;<strong>회원정보</strong>&quot; 등 추상화해둔 데이터 정의를 구체화합니다.</p><p>또, 실무 레벨이 되면 &quot;<strong>정규화</strong>&quot; 지식이 필요합니다.
@정규화에 대해서는 <a href="https://qiita.com/mochichoco/items/2904384b2856db2bf46c" target="_blank" rel="noopener noreferrer">여기</a>를 참조부탁드립니다.</p><ul><li><p>회원정보</p><ul><li>이름</li><li>영문이름</li><li>메일주소</li><li>비밀번호</li></ul></li><li><p>상품정보</p><ul><li>상품명</li><li>상세설명</li><li>상품 이미지 URL</li><li>장르</li><li>메이커</li><li>가격</li><li>평가</li></ul></li><li><p>구매이력</p><ul><li>회원 ID</li><li>상품 ID</li><li>구입일</li><li>구입수량</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="데이터베이스-설계">데이터베이스 설계<a class="hash-link" href="#데이터베이스-설계" title="Direct link to heading">​</a></h2><p>데이터 내부가 명확해졌으면 데이터베이스를 설계합니다</p><p>우선 염두해둘 것은, 지금까지 데이터를 &quot;회원정보&quot;, &quot;상품정보&quot;, &quot;구매이력&quot;으로 불렀지만</p><p>데이터베이스 관점에서는 제대로 된 표현인 <strong>테이블</strong>이 있습니다.</p><p>@ &quot;<strong>회원 테이블</strong>&quot;, &quot;<strong>상품 테이블</strong>&quot;, &quot;<strong>구매이력 테이블</strong>&quot; 이런식이죠</p><p>데이터베이스 설계에 필요한 작업은 셋입니다.</p><ul><li>테이블 역할을 &quot;<strong>마스터</strong>&quot;와 &quot;<strong>이력</strong>&quot;으로 구분한다</li><li>테이블 사이의 <strong>참조관계</strong> 정리</li><li>참조관계를 <strong>ER관계도</strong>로 그려둔다</li></ul><p>@ (주의) &quot;마스터&quot;, &quot;이력&quot;은 필자의 독자 관점입니다.</p><p>우선 이하의 기본으로 각 테이블 분할을 합시다</p><ul><li><p>마스터: 기초정보(다른 데이블에서 참조하는 데이터)</p><ul><li>회원 테이블 (이후 &quot;회원 마스터&quot;)</li><li>상품 테이블 (이후 &quot;상품 마스터&quot;)</li></ul></li><li><p>이력: 시스템에 이용하는 안에 축적되는 데이터</p><ul><li>구매이력 테이블</li></ul></li></ul><p>계속해서 &quot;테이블 사이에 참조관계&quot;는 <strong>참조처 - 참조처</strong> 관계를 화살표로 정리한다.</p><p><strong>유저의 행동으로 인해 생기는 데이터</strong>도 명기하면 데이터 흐름에 빈틈이 없어 이해하기 쉽습니다.</p><p>@기상 API라면 네트워크를 통해 외부에서 데이터를 호출하는 경우도 있습니다.</p><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2F1a4f6990-c7fb-86b0-9d00-b7ff101bb427.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1b19069c3a03af8626877f6eb1298729" alt="테이블 간 참조관계와 유저행동에서 생긴 데이터" class="img_E7b_"></p><p>마지막으로 데이터베이스의 설계도가 되는 ER관계도를 만들면 완성입니다.
@ER관계도의 상세한 서술 방법은 <a href="https://it-koala.com/entity-relationship-diagram-1897" target="_blank" rel="noopener noreferrer">여기</a>를 참조해주세요.</p><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2F8936eb59-aca8-b7fd-549a-d56bdd1ed7e4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=08af58e6b14898a969b482b362eda874" alt="ER 관계도" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="데이터-흐름-데이터-플로">데이터 흐름 (데이터 플로)<a class="hash-link" href="#데이터-흐름-데이터-플로" title="Direct link to heading">​</a></h2><p>마지막에 &quot;<strong>데이터베이스와 화면 transition 관계도</strong>&quot;를 정리하면,</p><p>시스템 전체상 &quot;<strong>화면설계 x 기능설계 x 데이터 설계</strong>&quot;가 보입니다.</p><p>이 설계도를 기본으로 하나 하나 프로그램을 적으므로, 계속 연습해서 제대로 된 전체상을 그릴 수 있도록 합시다.</p><p><img loading="lazy" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F555158%2F73b04fb5-b48d-005e-b9b6-d68f7d743a40.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7108a748357653ed9ae520b1d942973f" alt="화면설계 x 기능설계 x 데이터 설계" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="기본설계-그-넘어">기본설계 그 넘어<a class="hash-link" href="#기본설계-그-넘어" title="Direct link to heading">​</a></h2><p>여기까지 이해하면 기본설계가 되었으므로, 자신의 제품 개발하는 목적만 있으면 됩니다.</p><p>모르는 부분은 이것저것 조사해 프로그래밍을 진행합시다.</p><p>개발 후, 서비스를 공개하기 위한 가짜 서버 설정은 많은 분이 Qiita에 글을 올려주셨으니, 이해하기 쉬운 것으로 <a href="https://qiita.com/tachibanayu24/items/b8d73cdfd4cbd42c5b1d" target="_blank" rel="noopener noreferrer">여길</a> 참조해주세요.</p><p>또, 실제 개발환경에는 <strong>상세 설계</strong>까지 만들지 않으면 프로그래머에게 명확한 의뢰를 할 수 없습니다.</p><p>본 글의 내용을 제대로 이해한 후, 우선 이런 공부를 해보세요.</p><ul><li>클래스 관계도, 시퀀스 관계도를 그린다</li><li>시스템 아키텍처를 결정한다</li><li>아키텍처 각 부위의 구현기술을 결정한다</li></ul><p>그러나 이렇게 말해도, 최근은 특히나 기술혁신이 빠르기에 <strong>상세설계하는 도중에 신기술이 등장하는</strong> 경우도 있습니다.
애자일 개발을 배워 <strong>상세설계는 만들며 결정</strong>하는 것이 좋습니다.</p><p>@사내 개발방침에 따르는 것도 좋습니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="맺음말">맺음말<a class="hash-link" href="#맺음말" title="Direct link to heading">​</a></h2><p>팀 개발 현장에서는 <strong>역할 분담이 기본전제</strong>입니다.
제대로 전체상을 그리고 &quot;<strong>누가, 뭐를 만드는가</strong>&quot;를 명확히 해서 부드럽게 개발을 진행합시다.</p><p>또 SNS에도 여러 정보를 발신하고 있으므로 글을 읽고 좋다 느꼈다면 <a href="https://twitter.com/digisaku710" target="_blank" rel="noopener noreferrer">twitter</a>를 팔로우해주시면 감사합니다.</p><p>(추가)</p><p>Python으로 시스템 설계하기 위해 필요한 스킬을 정리한 글을 적었습니다.</p><p>부디, 프로그래밍에 관심있다면 참조해주세요</p><ul><li>시스템 개발에 필요한 스킬의 전체상: <a href="https://qiita.com/Saku731/items/52a3bbacd002f26f408e" target="_blank" rel="noopener noreferrer">Python에서 제로부터 서비스 개발, 공개하는 학습 로드맵</a></li><li>Django를 사용한 시스템 개발 수순: <a href="https://qiita.com/Saku731/items/ed64190a12a4498b9446" target="_blank" rel="noopener noreferrer">Django(Python)으로 시스템 개발할 수 있는 글 (입문편)</a></li></ul><p>@바라시는 분이 계셔서 Udemy 해설영상을 만들었습니다.
@선착 50명까지는 무료 쿠폰이 있으니 활용해주세요
(부디 좋은 평가 부탁드립니다 m(<!-- -->_<!-- -->_<!-- -->)m)
<a href="https://www.udemy.com/course/digisaku_requirements_definition_and_system_design/?couponCode=5B6F70B33E1FB0791B12" target="_blank" rel="noopener noreferrer">https://www.udemy.com/course/digisaku_requirements_definition_and_system_design/?couponCode=5B6F70B33E1FB0791B12</a></p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/design">design</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/La-viva-es-Sueno/blog/tags/번역">번역</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 요건정의 ~ 시스템 설계까지 할 수 있는 인재가 되는 글" href="/La-viva-es-Sueno/blog/you-can-define-and-design-project"><b>Read More</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/La-viva-es-Sueno/blog/tags/번역"><div class="pagination-nav__label">Newer Entries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/La-viva-es-Sueno/blog/tags/번역/page/3"><div class="pagination-nav__label">Older Entries</div></a></div></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 rewrite0w0, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/La-viva-es-Sueno/assets/js/runtime~main.b5eb68f0.js"></script>
<script src="/La-viva-es-Sueno/assets/js/main.e651af60.js"></script>
</body>
</html>